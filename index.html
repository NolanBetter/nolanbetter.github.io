<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nolan's And Grayson's Games</title>
<link rel="icon" href="https://nolangraysongames.com/Logo.png" type="image/x-icon">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;500;600;700&family=Exo+2:wght@300;400;600;700;800&display=swap" rel="stylesheet">

<style>
/* ===== CSS VARIABLES / THEMES ===== */
:root {
--bg: #0a0a0f;
--bg2: #111118;
--surface: rgba(255,255,255,0.04);
--surface2: rgba(255,255,255,0.08);
--border: rgba(255,255,255,0.12);
--border-strong: rgba(255,255,255,0.25);
--accent: #7c5cfc;
--accent2: #5eead4;
--accent3: #f472b6;
--text: #e2e8f0;
--text-muted: #94a3b8;
--text-dim: #475569;
--danger: #f87171;
--gold: #fbbf24;
--nav-h: 64px;
--radius: 12px;
--radius-sm: 8px;
--shadow: 0 4px 24px rgba(0,0,0,0.5);
--glow: 0 0 20px rgba(124,92,252,0.3);
}
body.theme-neon {
--bg:#050510;--bg2:#0a0a1a;--surface:rgba(57,255,20,0.05);--surface2:rgba(57,255,20,0.1);
--border:rgba(57,255,20,0.2);--border-strong:rgba(57,255,20,0.5);--accent:#39ff14;--accent2:#00eaff;
--accent3:#ff00ff;--text:#e0ffe0;--text-muted:#7dff6b;--text-dim:#3a7a33;--gold:#ffd700;
--glow:0 0 20px rgba(57,255,20,0.4);
}
body.theme-midnight {
--bg:#020617;--bg2:#050c23;--surface:rgba(99,102,241,0.07);--surface2:rgba(99,102,241,0.14);
--border:rgba(99,102,241,0.2);--border-strong:rgba(99,102,241,0.5);--accent:#818cf8;--accent2:#a5f3fc;
--accent3:#c084fc;--text:#e0e7ff;--text-muted:#a5b4fc;--text-dim:#3730a3;--gold:#fde68a;
--glow:0 0 20px rgba(99,102,241,0.35);
}
body.theme-sunset {
--bg:#1a0a0a;--bg2:#2a1010;--surface:rgba(255,107,107,0.06);--surface2:rgba(255,107,107,0.12);
--border:rgba(255,107,107,0.2);--border-strong:rgba(255,107,107,0.45);--accent:#ff6b6b;--accent2:#ffd93d;
--accent3:#a29bfe;--text:#fff5e1;--text-muted:#ffb3b3;--text-dim:#7a3a3a;--gold:#ffd93d;
--glow:0 0 20px rgba(255,107,107,0.35);
}
body.theme-ocean {
--bg:#020d1a;--bg2:#041524;--surface:rgba(5,191,219,0.06);--surface2:rgba(5,191,219,0.12);
--border:rgba(5,191,219,0.2);--border-strong:rgba(5,191,219,0.45);--accent:#05bfdb;--accent2:#00d9ff;
--accent3:#4ecdc4;--text:#e8f9fd;--text-muted:#7ee8f5;--text-dim:#1e5a6b;--gold:#ffd93d;
--glow:0 0 20px rgba(5,191,219,0.35);
}
body.theme-forest {
--bg:#020f02;--bg2:#041804;--surface:rgba(111,185,143,0.06);--surface2:rgba(111,185,143,0.12);
--border:rgba(111,185,143,0.2);--border-strong:rgba(111,185,143,0.45);--accent:#6fb98f;--accent2:#90ee90;
--accent3:#98d8c8;--text:#d4edda;--text-muted:#90c9a0;--text-dim:#2d5a3d;--gold:#ffd700;
--glow:0 0 20px rgba(111,185,143,0.35);
}

body.theme-candy {
--bg:#1a0520;--bg2:#2a0a35;--surface:rgba(255,100,200,0.06);--surface2:rgba(255,100,200,0.12);
--border:rgba(255,100,200,0.2);--border-strong:rgba(255,100,200,0.45);--accent:#ff64c8;--accent2:#ffb3e6;
--accent3:#c084fc;--text:#ffe8f8;--text-muted:#ff9de0;--text-dim:#7a2a6a;--gold:#ffd700;
--glow:0 0 20px rgba(255,100,200,0.4);
}
body.theme-lava {
--bg:#100500;--bg2:#1e0a00;--surface:rgba(255,80,0,0.06);--surface2:rgba(255,80,0,0.12);
--border:rgba(255,80,0,0.2);--border-strong:rgba(255,140,0,0.5);--accent:#ff5000;--accent2:#ffaa00;
--accent3:#ff2200;--text:#fff0e8;--text-muted:#ff9966;--text-dim:#7a2500;--gold:#ffcc00;
--glow:0 0 24px rgba(255,80,0,0.5);
}
body.theme-arctic {
--bg:#020a14;--bg2:#04111f;--surface:rgba(180,230,255,0.05);--surface2:rgba(180,230,255,0.1);
--border:rgba(180,230,255,0.15);--border-strong:rgba(180,230,255,0.4);--accent:#b4e6ff;--accent2:#ffffff;
--accent3:#80d0ff;--text:#eaf6ff;--text-muted:#9fcfec;--text-dim:#2a5a7a;--gold:#ffe9a0;
--glow:0 0 20px rgba(180,230,255,0.3);
}
body.theme-gold {
--bg:#0f0a00;--bg2:#1a1200;--surface:rgba(255,200,0,0.06);--surface2:rgba(255,200,0,0.12);
--border:rgba(255,200,0,0.2);--border-strong:rgba(255,200,0,0.45);--accent:#ffc800;--accent2:#ffe566;
--accent3:#ff9f00;--text:#fff8e0;--text-muted:#ffd966;--text-dim:#7a5a00;--gold:#ffc800;
--glow:0 0 24px rgba(255,200,0,0.4);
}
body.theme-toxic {
--bg:#030d00;--bg2:#061500;--surface:rgba(100,255,0,0.05);--surface2:rgba(100,255,0,0.1);
--border:rgba(100,255,0,0.18);--border-strong:rgba(100,255,0,0.45);--accent:#64ff00;--accent2:#aaff55;
--accent3:#00ffaa;--text:#edffd4;--text-muted:#88ee44;--text-dim:#2e6600;--gold:#ffe000;
--glow:0 0 22px rgba(100,255,0,0.4);
}
body.theme-blood {
--bg:#0d0000;--bg2:#1a0000;--surface:rgba(200,0,0,0.06);--surface2:rgba(200,0,0,0.12);
--border:rgba(200,0,0,0.2);--border-strong:rgba(220,0,0,0.45);--accent:#cc0000;--accent2:#ff4444;
--accent3:#ff0066;--text:#ffe0e0;--text-muted:#dd8888;--text-dim:#660000;--gold:#ff6600;
--glow:0 0 22px rgba(200,0,0,0.5);
}
/* ===== RESET & BASE ===== */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
body{background:var(--bg);color:var(--text);font-family:'Exo 2',sans-serif;font-weight:400;min-height:100vh;overflow-x:hidden;transition:background 0.5s ease,color 0.5s ease}
body.perf-mode *{transition:none!important;animation:none!important}
body.perf-mode canvas#bgCanvas{display:none}
body.perf-mode .bg-overlay{display:none}

/* ===== ANNOUNCEMENT BANNER ===== */
#announcement-banner {
grid-column: 1 / -1;
display: none;
align-items: center;
justify-content: center;
gap: 8px;
padding: 10px 48px 10px 16px;
text-align: center;
font-size: 14px;
font-weight: 700;
font-family: 'Rajdhani', sans-serif;
letter-spacing: 0.5px;
color: #000;
background: linear-gradient(90deg, var(--accent), var(--accent2), var(--accent3), var(--accent));
background-size: 300% 100%;
animation: bannerGrad 4s linear infinite;
border-radius: var(--radius);
position: relative;
box-shadow: var(--glow);
}
#announcement-banner.visible { display: flex; }
@keyframes bannerGrad { 0% { background-position: 0% } 100% { background-position: 300% } }
#banner-close {
position: absolute; right: 12px; top: 50%; transform: translateY(-50%);
cursor: pointer; font-size: 18px; line-height: 1; color: rgba(0,0,0,0.6);
}
#banner-close:hover { color: #000; }

/* ===== BACKGROUND CANVAS ===== */
#bgCanvas{position:fixed;top:0;left:0;width:100%;height:100%;z-index:0;pointer-events:none;transition:opacity 0.5s}
#bgCanvas.interactive{pointer-events:all;cursor:crosshair}
.bg-overlay{position:fixed;top:0;left:0;width:100%;height:100%;z-index:0;pointer-events:none;
background:radial-gradient(ellipse at 20% 50%,rgba(124,92,252,0.08) 0%,transparent 60%),
radial-gradient(ellipse at 80% 20%,rgba(94,234,212,0.06) 0%,transparent 50%);
transition:background 0.5s ease}

/* ===== PAGE FADE TRANSITION ===== */

/* ===== NAVBAR ===== */
:root{--nav-h:108px}
#navbar{position:fixed;top:0;left:0;right:0;z-index:1000;display:flex;flex-direction:column;
background:rgba(10,10,15,0.92);backdrop-filter:blur(24px) saturate(1.8);
-webkit-backdrop-filter:blur(24px) saturate(1.8);border-bottom:1px solid var(--border);
transition:background 0.5s,border-color 0.5s,top 0.3s}
#navbar-top{display:flex;align-items:center;padding:0 18px;height:52px;gap:14px;border-bottom:1px solid var(--border)}
#navbar-logo{flex-shrink:0;cursor:pointer;display:flex;align-items:center;gap:10px;text-decoration:none}
#navbar-logo img{height:32px;width:auto}
#navbar-logo-text{font-family:'Rajdhani',sans-serif;font-weight:700;font-size:17px;letter-spacing:0.5px;color:var(--text);white-space:nowrap}
#navbar-search{flex:1;position:relative;display:flex;align-items:center;max-width:480px;margin:0 auto}
#search{width:100%;background:var(--surface);border:1.5px solid var(--border);color:var(--text);
padding:7px 36px 7px 38px;border-radius:999px;font-family:'Exo 2',sans-serif;font-size:13px;
transition:all 0.3s ease;outline:none}
#search:focus{border-color:var(--accent);box-shadow:0 0 0 3px color-mix(in srgb,var(--accent) 20%,transparent);background:var(--surface2)}
#search::placeholder{color:var(--text-dim)}
#search-icon{position:absolute;left:12px;color:var(--text-dim);font-size:15px;pointer-events:none;line-height:1}
#search-clear{position:absolute;right:12px;color:var(--text-dim);cursor:pointer;font-size:18px;line-height:1;transition:color 0.2s}
#search-clear:hover{color:var(--danger)}
#perf-btn{flex-shrink:0;width:34px;height:34px;border-radius:var(--radius-sm);background:var(--surface);
border:1px solid var(--border);color:var(--text-muted);cursor:pointer;display:flex;align-items:center;
justify-content:center;font-size:15px;transition:all 0.25s}
#perf-btn:hover{color:var(--accent);border-color:var(--accent)}
#perf-btn.active{color:var(--accent2);border-color:var(--accent2);background:var(--surface2)}
#navbar-tabs{display:flex;align-items:center;height:56px;padding:0 14px;gap:6px;overflow-x:auto;
scrollbar-width:none;-webkit-overflow-scrolling:touch;
-webkit-mask-image:linear-gradient(to right,transparent 0px,black 24px,black calc(100% - 24px),transparent 100%);
mask-image:linear-gradient(to right,transparent 0px,black 24px,black calc(100% - 24px),transparent 100%)}
#navbar-tabs::-webkit-scrollbar{display:none}
.nav-tab{display:flex;align-items:center;gap:7px;padding:0 18px;height:38px;border-radius:999px;
font-family:'Rajdhani',sans-serif;font-weight:700;font-size:13px;color:var(--text-muted);cursor:pointer;
white-space:nowrap;border:1.5px solid transparent;background:var(--surface);transition:all 0.22s ease;
text-transform:uppercase;letter-spacing:0.8px;flex-shrink:0;position:relative;outline:none}
.nav-tab:hover{color:var(--text);background:var(--surface2);border-color:var(--border-strong);transform:translateY(-1px)}
.nav-tab.active{color:var(--bg);background:var(--accent);border-color:var(--accent);box-shadow:0 0 14px color-mix(in srgb,var(--accent) 50%,transparent)}
.nav-tab .tab-icon{font-size:15px}

/* ===== MAIN CONTENT ===== */
#main{position:relative;z-index:1;padding-top:var(--nav-h);min-height:100vh}

/* ===== PAGE TRANSITIONS ===== */
.page{display:none!important}
.page.active{display:block!important;animation:pageFadeIn 0.35s ease both}
#page-home.active{display:grid!important;animation:pageFadeIn 0.35s ease both}
#page-proxy.active{display:block!important;animation:pageFadeIn 0.35s ease both}
#page-favorites.active{display:block!important;animation:pageFadeIn 0.35s ease both}
@keyframes pageFadeIn{
from{opacity:0;transform:translateY(12px)}
to{opacity:1;transform:translateY(0)}
}
body.perf-mode .page.active{animation:none}

/* ===== HOME PAGE ===== */
#page-home{display:grid;grid-template-columns:220px 1fr 280px;grid-template-rows:auto 1fr;gap:20px;padding:24px;min-height:calc(100vh - var(--nav-h))}
.home-hero{grid-column:1/-1;display:flex;flex-direction:column;align-items:center;padding:40px 20px 20px;position:relative;overflow:hidden}
.home-hero img.hero-title{max-width:min(600px,90%);height:auto;filter:drop-shadow(0 0 30px var(--accent));animation:heroFloat 3s ease-in-out infinite}
@keyframes heroFloat{0%,100%{transform:translateY(0) rotate(0deg)}50%{transform:translateY(-8px) rotate(0.5deg)}}
.home-hero-sub{font-family:'Rajdhani',sans-serif;font-weight:500;font-size:16px;color:var(--text-muted);letter-spacing:3px;text-transform:uppercase;margin-top:12px;animation:fadeUp 1s ease 0.3s both}
@keyframes fadeUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
.home-left{display:flex;flex-direction:column;gap:8px;padding-top:8px}
.home-nav-btn{display:flex;align-items:center;gap:10px;padding:12px 16px;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius-sm);color:var(--text);cursor:pointer;font-family:'Rajdhani',sans-serif;font-weight:600;font-size:15px;text-transform:uppercase;letter-spacing:0.5px;transition:all 0.25s ease;text-align:left}
.home-nav-btn:hover{background:var(--surface2);border-color:var(--accent);color:var(--accent);transform:translateX(4px);box-shadow:var(--glow)}
.home-nav-btn .btn-icon{font-size:18px;flex-shrink:0}
.home-nav-divider{height:1px;background:var(--border);margin:4px 0}
.home-featured{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:20px;margin-bottom:16px}
.home-featured h3{font-family:'Rajdhani',sans-serif;font-weight:700;font-size:18px;color:var(--accent);text-transform:uppercase;letter-spacing:1px;margin-bottom:16px;display:flex;align-items:center;gap:8px}
.featured-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:10px}
.featured-card{background:var(--surface2);border:1px solid var(--border);border-radius:var(--radius-sm);padding:12px;cursor:pointer;text-align:center;transition:all 0.25s;text-decoration:none}
.featured-card:hover{border-color:var(--accent);transform:translateY(-3px);box-shadow:var(--glow)}
.featured-card .fc-icon{font-size:28px;margin-bottom:6px}
.featured-card .fc-name{font-size:12px;font-weight:600;color:var(--text);line-height:1.3}
.home-stats{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
.stat-card{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius-sm);padding:14px;text-align:center}
.stat-num{font-family:'Rajdhani',sans-serif;font-weight:700;font-size:28px;color:var(--accent)}
.stat-label{font-size:11px;color:var(--text-muted);text-transform:uppercase;letter-spacing:1px}

/* Recently Played panel */
.home-recently{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:16px;margin-bottom:16px}
.home-recently h3{font-family:'Rajdhani',sans-serif;font-weight:700;font-size:16px;color:var(--accent2);text-transform:uppercase;letter-spacing:1px;margin-bottom:12px;display:flex;align-items:center;gap:8px}
.recently-list{display:flex;flex-direction:column;gap:6px;max-height:180px;overflow-y:auto}
.recently-item{display:flex;align-items:center;gap:10px;padding:7px 10px;background:var(--surface2);border-radius:var(--radius-sm);cursor:pointer;transition:all 0.2s;text-decoration:none;color:var(--text)}
.recently-item:hover{border-color:var(--accent);background:var(--surface);transform:translateX(3px)}
.recently-item .ri-icon{font-size:18px;flex-shrink:0}
.recently-item .ri-name{font-size:13px;font-weight:600;flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.recently-item .ri-time{font-size:10px;color:var(--text-dim);flex-shrink:0}
.recently-empty{font-size:12px;color:var(--text-dim);padding:8px;text-align:center}

/* ===== CHANGELOG ===== */
.home-right{}
.changelog-panel{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:20px;height:100%}
.changelog-panel h3{font-family:'Rajdhani',sans-serif;font-weight:700;font-size:18px;color:var(--accent);text-transform:uppercase;letter-spacing:1px;margin-bottom:16px;display:flex;align-items:center;gap:8px}
.cl-item{padding:12px 0;border-bottom:1px solid var(--border)}
.cl-item:last-child{border-bottom:none}
.cl-version{font-family:'Rajdhani',sans-serif;font-weight:700;font-size:13px;color:var(--accent);margin-bottom:2px}
.cl-date{font-size:11px;color:var(--text-dim);margin-bottom:6px}
.cl-entry{font-size:12px;color:var(--text-muted);display:flex;align-items:flex-start;gap:6px;margin-bottom:4px;line-height:1.4}
.cl-entry::before{content:'';color:var(--accent);flex-shrink:0}
.cl-badge{display:inline-block;padding:1px 6px;border-radius:4px;font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:0.5px}
.cl-badge.new{background:rgba(94,234,212,0.15);color:var(--accent2)}
.cl-badge.fix{background:rgba(248,113,113,0.15);color:var(--danger)}
.cl-badge.update{background:rgba(124,92,252,0.15);color:var(--accent)}

/* ===== SECTION HEADER ===== */
.section-header{padding:24px 24px 0;display:flex;align-items:center;justify-content:space-between;margin-bottom:0}
.section-title{font-family:'Rajdhani',sans-serif;font-weight:700;font-size:28px;color:var(--text);display:flex;align-items:center;gap:10px}
.section-title span{color:var(--text-dim);font-size:18px}
.section-count{font-size:13px;color:var(--text-muted);background:var(--surface);border:1px solid var(--border);padding:4px 12px;border-radius:999px}

/* ===== FILTER BAR ===== */
.filter-bar{display:flex;align-items:center;gap:8px;padding:12px 24px;flex-wrap:wrap}
.filter-btn{padding:5px 14px;border-radius:999px;font-family:'Rajdhani',sans-serif;font-weight:700;font-size:12px;text-transform:uppercase;letter-spacing:0.6px;border:1.5px solid var(--border);background:var(--surface);color:var(--text-muted);cursor:pointer;transition:all 0.2s;white-space:nowrap}
.filter-btn:hover{border-color:var(--accent);color:var(--text)}
.filter-btn.active{background:var(--accent);border-color:var(--accent);color:var(--bg)}
.filter-sort{margin-left:auto;background:var(--bg2);border:1px solid var(--border);color:var(--text);padding:5px 10px;border-radius:var(--radius-sm);font-family:'Exo 2',sans-serif;font-size:12px;cursor:pointer;outline:none;appearance:none;-webkit-appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6'%3E%3Cpath d='M0 0l5 6 5-6z' fill='%2394a3b8'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 8px center;padding-right:24px}
.filter-sort:focus{border-color:var(--accent);box-shadow:0 0 0 2px color-mix(in srgb,var(--accent) 20%,transparent)}
.filter-sort option{background:var(--bg2);color:var(--text)}

/* ===== GRID LAYOUTS ===== */
.card-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:12px;padding:20px 24px}
.card-grid.list-mode{grid-template-columns:1fr;max-width:800px}

/* ===== GAME CARD ===== */
.game-card{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;cursor:pointer;transition:all 0.25s ease;position:relative;text-decoration:none;display:block}
.game-card:hover{border-color:var(--accent);transform:translateY(-4px) scale(1.01);box-shadow:var(--shadow),var(--glow)}
.game-card:active{transform:translateY(-1px) scale(1)}
.card-thumb{width:100%;aspect-ratio:16/9;background:var(--bg2);overflow:hidden;position:relative;display:flex;align-items:center;justify-content:center}
.card-thumb img{width:100%;height:100%;object-fit:cover;transition:transform 0.4s ease}
.game-card:hover .card-thumb img{transform:scale(1.05)}
.card-thumb-placeholder{font-size:48px;opacity:0.3}
.card-thumb-overlay{position:absolute;inset:0;background:linear-gradient(to top,rgba(0,0,0,0.6) 0%,transparent 50%)}
.card-fav{position:absolute;top:8px;right:8px;z-index:2;font-size:18px;cursor:pointer;color:rgba(255,255,255,0.3);transition:all 0.2s;text-shadow:0 1px 3px rgba(0,0,0,0.5)}
.card-fav:hover,.card-fav.active{color:var(--gold)}
.card-fav.animate{animation:favPop 0.35s ease}
@keyframes favPop{0%,100%{transform:scale(1)}50%{transform:scale(1.5)}}

/* Star Rating on cards */
.card-rating{position:absolute;bottom:6px;left:8px;z-index:2;display:flex;gap:2px;align-items:center}
.card-rating .star{font-size:11px;cursor:pointer;color:rgba(255,255,255,0.3);transition:color 0.15s;line-height:1}
.card-rating .star.filled{color:var(--gold)}
.card-rating .star:hover,.card-rating .star:hover ~ .star{color:rgba(255,255,255,0.3)}
.card-rating:hover .star{color:var(--gold)}
.card-rating .star:hover ~ .star{color:rgba(255,255,255,0.3)!important}

.card-info{padding:12px 14px 14px}
.card-name{font-family:'Rajdhani',sans-serif;font-weight:700;font-size:15px;color:var(--text);line-height:1.3;margin-bottom:4px}
.card-meta{font-size:11px;color:var(--text-muted)}
.card-tag{display:inline-block;padding:2px 7px;background:var(--surface2);border-radius:4px;font-size:10px;font-weight:600;color:var(--accent);text-transform:uppercase;letter-spacing:0.5px;margin-top:6px}
.card-played-badge{position:absolute;top:8px;left:8px;z-index:2;background:rgba(0,0,0,0.7);border-radius:4px;padding:2px 6px;font-size:10px;font-weight:700;color:var(--accent2);font-family:'Rajdhani',sans-serif;letter-spacing:0.5px}

/* ===== WEBSITE CARD ===== */
.site-card{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;cursor:pointer;transition:all 0.25s ease;position:relative;text-decoration:none;display:block}
.site-card:hover{border-color:var(--accent);transform:translateY(-3px);box-shadow:var(--shadow),var(--glow)}
.site-preview{width:100%;height:80px;background:var(--bg2);display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden}
.site-preview-bg{position:absolute;inset:0;background:linear-gradient(135deg,var(--bg2) 0%,var(--surface2) 100%)}
.site-favicon{width:32px;height:32px;border-radius:8px;object-fit:contain;position:relative;z-index:1}
.site-domain{position:absolute;bottom:6px;left:10px;font-size:10px;color:var(--text-dim);font-family:monospace;z-index:1}
.site-fav{position:absolute;top:8px;right:8px;z-index:2;font-size:16px;cursor:pointer;color:rgba(255,255,255,0.3);transition:all 0.2s}
.site-fav:hover,.site-fav.active{color:var(--gold)}
.site-fav.animate{animation:favPop 0.35s ease}
.site-info{padding:10px 12px 12px}
.site-name{font-family:'Rajdhani',sans-serif;font-weight:700;font-size:14px;color:var(--text);margin-bottom:2px}
.site-name.blocked{color:var(--danger);text-decoration:line-through}
.site-name.pageb{color:var(--accent2)}
.site-name.discord{color:#7289da}

/* ===== LINK LIST ===== */
.link-list{padding:12px 24px 24px;display:flex;flex-direction:column;gap:6px}
.link-row{display:flex;align-items:center;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius-sm);overflow:hidden;transition:all 0.25s;position:relative}
.link-row:hover{border-color:var(--accent);background:var(--surface2);transform:translateX(4px)}
/* Site-card style link rows */
.link-card{display:flex;align-items:center;gap:12px;padding:10px 12px;cursor:pointer;text-decoration:none;flex:1;color:var(--text);overflow:hidden}
.link-card-favicon{width:28px;height:28px;border-radius:6px;object-fit:contain;flex-shrink:0;background:var(--surface2);padding:2px}
.link-card-domain{font-size:10px;color:var(--text-dim);font-family:monospace;display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.link-card-name{font-size:14px;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.link-card-name.blocked{color:var(--danger);text-decoration:line-through}
.link-card-name.pageb{color:var(--accent2)}
.link-card-name.discord{color:#7289da}
.link-row a{flex:1;padding:11px 16px;color:var(--text);text-decoration:none;font-size:14px;display:block}
.link-row a.blocked{color:var(--danger);text-decoration:line-through}
.link-row a.pageb{color:var(--accent2)}
.link-row a.discord{color:#7289da}
.link-row-fav{padding:0 14px;font-size:18px;color:var(--text-dim);cursor:pointer;transition:all 0.2s;flex-shrink:0}
.link-row-fav:hover,.link-row-fav.active{color:var(--gold)}
.link-row-fav.animate{animation:favPop 0.35s ease}

/* ===== CONTEXT MENU ===== */
#context-menu{position:fixed;z-index:9000;background:var(--bg2);border:1px solid var(--border-strong);border-radius:var(--radius-sm);padding:6px;min-width:180px;box-shadow:var(--shadow);display:none;animation:contextIn 0.15s ease}
#context-menu.visible{display:block}
@keyframes contextIn{from{opacity:0;transform:scale(0.93)}to{opacity:1;transform:scale(1)}}
.ctx-item{display:flex;align-items:center;gap:10px;padding:8px 12px;border-radius:6px;cursor:pointer;font-size:13px;color:var(--text);transition:all 0.15s;white-space:nowrap}
.ctx-item:hover{background:var(--surface2);color:var(--accent)}
.ctx-item .ctx-icon{font-size:15px;width:20px;text-align:center}
.ctx-sep{height:1px;background:var(--border);margin:4px 0}

/* ===== SEARCH OVERLAY ===== */
#search-results{position:fixed;top:var(--nav-h);left:0;right:0;background:rgba(10,10,15,0.97);backdrop-filter:blur(20px);z-index:900;padding:16px 24px;max-height:calc(100vh - var(--nav-h));overflow-y:auto;display:none;border-bottom:1px solid var(--border)}
#search-results.visible{display:block}
#search-results h4{font-family:'Rajdhani',sans-serif;font-size:14px;font-weight:600;color:var(--text-muted);text-transform:uppercase;letter-spacing:1px;margin-bottom:10px;display:flex;align-items:center;justify-content:space-between}
.search-history-row{display:flex;flex-wrap:wrap;gap:6px;margin-bottom:12px}
.sh-tag{display:flex;align-items:center;gap:5px;background:var(--surface2);border:1px solid var(--border);border-radius:999px;padding:3px 10px;font-size:12px;color:var(--text-muted);cursor:pointer;transition:all 0.2s}
.sh-tag:hover{border-color:var(--accent);color:var(--accent)}
.sh-tag .sh-del{color:var(--text-dim);margin-left:2px;font-size:14px;line-height:1}
.sh-tag .sh-del:hover{color:var(--danger)}
.sr-item{display:flex;align-items:center;gap:12px;padding:10px 12px;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius-sm);margin-bottom:6px;cursor:pointer;text-decoration:none;color:var(--text);transition:all 0.2s}
.sr-item:hover{border-color:var(--accent);background:var(--surface2)}
.sr-icon{font-size:18px;flex-shrink:0}
.sr-text{flex:1}
.sr-name{font-weight:600;font-size:14px}
.sr-cat{font-size:11px;color:var(--text-muted)}

/* ===== SETTINGS PAGE ===== */
#page-settings{padding:24px}
.settings-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:16px;margin-top:20px}
.settings-card{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:20px}
.settings-card h3{font-family:'Rajdhani',sans-serif;font-weight:700;font-size:17px;color:var(--accent);text-transform:uppercase;letter-spacing:1px;margin-bottom:16px;display:flex;align-items:center;gap:8px}
.setting-row{display:flex;align-items:center;justify-content:space-between;padding:10px 0;border-bottom:1px solid var(--border)}
.setting-row:last-child{border-bottom:none;padding-bottom:0}
.setting-label{font-size:14px;color:var(--text)}
.setting-desc{font-size:11px;color:var(--text-muted);margin-top:2px}
.s-select{background:var(--bg2);border:1px solid var(--border);color:var(--text);padding:7px 12px;border-radius:var(--radius-sm);font-family:'Exo 2',sans-serif;font-size:13px;cursor:pointer;outline:none;transition:border-color 0.2s}
.s-select:focus{border-color:var(--accent)}
.s-btn{background:var(--surface2);border:1px solid var(--border);color:var(--text);padding:7px 16px;border-radius:var(--radius-sm);font-family:'Exo 2',sans-serif;font-size:13px;cursor:pointer;transition:all 0.2s}
.s-btn:hover{border-color:var(--accent);color:var(--accent)}
.s-btn.danger:hover{border-color:var(--danger);color:var(--danger)}
.s-toggle{position:relative;width:44px;height:24px;flex-shrink:0}
.s-toggle input{opacity:0;width:0;height:0}
.s-toggle-track{position:absolute;inset:0;background:var(--surface2);border:1px solid var(--border);border-radius:12px;cursor:pointer;transition:all 0.3s}
.s-toggle-track::after{content:'';position:absolute;top:3px;left:3px;width:16px;height:16px;background:var(--text-dim);border-radius:50%;transition:all 0.3s}
.s-toggle input:checked+.s-toggle-track{background:var(--accent);border-color:var(--accent)}
.s-toggle input:checked+.s-toggle-track::after{background:white;transform:translateX(20px)}
.theme-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin-top:4px}
.theme-chip{padding:8px;border-radius:var(--radius-sm);border:2px solid var(--border);cursor:pointer;text-align:center;transition:all 0.2s;font-size:12px;font-weight:600;font-family:'Rajdhani',sans-serif;text-transform:uppercase}
.theme-chip:hover{transform:scale(1.05)}
.theme-chip.active{border-color:var(--accent);box-shadow:var(--glow)}
.bg-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:8px;margin-top:4px}
.bg-chip{padding:10px 8px;border-radius:var(--radius-sm);border:1.5px solid var(--border);cursor:pointer;text-align:center;transition:all 0.2s;font-size:12px;font-weight:600;color:var(--text-muted);font-family:'Rajdhani',sans-serif}
.bg-chip:hover{border-color:var(--accent);color:var(--text)}
.bg-chip.active{border-color:var(--accent);color:var(--accent);background:var(--surface2)}
.bg-chip .bc-icon{font-size:20px;display:block;margin-bottom:4px}

/* Announcement settings */
.announcement-row{display:flex;flex-direction:column;gap:8px;padding-top:8px}
#announcement-input{width:100%;background:var(--bg2);border:1px solid var(--border);color:var(--text);padding:8px 12px;border-radius:var(--radius-sm);font-family:'Exo 2',sans-serif;font-size:13px;outline:none;resize:none}
#announcement-input:focus{border-color:var(--accent)}
.announcement-btns{display:flex;gap:8px}

/* ===== PROXY PAGE ===== */

.coming-soon-box{text-align:center;max-width:500px}
.cs-icon{font-size:80px;margin-bottom:20px}
.cs-title{font-family:'Rajdhani',sans-serif;font-weight:700;font-size:48px;color:var(--text);letter-spacing:2px;text-transform:uppercase;margin-bottom:12px}
.cs-sub{font-size:16px;color:var(--text-muted);line-height:1.6}
.cs-bar{margin:30px auto;width:200px;height:4px;background:var(--surface2);border-radius:2px;overflow:hidden}
.cs-bar-fill{height:100%;width:0;border-radius:2px;background:linear-gradient(90deg,var(--accent),var(--accent2));animation:loadBar 2.5s ease-in-out infinite}
@keyframes loadBar{0%{width:0;margin-left:0}50%{width:60%}100%{width:0;margin-left:100%}}

/* ===== FAVORITES PAGE ===== */
#page-favorites{padding:24px}
.empty-state{text-align:center;padding:80px 20px;color:var(--text-muted)}
.empty-state .es-icon{font-size:64px;margin-bottom:16px;opacity:0.5}
.empty-state h3{font-family:'Rajdhani',sans-serif;font-size:24px;color:var(--text-dim);margin-bottom:8px}
.empty-state p{font-size:14px}

/* ===== TOAST ===== */
#toast-container{position:fixed;bottom:24px;right:24px;z-index:9999;display:flex;flex-direction:column;gap:8px}
.toast{background:var(--bg2);border:1px solid var(--border);border-radius:var(--radius-sm);padding:12px 18px;font-size:13px;color:var(--text);box-shadow:var(--shadow);animation:toastIn 0.3s ease;display:flex;align-items:center;gap:8px;max-width:300px}
.toast.success{border-color:var(--accent2)}
.toast.error{border-color:var(--danger)}
@keyframes toastIn{from{opacity:0;transform:translateX(20px)}to{opacity:1;transform:translateX(0)}}

/* ===== FOOTER ===== */
.page-footer{padding:24px;text-align:center;border-top:1px solid var(--border);margin-top:20px}
.footer-text{font-size:12px;color:var(--text-dim)}
.footer-logos{display:flex;justify-content:center;gap:12px;margin-top:12px}
.footer-logos img{width:32px;height:32px;border-radius:6px;cursor:pointer;transition:all 0.2s;opacity:0.7}
.footer-logos img:hover{opacity:1;transform:scale(1.1)}

/* ===== NAVBAR INFO WIDGET (time + battery) ===== */
#navbar-info{display:flex;flex-direction:column;align-items:flex-end;gap:1px;flex-shrink:0;padding:4px 10px;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius-sm);min-width:72px}
#info-time{font-family:'Rajdhani',sans-serif;font-weight:700;font-size:14px;color:var(--accent);letter-spacing:0.5px;line-height:1.2}
#info-battery{font-size:11px;color:var(--text-muted);line-height:1.2}

/* ===== CLICK EFFECTS ===== */
.click-particle{position:fixed;pointer-events:none;z-index:9999;border-radius:50%;animation:clickPop var(--dur,0.6s) ease-out forwards}
@keyframes clickPop{0%{opacity:1;transform:scale(1) translate(0,0)}100%{opacity:0;transform:scale(0) translate(var(--tx),var(--ty))}}
.click-ripple{position:fixed;pointer-events:none;z-index:9998;border-radius:50%;border:2px solid var(--accent);animation:rippleOut 0.5s ease-out forwards}
@keyframes rippleOut{0%{opacity:0.8;transform:scale(0)}100%{opacity:0;transform:scale(3)}}

/* ===== CARD THUMB IMAGE ===== */
.card-thumb-img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;transition:transform 0.4s ease}
.game-card:hover .card-thumb-img{transform:scale(1.05)}
.card-thumb-placeholder{font-size:48px;opacity:0.3;position:relative;z-index:1}
.card-thumb-placeholder.hidden{display:none}


/* ===== PROXY PAGE ===== */
#page-proxy{padding:24px}
.proxy-wrapper{max-width:1100px;margin:0 auto;display:flex;flex-direction:column;gap:0}
.proxy-header{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius) var(--radius) 0 0;padding:20px 20px 14px}
.proxy-title-row{display:flex;align-items:center;gap:14px;margin-bottom:14px}
.proxy-icon{font-size:28px}
.proxy-title{font-family:'Rajdhani',sans-serif;font-weight:700;font-size:22px;color:var(--text)}
.proxy-subtitle{font-size:12px;color:var(--text-muted)}
.proxy-badge{margin-left:auto;background:var(--accent);color:var(--bg);font-family:'Rajdhani',sans-serif;font-weight:700;font-size:11px;padding:3px 8px;border-radius:4px;letter-spacing:1px}
.proxy-bar-row{display:flex;align-items:center;gap:8px;margin-bottom:10px}
.proxy-url-bar{flex:1;display:flex;align-items:center;background:var(--bg2);border:1.5px solid var(--border);border-radius:999px;padding:0 6px 0 14px;transition:border-color 0.2s;overflow:hidden}
.proxy-url-bar:focus-within{border-color:var(--accent);box-shadow:0 0 0 3px color-mix(in srgb,var(--accent) 20%,transparent)}
.proxy-url-icon{font-size:14px;margin-right:8px;flex-shrink:0}
#proxy-input{flex:1;background:none;border:none;color:var(--text);font-family:'Exo 2',sans-serif;font-size:13px;outline:none;padding:8px 0}
#proxy-input::placeholder{color:var(--text-dim)}
.proxy-go-btn{background:var(--accent);color:var(--bg);border:none;border-radius:999px;padding:6px 18px;font-family:'Rajdhani',sans-serif;font-weight:700;font-size:13px;cursor:pointer;transition:all 0.2s;flex-shrink:0;margin:4px}
.proxy-go-btn:hover{filter:brightness(1.15)}
.proxy-btn{width:34px;height:34px;border-radius:var(--radius-sm);background:var(--surface2);border:1px solid var(--border);color:var(--text-muted);cursor:pointer;font-size:16px;display:flex;align-items:center;justify-content:center;transition:all 0.2s;flex-shrink:0}
.proxy-btn:hover{border-color:var(--accent);color:var(--accent)}
.proxy-quick-row{display:flex;align-items:center;gap:8px;flex-wrap:wrap}
.proxy-quick-label{font-size:11px;color:var(--text-dim);font-family:'Rajdhani',sans-serif;text-transform:uppercase;letter-spacing:1px;flex-shrink:0}
.proxy-quick-btn{background:var(--surface2);border:1px solid var(--border);color:var(--text-muted);border-radius:999px;padding:4px 12px;font-size:12px;font-family:'Rajdhani',sans-serif;font-weight:600;cursor:pointer;transition:all 0.2s;white-space:nowrap}
.proxy-quick-btn:hover{border-color:var(--accent);color:var(--accent)}
.proxy-frame-wrap{position:relative;background:var(--bg2);border:1px solid var(--border);border-top:none;border-radius:0 0 var(--radius) var(--radius);overflow:hidden;min-height:520px}
.proxy-placeholder{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center;min-height:520px}
.proxy-ph-icon{font-size:64px;margin-bottom:16px;opacity:0.5}
.proxy-ph-title{font-family:'Rajdhani',sans-serif;font-size:26px;font-weight:700;color:var(--text);margin-bottom:8px}
.proxy-ph-sub{font-size:14px;color:var(--text-muted);line-height:1.6;margin-bottom:16px}
.proxy-ph-note{font-size:12px;color:var(--accent);background:color-mix(in srgb,var(--accent) 10%,transparent);border:1px solid color-mix(in srgb,var(--accent) 30%,transparent);border-radius:var(--radius-sm);padding:8px 16px}
.proxy-iframe{width:100%;height:600px;border:none;display:block}

/* ===== NAVBAR TAB DRAG REORDER ===== */
.nav-tab.drag-over{border-color:transparent!important;background:transparent!important}
.nav-tab.dragging{opacity:1}

/* ===== WIDGET SETTINGS ===== */
.widget-preview{background:var(--bg2);border:1px solid var(--border);border-radius:var(--radius-sm);padding:10px 14px;display:flex;flex-direction:column;align-items:flex-end;gap:2px;margin-bottom:12px;min-width:90px;width:fit-content}
.widget-preview span{font-family:'Rajdhani',sans-serif;font-weight:700;font-size:14px;color:var(--accent)}
.widget-preview small{font-size:11px;color:var(--text-muted)}

/* ===== SCROLLBAR ===== */
::-webkit-scrollbar{width:6px;height:6px}
::-webkit-scrollbar-track{background:var(--bg)}
::-webkit-scrollbar-thumb{background:var(--border-strong);border-radius:3px}
::-webkit-scrollbar-thumb:hover{background:var(--accent)}

/* ===== ANIMATIONS ===== */
.fade-in{animation:fadeUp 0.4s ease both}
.card-grid>*{animation:fadeUp 0.4s ease both}
.card-grid>*:nth-child(1){animation-delay:0.02s}
.card-grid>*:nth-child(2){animation-delay:0.04s}
.card-grid>*:nth-child(3){animation-delay:0.06s}
.card-grid>*:nth-child(4){animation-delay:0.08s}
.card-grid>*:nth-child(5){animation-delay:0.1s}
.card-grid>*:nth-child(6){animation-delay:0.12s}
.card-grid>*:nth-child(n+7){animation-delay:0.14s}
.link-list>*{animation:fadeUp 0.3s ease both}

/* ===== MOBILE ===== */
@media (max-width:1024px){
#page-home{grid-template-columns:1fr;grid-template-rows:auto}
.home-left{flex-direction:row;flex-wrap:wrap}
.home-nav-btn{flex:1;min-width:140px}
.home-right{order:-1}
.changelog-panel{max-height:300px;overflow-y:auto}
}
@media (max-width:768px){
:root{--nav-h:100px}
#navbar-logo-text{display:none}
#navbar-top{padding:0 12px;gap:10px}
#navbar-tabs{padding:0 8px;gap:4px}
.nav-tab{padding:0 12px;font-size:12px;height:34px}
.card-grid{grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:10px;padding:16px}
#page-home{padding:12px}
.section-header{padding:16px 16px 0}
}
@media (max-width:480px){
:root{--nav-h:96px}
.nav-tab .tab-icon{display:none}
.nav-tab{padding:0 10px;font-size:11px;letter-spacing:0}
.card-grid{grid-template-columns:repeat(2,1fr);padding:12px}
.home-stats{grid-template-columns:repeat(3,1fr)}
.settings-grid{grid-template-columns:1fr}
#page-home{grid-template-columns:1fr!important}
}
</style>
</head>
<body class="theme-default">

<!-- Page transition handled via CSS fade -->

<canvas id="bgCanvas"></canvas>
<div class="bg-overlay" id="bgOverlay"></div>
<div id="toast-container"></div>

<!-- Context Menu -->
<div id="context-menu">
<div class="ctx-item" onclick="ctxAction('open')"><span class="ctx-icon"></span> Open Game</div>
<div class="ctx-item" onclick="ctxAction('open-blank')"><span class="ctx-icon"></span> Open in New Tab</div>
<div class="ctx-item" onclick="ctxAction('fav')"><span class="ctx-icon"></span> Toggle Favorite</div>
<div class="ctx-item" onclick="ctxAction('rate')"><span class="ctx-icon"></span> Rate This Game</div>
<div class="ctx-sep"></div>
<div class="ctx-item" onclick="ctxAction('copy')"><span class="ctx-icon"></span> Copy Link</div>
</div>

<!-- NAVBAR -->
<nav id="navbar">
<div id="navbar-top">
<a id="navbar-logo" onclick="navigate('home')">
<img src="https://nolangraysongames.com/Logo.png" alt="NGG Logo">
<span id="navbar-logo-text">NGG</span>
</a>
<div id="navbar-search">
<span id="search-icon">ğŸ”</span>
<input type="text" id="search" placeholder="Search games, sites..." autocomplete="off" oninput="handleSearch(this.value)" onfocus="showSearchHistory()">
<span id="search-clear" onclick="clearSearch()">Ã—</span>
</div>
<div id="navbar-info"><span id="info-time">--:--</span><span id="info-date" style="display:none;font-size:10px;color:var(--text-muted)"></span><span id="info-battery">ğŸ”‹--</span><span id="info-custom" style="display:none;font-size:10px;color:var(--text-muted)"></span></div>
</div>
<div id="navbar-tabs">
<button class="nav-tab" data-page="home" onclick="navigate('home')"><span class="tab-icon">ğŸ </span> Home</button>
<button class="nav-tab" data-page="games" onclick="navigate('games')"><span class="tab-icon">ğŸ®</span> Games</button>
<button class="nav-tab" data-page="websites" onclick="navigate('websites')"><span class="tab-icon">ğŸŒ</span> Websites</button>
<button class="nav-tab" data-page="eaglercraft" onclick="navigate('eaglercraft')"><span class="tab-icon">â›</span> Eaglercraft</button>
<button class="nav-tab" data-page="partnerships" onclick="navigate('partnerships')"><span class="tab-icon">ğŸ‘¥</span> Partnerships</button>
<button class="nav-tab" data-page="medieval" onclick="navigate('medieval')"><span class="tab-icon">âš”ï¸</span> Medieval</button>
<button class="nav-tab" data-page="ourlinks" onclick="navigate('ourlinks')"><span class="tab-icon">ğŸ•¹ï¸</span> Our Links</button>
<button class="nav-tab" data-page="proxy" onclick="navigate('proxy')"><span class="tab-icon">ğŸ”’</span> Proxy</button>
<button class="nav-tab" data-page="other" onclick="navigate('other')"><span class="tab-icon">ğŸ“¦</span> Other</button>
<button class="nav-tab" data-page="favorites" onclick="navigate('favorites')"><span class="tab-icon">â­</span> Favorites</button>
<button class="nav-tab" data-page="settings" onclick="navigate('settings')"><span class="tab-icon">âš™ï¸</span> Settings</button>
</div>
</nav>

<div id="search-results"></div>

<main id="main">

<!-- HOME PAGE -->
<div id="page-home" class="page">
<!-- Announcement Banner (home page only â€” edit ANNOUNCEMENT_MESSAGE in the JS to change) -->
<div id="announcement-banner">
<span id="announcement-text"></span>
<span id="banner-close" onclick="closeBanner()">âœ•</span>
</div>
<div class="home-hero">
<img class="hero-title" src="https://nolangraysongames.com/Title.png" alt="Nolan's and Grayson's Games">
<div class="home-hero-sub"> Fast Â· Simple Â· Browser-Based Gaming </div>
</div>
<div class="home-left">
<button class="home-nav-btn" onclick="navigate('games')"><span class="btn-icon"></span> ğŸ® Games</button>
<button class="home-nav-btn" onclick="navigate('websites')"><span class="btn-icon"></span> ğŸŒ Websites</button>
<button class="home-nav-btn" onclick="navigate('eaglercraft')"><span class="btn-icon"></span> â› Eaglercraft</button>
<div class="home-nav-divider"></div>
<button class="home-nav-btn" onclick="navigate('partnerships')"><span class="btn-icon"></span> ğŸ‘¥ Partnerships</button>
<button class="home-nav-btn" onclick="navigate('medieval')"><span class="btn-icon"></span> âš”ï¸ Medieval</button>
<button class="home-nav-btn" onclick="navigate('ourlinks')"><span class="btn-icon"></span> ğŸ•¹ï¸ Our Links</button>
<div class="home-nav-divider"></div>
<button class="home-nav-btn" onclick="navigate('favorites')"><span class="btn-icon"></span> â­ Favorites</button>
<button class="home-nav-btn" onclick="navigate('settings')"><span class="btn-icon"></span> âš™ï¸ Settings</button>
</div>
<div class="home-center">
<!-- Recently Played -->
<div class="home-recently">
<h3> Recently Played</h3>
<div class="recently-list" id="recently-list"></div>
</div>
<div class="home-featured">
<h3> Quick Access</h3>
<div class="featured-grid" id="featured-grid">
<a class="featured-card" href="Slope.html" target="_blank" onclick="trackPlay('Slope','','Slope.html')"><div class="fc-icon"></div><div class="fc-name">Slope</div></a>
<a class="featured-card" href="Cookie Clicker.html" target="_blank" onclick="trackPlay('Cookie Clicker','','Cookie Clicker.html')"><div class="fc-icon"></div><div class="fc-name">Cookie Clicker</div></a>
<a class="featured-card" href="DOOM.html" target="_blank" onclick="trackPlay('DOOM','','DOOM.html')"><div class="fc-icon"></div><div class="fc-name">DOOM</div></a>
<a class="featured-card" href="Geometry Dash Lite.html" target="_blank" onclick="trackPlay('Geometry Dash','','Geometry Dash Lite.html')"><div class="fc-icon"></div><div class="fc-name">Geometry Dash</div></a>
<a class="featured-card" href="ULTRAKILL.html" target="_blank" onclick="trackPlay('ULTRAKILL','','ULTRAKILL.html')"><div class="fc-icon"></div><div class="fc-name">ULTRAKILL</div></a>
<a class="featured-card" href="Hollow Knight.html" target="_blank" onclick="trackPlay('Hollow Knight','','Hollow Knight.html')"><div class="fc-icon"></div><div class="fc-name">Hollow Knight</div></a>
<a class="featured-card" href="Smash Karts.html" target="_blank" onclick="trackPlay('Smash Karts','','Smash Karts.html')"><div class="fc-icon"></div><div class="fc-name">Smash Karts</div></a>
<a class="featured-card" href="1v1LoL.html" target="_blank" onclick="trackPlay('1v1.lol','','1v1LoL.html')"><div class="fc-icon"></div><div class="fc-name">1v1.lol</div></a>
</div>
</div>
<div class="home-stats">
<div class="stat-card"><div class="stat-num" id="stat-games">0</div><div class="stat-label">Games</div></div>
<div class="stat-card"><div class="stat-num" id="stat-sites">0</div><div class="stat-label">Sites</div></div>
<div class="stat-card"><div class="stat-num" id="stat-views">â€”</div><div class="stat-label">Your Visits</div></div>
</div>
</div>
<div class="home-right">
<div class="changelog-panel" id="changelog-panel">
<h3>ğŸ“‹ Changelog</h3>
<div id="changelog-list"></div>
</div>
</div>
<div style="grid-column:1/-1">
<div class="page-footer">
<div class="footer-text"> FAST â€¢ SIMPLE â€¢ BROWSER-BASED GAMING </div>
<div class="footer-logos">
<img src="https://www.nolangraysongames.com/Logo.png" alt="NGG" title="NGG Discord" onclick="window.open('https://discord.gg/nNCWgRJZ7v','_blank')">
</div>
</div>
</div>
</div>

<!-- GAMES PAGE -->
<div id="page-games" class="page">
<div class="section-header">
<div class="section-title"> Games <span id="games-count"></span></div>
</div>
<div class="filter-bar" id="games-filter-bar">
<button class="filter-btn active" data-filter="all" onclick="filterGames('all',this)">All</button>
<button class="filter-btn" data-filter="action" onclick="filterGames('action',this)"> Action</button>
<button class="filter-btn" data-filter="racing" onclick="filterGames('racing',this)"> Racing</button>
<button class="filter-btn" data-filter="puzzle" onclick="filterGames('puzzle',this)"> Puzzle</button>
<button class="filter-btn" data-filter="horror" onclick="filterGames('horror',this)"> Horror</button>
<button class="filter-btn" data-filter="idle" onclick="filterGames('idle',this)"> Idle</button>
<button class="filter-btn" data-filter="shooter" onclick="filterGames('shooter',this)"> Shooter</button>
<button class="filter-btn" data-filter="platformer" onclick="filterGames('platformer',this)"> Platformer</button>
<button class="filter-btn" data-filter="sport" onclick="filterGames('sport',this)"> Sports</button>
<button class="filter-btn" data-filter="played" onclick="filterGames('played',this)"> Played</button>
<button class="filter-btn" data-filter="rated" onclick="filterGames('rated',this)"> Rated</button>
<select class="filter-sort" id="games-sort" onchange="sortGames(this.value)">
<option value="default">Sort: Default</option>
<option value="alpha">Sort: Aâ€“Z</option>
<option value="rating">Sort: Top Rated</option>
<option value="recent">Sort: Recently Played</option>
</select>
</div>
<div class="card-grid" id="games-grid"></div>
<div class="page-footer"><div class="footer-text">Click a game to play Â· to favorite Â· to rate Â· Right-click for more</div></div>
</div>

<!-- WEBSITES PAGE -->
<div id="page-websites" class="page">
<div class="section-header">
<div class="section-title"> Websites <span id="websites-count"></span></div>
</div>
<div class="card-grid" id="websites-grid"></div>
<div class="page-footer"><div class="footer-text">Recommended Â· Blocked Â· Discord</div></div>
</div>

<!-- EAGLERCRAFT PAGE -->
<div id="page-eaglercraft" class="page">
<div class="section-header"><div class="section-title"> Eaglercraft</div></div>
<div class="card-grid" id="eaglercraft-grid"></div>
</div>

<!-- PARTNERSHIPS PAGE -->
<div id="page-partnerships" class="page">
<div class="section-header"><div class="section-title"> Our Partnerships</div></div>
<div class="card-grid" id="partnerships-grid"></div>
</div>

<!-- MEDIEVAL PAGE -->
<div id="page-medieval" class="page">
<div class="section-header"><div class="section-title"> Medieval Chronicles Links</div></div>
<div class="card-grid" id="medieval-grid"></div>
</div>

<!-- OUR LINKS PAGE -->
<div id="page-ourlinks" class="page">
<div class="section-header"><div class="section-title"> Our Links</div></div>
<div class="card-grid" id="ourlinks-grid"></div>
</div>

<!-- PROXY PAGE -->
<div id="page-proxy" class="page">
<div class="proxy-wrapper">
  <div class="proxy-header">
    <div class="proxy-title-row">
      <span class="proxy-icon">ğŸ”’</span>
      <div>
        <div class="proxy-title">NGG Proxy</div>
        <div class="proxy-subtitle">Enter a URL to browse privately</div>
      </div>
      <div class="proxy-badge">BETA</div>
    </div>
    <div class="proxy-bar-row">
      <div class="proxy-url-bar">
        <span class="proxy-url-icon">ğŸŒ</span>
        <input type="text" id="proxy-input" placeholder="https://example.com" autocomplete="off" onkeydown="if(event.key==='Enter')loadProxy()">
        <button class="proxy-go-btn" onclick="loadProxy()">Go</button>
      </div>
      <button class="proxy-btn" onclick="proxyNavBack()" title="Back">â—€</button>
      <button class="proxy-btn" onclick="proxyNavRefresh()" title="Refresh">â†»</button>
      <button class="proxy-btn" onclick="proxyOpenBlank()" title="Open in about:blank">â¬¡</button>
    </div>
    <div class="proxy-quick-row" id="proxy-quick-sites">
      <span class="proxy-quick-label">Quick:</span>
      <button class="proxy-quick-btn" onclick="proxyLoad('https://67-blue.vercel.app/api/proxy?url=' + encodeURIComponent('https://www.google.com'))">ğŸ” Google</button>
      <button class="proxy-quick-btn" onclick="proxyLoad('https://67-blue.vercel.app/api/proxy?url=' + encodeURIComponent('https://www.wikipedia.org'))">ğŸ“– Wikipedia</button>
      <button class="proxy-quick-btn" onclick="proxyLoad('https://67-blue.vercel.app/api/proxy?url=' + encodeURIComponent('https://scratch.mit.edu'))">ğŸ± Scratch</button>
      <button class="proxy-quick-btn" onclick="proxyLoad('https://67-blue.vercel.app/api/proxy?url=' + encodeURIComponent('https://www.coolmathgames.com'))">ğŸ§® CoolMath</button>
    </div>
  </div>
  <div class="proxy-frame-wrap" id="proxy-frame-wrap">
    <div class="proxy-placeholder" id="proxy-placeholder">
      <div class="proxy-ph-icon">ğŸ”’</div>
      <div class="proxy-ph-title">Ready to Browse</div>
      <div class="proxy-ph-sub">Enter a URL above or pick a quick site to get started.<br>Note: some sites block iframe embedding.</div>
      <div class="proxy-ph-note">âš ï¸ Proxy functionality coming soon â€” this is a preview shell.</div>
    </div>
    <iframe id="proxy-frame" class="proxy-iframe" sandbox="allow-scripts allow-same-origin allow-forms allow-popups" style="display:none"></iframe>
  </div>
</div>
</div>

<!-- OTHER PAGE -->
<div id="page-other" class="page">
<div class="section-header"><div class="section-title"> Other</div></div>
<div class="card-grid" id="other-grid"></div>
</div>

<!-- FAVORITES PAGE -->
<div id="page-favorites" class="page">
<div class="section-header"><div class="section-title"> Favorites</div></div>
<div id="favorites-content"></div>
</div>

<!-- SETTINGS PAGE -->
<div id="page-settings" class="page">
<div class="section-header"><div class="section-title"> Settings</div></div>
<div class="settings-grid">
<div class="settings-card">
<h3> Theme</h3>
<div class="theme-grid" id="theme-grid">
<div class="theme-chip active" style="background:linear-gradient(135deg,#0a0a0f,#1a1a2e);border-color:#7c5cfc;color:#e2e8f0" onclick="setTheme('theme-default')" data-theme="theme-default">ğŸŒŒ Default</div>
<div class="theme-chip" style="background:linear-gradient(135deg,#050510,#0a0a1a);color:#39ff14" onclick="setTheme('theme-neon')" data-theme="theme-neon">âš¡ Neon</div>
<div class="theme-chip" style="background:linear-gradient(135deg,#020617,#050c23);color:#818cf8" onclick="setTheme('theme-midnight')" data-theme="theme-midnight">ğŸŒ™ Midnight</div>
<div class="theme-chip" style="background:linear-gradient(135deg,#1a0a0a,#2a1010);color:#ff6b6b" onclick="setTheme('theme-sunset')" data-theme="theme-sunset">ğŸŒ… Sunset</div>
<div class="theme-chip" style="background:linear-gradient(135deg,#020d1a,#041524);color:#05bfdb" onclick="setTheme('theme-ocean')" data-theme="theme-ocean">ğŸŒŠ Ocean</div>
<div class="theme-chip" style="background:linear-gradient(135deg,#020f02,#041804);color:#6fb98f" onclick="setTheme('theme-forest')" data-theme="theme-forest">ğŸŒ² Forest</div>
<div class="theme-chip" style="background:linear-gradient(135deg,#1a0520,#2a0a35);color:#ff64c8" onclick="setTheme('theme-candy')" data-theme="theme-candy">ğŸ­ Candy</div>
<div class="theme-chip" style="background:linear-gradient(135deg,#100500,#2a0f00);color:#ff5000" onclick="setTheme('theme-lava')" data-theme="theme-lava">ğŸŒ‹ Lava</div>
<div class="theme-chip" style="background:linear-gradient(135deg,#020a14,#04111f);color:#b4e6ff" onclick="setTheme('theme-arctic')" data-theme="theme-arctic">â„ï¸ Arctic</div>
<div class="theme-chip" style="background:linear-gradient(135deg,#0f0a00,#1a1200);color:#ffc800" onclick="setTheme('theme-gold')" data-theme="theme-gold">ğŸ‘‘ Gold</div>
<div class="theme-chip" style="background:linear-gradient(135deg,#030d00,#061500);color:#64ff00" onclick="setTheme('theme-toxic')" data-theme="theme-toxic">â˜¢ï¸ Toxic</div>
<div class="theme-chip" style="background:linear-gradient(135deg,#0d0000,#1a0000);color:#cc0000" onclick="setTheme('theme-blood')" data-theme="theme-blood">ğŸ©¸ Blood</div>
</div>
</div>
<div class="settings-card">
<h3> Background Effect</h3>
<div class="bg-grid" id="bg-grid">
<div class="bg-chip active" onclick="setBgEffect('stars')" data-bg="stars"><span class="bc-icon">âœ¦</span>Stars</div>
<div class="bg-chip" onclick="setBgEffect('matrix')" data-bg="matrix"><span class="bc-icon">â¬›</span>Matrix</div>
<div class="bg-chip" onclick="setBgEffect('geometric')" data-bg="geometric"><span class="bc-icon">â—‡</span>Geometric</div>
<div class="bg-chip" onclick="setBgEffect('particles')" data-bg="particles"><span class="bc-icon">Â·</span>Particles</div>
<div class="bg-chip" onclick="setBgEffect('nebula')" data-bg="nebula"><span class="bc-icon">ğŸŒŒ</span>Nebula</div>
<div class="bg-chip" onclick="setBgEffect('rain')" data-bg="rain"><span class="bc-icon">ğŸŒ§</span>Rain</div>
<div class="bg-chip" onclick="setBgEffect('aurora')" data-bg="aurora"><span class="bc-icon">ğŸŒˆ</span>Aurora</div>
<div class="bg-chip" onclick="setBgEffect('vortex')" data-bg="vortex"><span class="bc-icon">ğŸŒ€</span>Vortex</div>
<div class="bg-chip" onclick="setBgEffect('fire')" data-bg="fire"><span class="bc-icon">ğŸ”¥</span>Fire</div>
<div class="bg-chip" onclick="setBgEffect('none')" data-bg="none"><span class="bc-icon">âœ•</span>None</div>
</div>

</div>

<div class="settings-card">
<h3>âœ¨ Click Effects</h3>
<div class="setting-row" style="margin-bottom:12px">
<div><div class="setting-label">Enable Click Effects</div><div class="setting-desc">Visual effects when clicking anywhere</div></div>
<label class="s-toggle"><input type="checkbox" id="click-effects-toggle" onchange="toggleClickEffects(this.checked)"><span class="s-toggle-track"></span></label>
</div>
<div class="bg-grid" id="click-effect-grid">
<div class="bg-chip" onclick="setClickEffectStyle('particles')" data-ce="particles"><span class="bc-icon">ğŸ’¥</span>Particles</div>
<div class="bg-chip" onclick="setClickEffectStyle('ripple')" data-ce="ripple"><span class="bc-icon">ğŸŒŠ</span>Ripple</div>
<div class="bg-chip" onclick="setClickEffectStyle('both')" data-ce="both"><span class="bc-icon">âœ¨</span>Both</div>
<div class="bg-chip" onclick="setClickEffectStyle('sparks')" data-ce="sparks"><span class="bc-icon">âš¡</span>Sparks</div>
<div class="bg-chip" onclick="setClickEffectStyle('confetti')" data-ce="confetti"><span class="bc-icon">ğŸ‰</span>Confetti</div>
<div class="bg-chip" onclick="setClickEffectStyle('stars')" data-ce="stars"><span class="bc-icon">â­</span>Stars</div>
</div>
</div>

<div class="settings-card">
<h3>ğŸ• Navbar Widget</h3>
<div class="setting-desc" style="margin-bottom:10px;font-size:12px;color:var(--text-muted)">Pick up to <strong style="color:var(--accent)">2 items</strong> to show in the navbar widget.</div>
<div class="setting-row">
<div><div class="setting-label">Show Time</div></div>
<label class="s-toggle"><input type="checkbox" id="widget-time-toggle" checked onchange="saveWidgetSettings('widget-time-toggle')"><span class="s-toggle-track"></span></label>
</div>
<div class="setting-row">
<div><div class="setting-label">Show Date</div></div>
<label class="s-toggle"><input type="checkbox" id="widget-date-toggle" onchange="saveWidgetSettings('widget-date-toggle')"><span class="s-toggle-track"></span></label>
</div>
<div class="setting-row" id="widget-batt-row">
<div><div class="setting-label">Show Battery <span id="widget-batt-lock-icon" style="display:none;font-size:12px;color:var(--text-dim)">ğŸ”’</span></div><div class="setting-desc" id="widget-batt-desc"></div></div>
<label class="s-toggle"><input type="checkbox" id="widget-batt-toggle" onchange="handleBattToggle(this)"><span class="s-toggle-track"></span></label>
</div>
<div class="setting-row">
<div><div class="setting-label">Custom Label</div><div class="setting-desc">Optional text shown below time</div></div>
<label class="s-toggle"><input type="checkbox" id="widget-custom-toggle" onchange="saveWidgetSettings('widget-custom-toggle')"><span class="s-toggle-track"></span></label>
</div>
<div class="setting-row" id="widget-custom-row" style="display:none">
<input type="text" id="widget-custom-input" class="s-select" style="width:100%;max-width:200px" placeholder="e.g. Study Mode ğŸ“š" oninput="saveWidgetSettings()" maxlength="24">
</div>
<div class="setting-row">
<div><div class="setting-label">Hide Widget Entirely</div></div>
<label class="s-toggle"><input type="checkbox" id="widget-hide-toggle" onchange="saveWidgetSettings('widget-hide-toggle')"><span class="s-toggle-track"></span></label>
</div>
</div>

<div class="settings-card">
<h3>ğŸ—‚ï¸ Tab Order</h3>
<div class="setting-desc" style="margin-bottom:12px;font-size:12px;color:var(--text-muted)">Drag tabs to reorder. Home and Settings are always pinned.</div>
<div id="tab-order-list" style="display:flex;flex-direction:column;gap:6px"></div>
<div style="display:flex;gap:8px;margin-top:12px">
<button class="s-btn" onclick="resetTabOrder()">â†º Reset Order</button>
</div>
</div>

<div class="settings-card">
<h3>âš¡ Performance</h3>
<div class="setting-row">
<div><div class="setting-label">Performance Mode</div><div class="setting-desc">Disable animations, background & effects</div></div>
<label class="s-toggle"><input type="checkbox" id="perf-toggle" onchange="togglePerfMode(this.checked)"><span class="s-toggle-track"></span></label>
</div>
<div class="setting-row">
<div><div class="setting-label">Auto-Perf on Slow Page</div><div class="setting-desc">Detect lag and auto-enable performance mode</div></div>
<label class="s-toggle"><input type="checkbox" id="auto-perf-toggle" onchange="toggleAutoPerf(this.checked)"><span class="s-toggle-track"></span></label>
</div>
<div class="setting-row">
<div><div class="setting-label">Pause When Tab Hidden</div><div class="setting-desc">Auto performance mode when you leave tab</div></div>
<label class="s-toggle"><input type="checkbox" id="tab-perf-toggle" onchange="toggleTabPerf(this.checked)"><span class="s-toggle-track"></span></label>
</div>
<div class="setting-row">
<div class="setting-label">Open in About:Blank</div>
<button class="s-btn" onclick="openAboutBlank()">Open</button>
</div>
<div class="setting-row">
<div class="setting-label">Open as Blob URL</div>
<button class="s-btn" onclick="openBlob()">Open</button>
</div>
</div>
<div class="settings-card">
<h3> Inactivity Refresh</h3>
<div class="setting-row">
<div class="setting-label">Auto-Refresh After</div>
<select class="s-select" id="inactivity-select" onchange="saveInactivity(this.value)">
<option value="30000">30 seconds</option>
<option value="60000">1 minute</option>
<option value="120000" selected>2 minutes</option>
<option value="180000">3 minutes</option>
<option value="300000">5 minutes</option>
<option value="off">Off</option>
</select>
</div>
<div class="setting-row">
<div class="setting-label">Refresh Now</div>
<button class="s-btn" onclick="location.reload()">Refresh</button>
</div>
</div>
<div class="settings-card">
<h3> Data Management</h3>
<div class="setting-row">
<div class="setting-label">Export Data</div>
<button class="s-btn" onclick="exportData()"> Export</button>
</div>
<div class="setting-row">
<div class="setting-label">Import Data</div>
<button class="s-btn" onclick="document.getElementById('import-file').click()"> Import</button>
<input type="file" id="import-file" accept=".json" style="display:none" onchange="importData(this)">
</div>
<div class="setting-row">
<div class="setting-label">Clear Recently Played</div>
<button class="s-btn danger" onclick="clearRecentlyPlayed()"> Clear</button>
</div>
<div class="setting-row">
<div class="setting-label">Clear Ratings</div>
<button class="s-btn danger" onclick="clearRatings()"> Clear</button>
</div>
<div class="setting-row">
<div class="setting-label">Clear Favorites</div>
<button class="s-btn danger" onclick="clearFavorites()"> Clear</button>
</div>
<div class="setting-row">
<div class="setting-label">Reset All Data</div>
<button class="s-btn danger" onclick="clearAllData()"> Reset</button>
</div>
</div>
<div class="settings-card">
<h3>â„¹ About</h3>
<div class="setting-row"><div class="setting-label">Version</div><div style="color:var(--accent);font-weight:600">1.7.6</div></div>
<div class="setting-row"><div class="setting-label">Owner</div><div style="color:var(--text-muted)">Nolan Boyer</div></div>
<div class="setting-row"><div class="setting-label">Last Updated</div><div style="color:var(--text-muted)">02/23/25</div></div>
<div class="setting-row"><div class="setting-label">Hosted On</div><div style="color:var(--text-muted)">Github</div></div>
<div style="margin-top:12px">
<a href="https://github.com/NolanBetter/nolanbetter.github.io" target="_blank" class="s-btn" style="display:inline-block;text-decoration:none"> Fork on GitHub</a>
</div>
</div>
</div>
</div>

</main>

<script>
// ============================================================
// CHANGELOG CONFIG â€” Edit entries here, HTML auto-generates
// ============================================================
// badge options: 'new', 'fix', 'update'  (or '' for none)
const CHANGELOG = [
  {
    version: '1.7.6',
    badge: 'new',
    date: '02/20/26',
    entries: [
      'added some more links',
      'Made some Eaglercraft versions use nolan and grayson games rather then another site',
      'bug fixes',
    ]
  },
  {
    version: '1.7.0',
    badge: 'update',
    date: '02/18/26',
    entries: [
      'Recently played tracker with timestamps',
      '5-star game rating system',
      'Smooth page fade transitions',
      'Animated number counters on stats',
      'Search history with quick-replay tags',
      'Filter bar on Games page',
      'Announcement banner (code-only)',
      'Right-click context menu on cards',
      'Site-style cards for all link pages',
    ]
  },
  {
    version: '1.6.0',
    badge: 'update',
    date: '02/17/26',
    entries: [
      'Full site redesign with multi-page navigation',
      'Interactive background effects',
      'Game & website card grid view',
      'Import / Export data feature',
    ]
  },
];

// ============================================================
// DATA
// ============================================================
const GAMES = [
{ name:"Bad Parenting 1",href:"Bad Parenting 1.html",img:"https://cdn.jsdelivr.net/gh/gn-math/covers@main/166.png",tags:["action"] },
{ name:"Baldi's Basics Plus",href:"Baldi's Basics Plus.html",img:"https://cdn.jsdelivr.net/gh/gn-math/covers@main/467.png",tags:["horror"] },
{ name:"Bendy and the Ink Machine",href:"Bendy and the Ink Machine.html",img:"https://cdn.jsdelivr.net/gh/gn-math/covers@main/215.png",tags:["horror"] },
{ name:"Buckshot Roulette",href:"Buckshot Roulette.html",img:"https://cdn.jsdelivr.net/gh/gn-math/covers@main/205.png",tags:["horror"] },
{ name:"Celeste",href:"Celeste.html",img:"https://cdn.jsdelivr.net/gh/gn-math/covers@main/623.png",tags:["platformer"] },
{ name:"Cuphead",href:"Cuphead.html",img:"https://cdn.jsdelivr.net/gh/gn-math/covers@main/465.png",tags:["action","platformer"] },
{ name:"Five Nights at Epsteins",href:"Five Nights at Epsteins.html",img:"https://cdn.jsdelivr.net/gh/gn-math/covers@main/710.png",tags:["horror"] },
{ name:"Five Nights at Freddy's Pizza Simulator",href:"Five Nights at Freddy's_ Pizza Simulator.html",img:"",tags:["horror"] },
{ name:"Five Nights at Freddy's Sister Location",href:"Five Nights at Freddy's_ Sister Location.html",img:"",tags:["horror"] },
{ name:"Half Life",href:"Half Life.html",img:"",tags:["shooter","action"] },
{ name:"Hollow Knight",href:"Hollow Knight.html",img:"",tags:["platformer","action"] },
{ name:"Hotline Miami",href:"Hotline Miami.html",img:"",tags:["action","shooter"] },
{ name:"Jelly Drift",href:"Jelly Drift.html",img:"",tags:["racing"] },
{ name:"Karlson",href:"Karlson.html",img:"",tags:["shooter","platformer"] },
{ name:"Kindergarten",href:"Kindergarten.html",img:"",tags:["puzzle"] },
{ name:"Kindergarten 2",href:"Kindergarten 2.html",img:"",tags:["puzzle"] },
{ name:"OMORI",href:"OMORI.html",img:"",tags:["puzzle"] },
{ name:"Oneshot (LEGACY)",href:"Oneshot (LEGACY).html",img:"",tags:["puzzle"] },
{ name:"People Playground",href:"People Playground.html",img:"",tags:["action"] },
{ name:"Pizza Tower",href:"Pizza Tower.html",img:"",tags:["platformer","action"] },
{ name:"Quake III Arena",href:"Quake III Arena.html",img:"",tags:["shooter"] },
{ name:"R.E.P.O",href:"REPO.html",img:"",tags:["horror"] },
{ name:"Tattletail",href:"Tattletail.html",img:"",tags:["horror"] },
{ name:"Schoolboy Runaway",href:"Schoolboy Runaway.html",img:"",tags:["action","platformer"] },
{ name:"Slime Rancher",href:"Slime Rancher.html",img:"",tags:["action","idle"] },
{ name:"Soundboard",href:"Soundboard.html",img:"",tags:[] },
{ name:"That's Not My Neighbor",href:"That's Not My Neighbor.html",img:"",tags:["horror","puzzle"] },
{ name:"ULTRAKILL",href:"ULTRAKILL.html",img:"",tags:["shooter","action"] },
{ name:"WebFishing",href:"WebFishing.html",img:"",tags:["idle"] },
{ name:"Yume Nikki",href:"Yume Nikki.html",img:"",tags:["puzzle"] },
{ name:"1v1.lol",href:"1v1LoL.html",img:"",tags:["shooter"] },
{ name:"2048",href:"2048.html",img:"",tags:["puzzle"] },
{ name:"2048 Merge Run",href:"2048 Merge Run.html",img:"",tags:["puzzle","platformer"] },
{ name:"8 Ball Pool",href:"8 Ball Pool.html",img:"",tags:["sport"] },
{ name:"A Bite at Freddy's",href:"A Bite at Freddy's.html",img:"",tags:["horror"] },
{ name:"Abandoned",href:"Abandoned.html",img:"",tags:["horror"] },
{ name:"Achievement Unlocked",href:"Achievement Unlocked.html",img:"",tags:["puzzle"] },
{ name:"Achievement Unlocked 2",href:"Achievement Unlocked 2.html",img:"",tags:["puzzle"] },
{ name:"Achievement Unlocked 3",href:"Achievement Unlocked 3.html",img:"",tags:["puzzle"] },
{ name:"Adventure Capitalist",href:"Adventure Capatalist.html",img:"",tags:["idle"] },
{ name:"Ages of Conflict",href:"Ages of Conflict.html",img:"",tags:["action"] },
{ name:"Angry Birds",href:"Angry Birds.html",img:"",tags:["puzzle"] },
{ name:"Angry Birds Chrome",href:"Angry Birds Chrome.html",img:"",tags:["puzzle"] },
{ name:"Awesome Tanks",href:"Awesome Tanks.html",img:"",tags:["shooter","action"] },
{ name:"Awesome Tanks 2",href:"Awesome Tanks 2.html",img:"",tags:["shooter","action"] },
{ name:"Backrooms",href:"Backrooms.html",img:"",tags:["horror"] },
{ name:"Bad Ice Cream",href:"Bad Ice Cream.html",img:"",tags:["puzzle","action"] },
{ name:"Bad Ice Cream 2",href:"Bad Ice Cream 2.html",img:"",tags:["puzzle","action"] },
{ name:"Bad Ice Cream 3",href:"Bad Ice Cream 3.html",img:"",tags:["puzzle","action"] },
{ name:"Basket Random",href:"Basket Random.html",img:"",tags:["sport"] },
{ name:"Basketball Stars",href:"Basketball Stars.html",img:"",tags:["sport"] },
{ name:"Big Tower Tiny Square",href:"Big Tower Tiny Square.html",img:"",tags:["platformer"] },
{ name:"Big Tower Tiny Square 2",href:"Big Tower Tiny Square 2.html",img:"",tags:["platformer"] },
{ name:"BitLife",href:"BitLife.html",img:"",tags:["idle"] },
{ name:"BitPlanes",href:"BitPlanes.html",img:"",tags:["action"] },
{ name:"Block Blast",href:"Block Blast.html",img:"",tags:["puzzle"] },
{ name:"BlockPost",href:"BlockPost.html",img:"",tags:["shooter"] },
{ name:"Bob The Robber 2",href:"Bob The Robber 2.html",img:"",tags:["action","puzzle"] },
{ name:"Boxing Random",href:"Boxing Random.html",img:"",tags:["sport","action"] },
{ name:"Brawl Guys.io",href:"Brawl Guysio.html",img:"",tags:["action"] },
{ name:"CircloO",href:"CircloO.html",img:"",tags:["puzzle"] },
{ name:"CircloO 2",href:"CircloO 2.html",img:"",tags:["puzzle"] },
{ name:"Cluster Rush",href:"Cluster Rush.html",img:"",tags:["platformer","action"] },
{ name:"Cookie Clicker",href:"Cookie Clicker.html",img:"",tags:["idle"] },
{ name:"Crazy Cars",href:"Crazy Cars.html",img:"",tags:["racing"] },
{ name:"Crossy Road",href:"Crossy Road.html",img:"",tags:["action"] },
{ name:"Cut the Rope",href:"Cut the Rope.html",img:"",tags:["puzzle"] },
{ name:"Doom",href:"DOOM.html",img:"",tags:["shooter","action"] },
{ name:"Doom 2",href:"Doom 2.html",img:"",tags:["shooter","action"] },
{ name:"Doom 3",href:"Doom 3.html",img:"",tags:["shooter","action"] },
{ name:"Drift Boss",href:"Drift Boss.html",img:"",tags:["racing"] },
{ name:"Draw Joust",href:"Draw Joust.html",img:"",tags:["action","puzzle"] },
{ name:"Drift Hunters",href:"Drift Hunters.html",img:"",tags:["racing"] },
{ name:"Duck Life",href:"Duck Life.html",img:"",tags:["sport","action"] },
{ name:"Duck Life 2",href:"Duck Life 2.html",img:"",tags:["sport","action"] },
{ name:"Duck Life 3",href:"Duck Life 3.html",img:"",tags:["sport","action"] },
{ name:"Duck Life 4",href:"Duck Life 4.html",img:"",tags:["sport","action"] },
{ name:"Duck Life 5",href:"Duck Life 5.html",img:"",tags:["sport","action"] },
{ name:"Geometry Dash Lite",href:"Geometry Dash Lite.html",img:"",tags:["platformer","action"] },
{ name:"Google Feud",href:"Google Feud.html",img:"",tags:["puzzle"] },
{ name:"Jetpack Joyride",href:"Jetpack Joyride.html",img:"",tags:["action","platformer"] },
{ name:"Learn to Fly",href:"Learn to Fly.html",img:"",tags:["action","idle"] },
{ name:"Learn to Fly 2",href:"Learn to Fly 2.html",img:"",tags:["action","idle"] },
{ name:"Learn to Fly 3",href:"Learn to Fly 3.html",img:"",tags:["action","idle"] },
{ name:"Learn to Fly Idle",href:"Learn to Fly Idle.html",img:"",tags:["idle"] },
{ name:"Line Rider",href:"Line Rider.html",img:"",tags:["puzzle"] },
{ name:"Melon Playground",href:"Melon Playground.html",img:"",tags:["action"] },
{ name:"Moto X3M",href:"Moto X3M.html",img:"",tags:["racing","action"] },
{ name:"OvO",href:"OvO.html",img:"",tags:["platformer","action"] },
{ name:"Pixel Gun Survival",href:"Pixel Gun Survival.html",img:"",tags:["shooter"] },
{ name:"Poly Track",href:"Poly Track.html",img:"",tags:["racing"] },
{ name:"Rooftop Snipers",href:"Rooftop Snipers.html",img:"",tags:["shooter","action"] },
{ name:"Rooftop Snipers 2",href:"Rooftop Snipers 2.html",img:"",tags:["shooter","action"] },
{ name:"Run",href:"Run 1.html",img:"",tags:["platformer","action"] },
{ name:"Sandboxels",href:"Sandboxels.html",img:"",tags:["puzzle","idle"] },
{ name:"Sandtris",href:"Sandtris.html",img:"",tags:["puzzle"] },
{ name:"Slope",href:"Slope.html",img:"",tags:["action","racing"] },
{ name:"Slope 2",href:"Slope 2.html",img:"",tags:["action","racing"] },
{ name:"Slowroads",href:"Slowroads.html",img:"",tags:["racing","idle"] },
{ name:"Smash Karts",href:"Smash Karts.html",img:"",tags:["racing","action"] },
{ name:"Stone Grass Mowing Simulator",href:"Stone Grass Mowing Simulator.html",img:"",tags:["idle"] },
{ name:"Temple Run 2",href:"Temple Run 2.html",img:"",tags:["action"] },
{ name:"The World's Hardest Game",href:"The World's Hardest Game.html",img:"",tags:["puzzle","action"] },
{ name:"World Box",href:"World Box.html",img:"",tags:["idle","puzzle"] },
{ name:"Crazy Cattle 3D",href:"Crazy Cattle 3D.html",img:"",tags:["action"] },
{ name:"Crazy Chicken 3D",href:"Crazy Chicken 3D.html",img:"",tags:["action"] },
{ name:"Crazy Kitty 3D",href:"Crazy Kitty 3D.html",img:"",tags:["action"] },
{ name:"Fortzone Battle Royale",href:"Fortzone Battle Royale.html",img:"",tags:["shooter","action"] },
{ name:"Getting Over It with Bennett Foddy",href:"Getting Over It with Bennett Foddy.html",img:"",tags:["platformer","action"] },
{ name:"Google Baseball",href:"Google Baseball.html",img:"",tags:["sport"] },
{ name:"Going Balls",href:"Going Balls.html",img:"",tags:["action"] },
{ name:"Gorilla Tag",href:"Gorilla Tag.html",img:"",tags:["action"] },
{ name:"Harvest.io",href:"Harvestio.html",img:"",tags:["idle","action"] },
{ name:"Madalin Stunt Cars 2",href:"Madalin Stunt Cars 2.html",img:"",tags:["racing"] },
{ name:"Madalin Stunt Cars 3",href:"Madalin Stunt Cars 3.html",img:"",tags:["racing"] },
{ name:"Maze Speedrun",href:"Maze Speedrun.html",img:"",tags:["puzzle","action"] },
{ name:"Moto X3M 2",href:"Moto X3M 2.html",img:"",tags:["racing","action"] },
{ name:"Moto X3M 3",href:"Moto X3M 3.html",img:"",tags:["racing","action"] },
{ name:"Moto X3M Pool Party",href:"Moto X3M Pool Party.html",img:"",tags:["racing","action"] },
{ name:"Moto X3M Spooky",href:"Moto X3M Spooky.html",img:"",tags:["racing","action","horror"] },
{ name:"Moto X3M Winter",href:"Moto X3M Winter.html",img:"",tags:["racing","action"] },
{ name:"OvO 2",href:"OvO 2.html",img:"",tags:["platformer","action"] },
{ name:"OvO 3 Dimensions",href:"OvO 3 Dimensions.html",img:"",tags:["platformer","action"] },
{ name:"Ping Pong",href:"pingpong.html",img:"",tags:["sport"] },
{ name:"HTML About:Blank Launcher",href:"aboutblank.html",img:"",tags:[] },
{ name:"Neon Rush 3D",href:"neonrush.html",img:"",tags:["racing","action"] },
{ name:"Gravity Shift",href:"gravityshift.html",img:"",tags:["platformer","puzzle"] },
{ name:"Ethereal Barrage",href:"etherealbarrage.html",img:"",tags:["shooter","action"] },
{ name:"Realm of Echoes",href:"realmofechoes.html",img:"",tags:["action","platformer"] }
];

const WEBSITES = [
{ name:"Helios Browser #1",href:"https://helios-browser.vercel.app/?sca_esv=91bd149827a5c7e1&ie=ISO-8859-1&q=duck+the+dick+layer&oq=&aqs=",cls:"" },
{ name:"Helios Browser #2",href:"https://helios-main-4-16277712.codehs.me/",cls:"" },
{ name:"Helios Browser #3",href:"https://secret-14830781.codehs.me/",cls:"" },
{ name:"Helios Browser #4",href:"https://helios-main-1-16003298.codehs.me/",cls:"" },
{ name:"Helios Browser #5",href:"https://helios-main-8-16277735.codehs.me/",cls:"" },
{ name:"Helios Browser #6",href:"https://helios-main-1-17218349.codehs.me/index.html",cls:"" },
{ name:"Helios Browser #7",href:"https://helios-main-2-17218409.codehs.me/index.html",cls:"" },
{ name:"Helios Browser #8",href:"https://helios-main-3-17218419.codehs.me/index.html",cls:"" },
{ name:"Helios Browser #9",href:"https://helios-main-4-17218430.codehs.me/index.html",cls:"" },
{ name:"Helios Browser #10",href:"https://helios-main-5-17218433.codehs.me/index.html",cls:"" },
{ name:"Math Help",href:"https://math-help-10477068.codehs.me/proxies.html",cls:"pageb" },
{ name:"Falcon Hub",href:"https://falcon-hub-2-14106850.codehs.me/",cls:"blocked" },
{ name:"Cool Web Browser",href:"https://web-13738023.codehs.me/",cls:"pageb" },
{ name:"gn-whoknows",href:"https://new-sandbox-program-8-16195494.codehs.me/",cls:"" },
{ name:"Gamers Corner",href:"https://gamerscorner.codehs.me/",cls:"pageb" },
{ name:"Sigma Drift",href:"https://sigma-drift2-14009523.codehs.me/",cls:"pageb" },
{ name:"Max D Games",href:"https://html-6835466.codehs.me/games.html",cls:"pageb" },
{ name:"Wise Educational tools",href:"https://wise-educational-tools-10184503.codehs.me/games.html",cls:"pageb" },
{ name:"Epic math games",href:"https://epicmathgames-11368087.codehs.me/",cls:"" },
{ name:"Blox Games",href:"https://html-2-11096731.codehs.me/",cls:"pageb" },
{ name:"Fern #1",href:"https://s3.amazonaws.com/fernisbest/index.html",cls:"" },
{ name:"Fun Games",href:"https://useful-websites-11384316.codehs.me/fun-games-page.html",cls:"pageb" },
{ name:"Unblocked Web #1",href:"https://unlocked-14104483.codehs.me/links.html#",cls:"pageb" },
{ name:"Greeni's Unblocked Games",href:"https://looker-drive-15229361.codehs.me/index.html",cls:"pageb" },
{ name:"Talon Games",href:"https://talongames-15869241.codehs.me/projects",cls:"" },
{ name:"Otto's Site",href:"https://superdupercool.codehs.me/",cls:"pageb" },
{ name:"Untitled 2.0",href:"https://untitledsite2point02.codehs.me/",cls:"" },
{ name:"Private Server",href:"https://private-server-v6-maybe-16143815.codehs.me/",cls:"pageb" },
{ name:"Hyper Unblocker",href:"https://hype-13705391.codehs.me/",cls:"" },
{ name:"Gaming Zone",href:"https://gamesite-2-9809323.codehs.me/game.html",cls:"" },
{ name:"Galactic",href:"https://superhardalgebra.codehs.me/",cls:"blocked" },
{ name:"Nexus #1",href:"https://nexus2-15144648.codehs.me/",cls:"blocked" },
{ name:"Nexus #2",href:"https://nexus-1-16525472.codehs.me/",cls:"blocked" },
{ name:"Nexus #3",href:"https://html-2-16716466.codehs.me/",cls:"blocked" },
{ name:"TalonOS",href:"https://nexusos-15319152.codehs.me/",cls:"" },
{ name:"Elite Games",href:"https://eliteforever-15439918.codehs.me/index.html",cls:"" },
{ name:"Green Juce",href:"https://green-juce-15899531.codehs.me/",cls:"blocked" },
{ name:"toaster",href:"https://funny-cheese-toaster-16543182.codehs.me/",cls:"pageb" },
{ name:"Story Network",href:"https://story-network-math-16177875.codehs.me/",cls:"pageb" },
{ name:"Classlink",href:"https://76776-16256340.codehs.me/",cls:"" },
{ name:"YN-dayton",href:"https://yn-dayton-16219146.codehs.me/",cls:"" },
{ name:"Unknown",href:"https://html-14358861.codehs.me/Games/gameindex.html",cls:"" },
{ name:"Unknown #2",href:"https://html-14358861.codehs.me/index.html",cls:"" },
{ name:"Jacobpedia Games unblocker",href:"https://jacobpediacodehsme-11898672.codehs.me/Jacobpedia-games-unblocker.html",cls:"pageb" },
{ name:"Login",href:"https://new-sandbox-program-6-6497977.codehs.me/",cls:"pageb" },
{ name:"Google Classroom",href:"https://valuabletime-8462876.codehs.me/edutool.html",cls:"pageb" },
{ name:"Quiz Math 10",href:"https://quiz-math-10.us/",cls:"" },
{ name:"Web #1",href:"https://www.toplocaltours.com/",cls:"" },
{ name:"Web #2",href:"https://www.candofinance.com/",cls:"" },
{ name:"Smash karts",href:"https://smslearning.codehs.me/",cls:"" },
{ name:"Oregon Trail Game",href:"https://oregontrail.ws/games/the-oregon-trail-deluxe/play/",cls:"" },
{ name:"Subway Surfers",href:"https://warehouse.galaxydve.com/content/5078462/bin/index.html",cls:"" },
{ name:"Zebawl",href:"https://s3-eu-west-1.amazonaws.com/apps.playcanvas.com/xMpnwMbu/index.html",cls:"" },
{ name:"Orbital Survival",href:"https://s3-eu-west-1.amazonaws.com/apps.playcanvas.com/aOZ5lcoo/index.html",cls:"" },
{ name:"Squishy Earth",href:"https://www.byronknoll.com/earth.html",cls:"" },
{ name:"Fire 3D Shooter",href:"https://3d-shooter-15153456.com",cls:"pageb" },
{ name:"Error",href:"https://mhsdevildogs-12321908.codehs.me/",cls:"" },
{ name:"Xer Unblocked Hub",href:"https://star-13979722.codehs.me/",cls:"" },
{ name:"Tiny Fishing",href:"https://new-sandbox-program-11-14372996.codehs.me/index.html",cls:"" },
{ name:"Play Spent",href:"https://playspent.org/",cls:"" },
{ name:"Srihan Forehead Massive",href:"https://eshaanis-16824004.codehs.me/",cls:"" },
{ name:"Bored Of Class",href:"https://bored-of-class-16692634.codehs.me/",cls:"" },
{ name:"Phani's Cool House",href:"https://phanis-cool-house-16638329.codehs.me/",cls:"" },
{ name:"Skadoosh's Hub",href:"https://rizzabh-games-16509919.codehs.me/",cls:"" },
{ name:"eChalk",href:"https://www.echalk.co.uk/amusements/Games/games.html",cls:"" },
{ name:"Unblocked Websites",href:"https://unblocked-websites-main-17218379.codehs.me/index.html",cls:"" },
{ name:"gn-math #1",href:"https://eclipzeunbgs.codehs.me",cls:"" },
{ name:"gn-math #2",href:"https://cool-2-15870625.codehs.me/",cls:"" },
{ name:"gn-math #3",href:"https://gn-mathgithubio-main-17215986.codehs.me/index.html",cls:"" },
{ name:"gn-math #4",href:"https://gn-mathgithubio-main-1-17216084.codehs.me/index.html",cls:"" },
{ name:"gn-math #5",href:"https://gn-mathgithubio-main-2-17218440.codehs.me/index.html",cls:"" },
{ name:"gn-math #6",href:"https://gn-mathgithubio-main-3-17236945.codehs.me/index.html",cls:"" },
{ name:"gn-math #7",href:"https://gn-mathgithubio-main-4-17236964.codehs.me/index.html",cls:"" },
{ name:"gn-math #8",href:"https://gn-mathgithubio-main-5-17236997.codehs.me/index.html",cls:"" },
{ name:"gn-math #9",href:"https://gn-mathgithubio-main-6-17237020.codehs.me/index.html",cls:"" },
{ name:"gn-math #10",href:"https://gn-mathgithubio-main-7-17237044.codehs.me/index.html",cls:"" },
{ name:"Encoder/Decoder",href:"https://new-sandbox-program-82-17205112.codehs.me/index.html",cls:"" },
{ name:"Data URL Converter",href:"https://new-sandbox-program-83-17227451.codehs.me/index.html",cls:"" },
{ name:"Doge",href:"https://dogeub-sooty.vercel.app/",cls:"" },
{ name:"Utopia #1",href:"https://course.how.laurengillett.com/",cls:"" },
{ name:"Utopia #2",href:"https://study.info.scallex.net/",cls:"" },
{ name:"DayDream X",href:"https://yuru.haifu.ipv64.net/",cls:"" },
{ name:"Jordan's Math Work",href:"https://stateexams.statetestingstudies.com/",cls:"" },
{ name:"Hideout",href:"https://hideout-now.lovable.app/",cls:"" },
{ name:"Lunar",href:"https://tnx.0x0a.ru/",cls:"" },
{ name:"galaxy",href:"https://galaxyv6.freetls.fastly.net/",cls:"" },
{ name:"Horizon Hub",href:"https://horizon-wearesoback.my.canva.site/hub",cls:"" },
{ name:"Endis #1",href:"https://instructure.com.bizzbooks.co.za/",cls:"" },
{ name:"Vapor #1",href:"https://lesson-plans2.vapor.my.cdn.cloudflare.net",cls:"" },
{ name:"Vapor #2",href:"https://lesson-plans3.vapor.my.cdn.cloudflare.net",cls:"" },
{ name:"TR OS",href:"https://learns-the-ways-of-aryan.netlify.app/",cls:"" },
{ name:"NettleWeb #1",href:"https://nike.global.ssl.fastly.net/",cls:"" },
{ name:"NettleWeb #2",href:"https://nettleweb.freetls.fastly.net/",cls:"" },
{ name:"NettleWeb #3",href:"https://nike.freetls.fastly.net",cls:"" },
{ name:"Duck #1",href:"https://edu.freetls.fastly.net/",cls:"" },
{ name:"Duck #2",href:"https://duck-math.global.ssl.fastly.net",cls:"" },
{ name:"Void #1",href:"https://classslink.comsjfjdj.taskavonad.com/",cls:"" },
{ name:"Void #2",href:"https://voidnetwork.seminaire-school.v6.rocks/",cls:"" },
{ name:"Vault",href:"https://vault.global.ssl.fastly.net/home/",cls:"" },
{ name:"Endis #2",href:"https://aj.freetls.fastly.net/",cls:"" },
{ name:"Vortex #1",href:"https://vortexos.net.cdn.cloudflare.net/login",cls:"" },
{ name:"Vortex #2",href:"https://vtx.chat.cdn.cloudflare.net/",cls:"" },
{ name:"Vortex #3",href:"https://vtx-cdn.edu-cdn.workers.dev/",cls:"" },
{ name:"Fern #2",href:"https://fern.global.ssl.fastly.net/",cls:"" },
{ name:"Fern #3",href:"https://fern.freetls.fastly.net/",cls:"" },
{ name:"Endis #3",href:"https://2i4b3tzs.webauth.win.cdn.cloudflare.net/",cls:"" },
{ name:"Endis #4",href:"https://2cool.ajh.academy.cdn.cloudflare.net/",cls:"" },
{ name:"Endis #5",href:"https://045wwgoi.webauth.win.cdn.cloudflare.net/",cls:"" },
{ name:"Selenite",href:"https://apstats.eminescusm.ro/",cls:"" },
{ name:"Minecraft 1.8",href:"https://media.kpcompass.com/embeds/c56b1f1e15fe667c724ca6c9c21bdd904b8ccc478395e126f140c4f1e2eedb63.html",cls:"" },
{ name:"Retro Bowl",href:"https://objectstorage.us-ashburn-1.oraclecloud.com/n/idzgyfi7awwr/b/bucket-20231001-1518-rb1.0/o/index.html",cls:"" },
{ name:"Super Mario Bros",href:"https://games.newstargeted.com/FullScreenMario/",cls:"" },
{ name:"Mars Unblocked Games",href:"https://new.express.adobe.com/webpage/7pKXYnkZbfSaO",cls:"" },
{ name:"Math Games",href:"https://teks.mathgames.com/arcade",cls:"" },
{ name:"Air Mash",href:"https://altar.azureedge.net/",cls:"" },
{ name:"Hextris",href:"https://www.nddb.coop/ccnddb/games/Hexagon%20Twist/",cls:"" },
{ name:"Semantris",href:"https://research.google.com/semantris/",cls:"" },
{ name:"Lander",href:"https://ehmorris.com/lander/",cls:"" },
{ name:"Stickman Fighting Game",href:"https://script.google.com/macros/s/AKfycbwAoTmRTzE6ydvLBsbUcwDvlzS36xbr263_ttMmz8pBgmf0ih3RHJNeYFe3-evGMeMF/exec",cls:"" },
{ name:"Games from creators of Photopea",href:"https://www.photopea.com/games/",cls:"" },
{ name:"Swooop",href:"https://s3-eu-west-1.amazonaws.com/apps.playcanvas.com/R2axJfsc/index.html",cls:"" },
{ name:"Dungeon Fury",href:"https://s3-eu-west-1.amazonaws.com/apps.playcanvas.com/LDm4dGNm/index.html",cls:"" },
{ name:"multiplayer golf",href:"https://multiplayer.golf/",cls:"" },
{ name:"Marbleous",href:"https://s3-eu-west-1.amazonaws.com/apps.playcanvas.com/HEoGi1Mb/index.html",cls:"" },
{ name:"Flappy Bird",href:"https://s3-eu-west-1.amazonaws.com/apps.playcanvas.com/TAhlQLDa/index.html",cls:"" },
{ name:"Montblanc Explorer Platinum",href:"https://therace.montblancexplorer.com/en-nl",cls:"" },
{ name:"geography-test-20.live",href:"https://geography-test-20.live/#google_vignette",cls:"" },
{ name:"Temu Smashkarts",href:"https://script.google.com/macros/s/AKfycbxQuqMuGYqOJSyYwUL5vYn1E3xCTjM7DAQZnhnKyYVmhH_2mNQS7INnwJkwr7l7T9GC/exec",cls:"" },
{ name:"Cookie Click",href:"https://a6936-19424025.cluster7.canvas-user-content.com/courses/6936~1014013/files/6936~19424025/course%20files/cookie%20clicker/index.html?context_id=6936~1014013&context_type=CourseDownload=1&id=69360000019424025&inline=1",cls:"" },
{ name:"Tiletopia",href:"https://6nilllqpgkm6o.h5games.usercontent.goog/v/7d3689i7s5gfo/",cls:"" },
{ name:"Atom Clicker",href:"https://atom-clicker.ayfri.com/",cls:"" },
{ name:"3D Tuning",href:"https://www.3dtuning.com/en-US/",cls:"" },
{ name:"Euphoria #1",href:"http://ez-ub.anjumanallana.in/",cls:"" },
{ name:"Euphoria #2",href:"http://gov.eminescusm.ro/",cls:"" },
{ name:"Study.com (Roblox)",href:"https://securly.com.mtomtech.co.kr/",cls:"pageb" },
{ name:"Roblox",href:"https://rblx-7918337.codehs.me/",cls:"pageb" }
];

const PARTNERSHIPS = [
{ name:"Squall Proxy Link #1",href:"https://asdfgrefddgv.chickenkiller.com",cls:"" },
{ name:"Squall Proxy Link #2",href:"https://squall.cc",cls:"" },
{ name:"Squall Proxy Link #3",href:"https://ixl.learnmath.cfd",cls:"" },
{ name:"Squall Proxy Link #4",href:"https://best.learnmath.cfd",cls:"" },
{ name:"Squall Proxy Link #5",href:"https://iready.learnmath.cfd",cls:"" },
{ name:"Squall Proxy Link #6",href:"https://learn.learnmath.cfd/",cls:"" },
{ name:"KamZone Arcade (Google Site)",href:"https://sites.google.com/view/itsbig/home",cls:"" },
{ name:"KamZone Arcade link #1",href:"https://new-sandbox-program-20-18034129.codehs.me/index.html",cls:"" },
{ name:"KamZone Arcade link #2",href:"https://new-sandbox-program-19-18034111.codehs.me/index.html",cls:"" },
{ name:"KamZone Arcade link #3",href:"https://pub-ac397c96ae2647d4a45221e91f4ce5dd.r2.dev/kzWLsjRZDQ.html",cls:"" },
{ name:"KamZone Arcade link #4",href:"https://18035447-s.codehs.io/index.html",cls:"" },
{ name:"G.GUI Project",href:"https://jfkmemorialschools.bitbucket.io/",cls:"" },
{ name:"G.GUI Project",href:"https://biosciences-0080f9.gitlab.io/",cls:"" },
{ name:"G.GUI Project",href:"https://ggui-classroom-87d930.gitlab.io/",cls:"" },
{ name:"G.GUI Project",href:"https://highlycapapbleeducation.w3spaces.com/",cls:"" },
{ name:"G.GUI Project",href:"https://tri-city-math--extreem.replit.app/",cls:"" },
{ name:"G.GUI Project",href:"https://lmartinschool.vercel.app/",cls:"" },
{ name:"bestspark687090 games",href:"https://bestspark.onrender.com/",cls:"" },
{ name:"bestspark687090 games",href:"https://bestspark.vercel.app/",cls:"" },
{ name:"bestspark687090 games",href:"https://bestspark.pages.dev/",cls:"" },
{ name:"bestspark687090 games",href:"https://bestspark.netlify.app/",cls:"" },
{ name:"bestspark687090 games",href:"https://bestspark.replit.app/",cls:"" },
{ name:"Galaxydevs's Hangout",href:"https://sites.google.com/view/gdevs-hangout",cls:"" }
];

const EAGLERCRAFT = [
{ name:"Eaglercraft Indev",href:"Eaglercraft Indev.html",cls:"" },
{ name:"Eaglercraft Beta 1.2.6",href:"Eaglercraft Alpha 126.html",cls:"" },
{ name:"Eaglercraft Beta 1.3",href:"Eaglercraft Beta 13.html",cls:"" },
{ name:"Eaglercraft Beta 1.7.3",href:"Eaglercraft Beta 173.html",cls:"" },
{ name:"Eaglercraft 1.5.2",href:"Eaglercraft 152.html",cls:"" },
{ name:"EaglercraftX 1.8",href:"Eaglercraft 188.html",cls:"" },
{ name:"EaglercraftL 1.9.4",href:"Eaglercraft 194.html",cls:"" },
{ name:"EaglercraftX 1.11.2",href:"Eaglercraft 1112.html",cls:"" },
{ name:"EaglercraftX 1.12.2",href:"Eaglercraft 1122.html",cls:"" },
{ name:"EaglercraftX 1.20.1",href:"Eaglercraft 1201.html",cls:"" },
{ name:"EaglercraftL 1.21.4",href:"https://new-sandbox-program-39-16834383.codehs.me/index.html",cls:"" },
{ name:"Eaglerforge 1.8.8",href:"Eaglerforge 188.html",cls:"" },
{ name:"EaglerRinth",href:"https://eaglerrinth.github.io/index.html",cls:"" },
{ name:"DragonXLite 1.8.8",href:"DragonXLite.html",cls:"" },
{ name:"Zeta Client 1.11.2",href:"Zeta Client.html",cls:"" },
{ name:"Eclix",href:"https://eaglercrafthub.github.io/index.html",cls:"" },
{ name:"Ampler Launcher",href:"https://irv77.github.io/AmplerLauncher/",cls:"" }
];
/*https://github.com/JustLachin/eaglerforge/blob/main/index.html*/
const OURLINKS = [
{ name:"Official Portal #1",href:"https://www.nolangraysongames.com/",cls:"" },
{ name:"Official Portal #2",href:"https://nolansandgraysonsgames.w3spaces.com/index.html",cls:"" },
{ name:"Official Portal #3",href:"https://nolanbetter.github.io/",cls:"" },
{ name:"Official Portal #4",href:"https://nolanbetter-github-io.vercel.app/",cls:"" },
{ name:"Official Portal #5",href:"https://mathisfun-lilac.vercel.app/",cls:"" },
{ name:"Official Portal #6",href:"https://clevercom-iota.vercel.app/",cls:"" },
{ name:"Official Proxy #1",href:"https://www.nolansproxy.com/",cls:"" },
{ name:"Official Proxy #2",href:"https://nolansproxygithubio.vercel.app/",cls:"" },
{ name:"Official Proxy #3",href:"https://toolsforlearning.vercel.app/",cls:"" }
];

const MEDIEVAL = [
{ name:"Medieval Chronicles' Discord",href:"https://discord.gg/sfkPgsE2Fb",cls:"discord" },
{ name:"Medieval Chronicles' Google Doc",href:"https://docs.google.com/document/d/1jl3FJtYW4jrLHuhoh9lRbpVeY2Vsd07pyh-JqNcgIAg/edit?tab=t.0",cls:"" },
{ name:"Medieval Chronicles' Tiktok",href:"https://www.tiktok.com/@historicalbutler",cls:"" },
...Array.from({length:5},(_,i)=>({name:"Imp Games",href:`https://hi${i?i:''}.raisingpro.com`,cls:""})),
...Array.from({length:5},(_,i)=>({name:"Imp Games",href:`https://sir${i?i:''}.raisingpro.com`,cls:""})),
...Array.from({length:5},(_,i)=>({name:"Imp Games",href:`https://mouse${i?i:''}.shitteacher.com`,cls:""})),
...Array.from({length:5},(_,i)=>({name:"Imp Games",href:`https://worldy${i?i:''}.shitteacher.com`,cls:""})),
...Array.from({length:5},(_,i)=>({name:"Imp Games",href:`https://water${i?i:''}.hjshop.net`,cls:""})),
{ name:"Infamous",href:"http://d4kiiihr.Ploteando.com",cls:"" },
{ name:"Infamous",href:"http://aq6ndb89.Ploteando.com",cls:"" },
{ name:"Infamous",href:"http://5ztbtxdd.Ploteando.com",cls:"" },
{ name:"Infamous",href:"http://stsx78b6.Ploteando.com",cls:"" },
{ name:"Infamous",href:"http://ngjk9xti.Ploteando.com",cls:"" },
{ name:"Truffled",href:"https://edu.waterloomath.com/",cls:"" },
{ name:"Truffled",href:"http://info.stoke-park.co.uk/",cls:"" },
{ name:"Quasar",href:"https://newcovumc.org/",cls:"" },
{ name:"ROSIN",href:"https://education.4e4a.org/",cls:"" },
{ name:"Fern",href:"https://canvasbackpackstore.com/",cls:"" },
...["mrge.global.ssl.fastly.net","mr-ge.global.ssl.fastly.net","mr-ge-laoshi.global.ssl.fastly.net","mrge-laoshi.global.ssl.fastly.net","mister-ge.global.ssl.fastly.net","Misterge.global.ssl.fastly.net","Mister-ge-Lao-shi.global.ssl.fastly.net","Mister-gelao-shi.global.ssl.fastly.net","Mister-gelaoshi.global.ssl.fastly.net","MisterGe-laoshi.global.ssl.fastly.net","Mistergelao-shi.global.ssl.fastly.net","Mr-gelaoshi.global.ssl.fastly.net","mrgelaoshi.global.ssl.fastly.net","mrgelao-shi.global.ssl.fastly.net","mr-gelao-shi.global.ssl.fastly.net","Mr-Ge-Is-So-COOL.global.ssl.fastly.net","MrGeIsSoCool.global.ssl.fastly.net","We-Love-Mr-Ge.global.ssl.fastly.net","WeLoveMrGe.global.ssl.fastly.net","Mr-Ge-Tuff.global.ssl.fastly.net"].map(d=>({name:"Medieval Chronicles Link",href:`https://${d}`,cls:""})),
{ name:"Medieval Chronicles Link",href:"https://play1.coolmathgames.eu.org.cdn.cloudflare.net/",cls:"" },
{ name:"Medieval Chronicles Link",href:"https://info.videnom.com/",cls:"" },
{ name:"Medieval Chronicles Link",href:"https://moneynow.cc/",cls:"" },
{ name:"Medieval Chronicles Link",href:"https://info.quiz-me.org/",cls:"" },
{ name:"Medieval Chronicles Link",href:"https://homeworkhelp.cc/",cls:"" },
{ name:"Medieval Chronicles Link",href:"https://businessschool.cc/",cls:"" },
{ name:"Medieval Chronicles Link",href:"https://bigmoney.cc/",cls:"" },
{ name:"Medieval Chronicles Link",href:"https://velara.turbo-education.com/",cls:"" },
{ name:"Medieval Chronicles Link",href:"https://contentkeeperplzspeed.turbo-education.com/",cls:"" },
{ name:"Medieval Chronicles Link",href:"https://veryhardenglishproblems.weebly.com/",cls:"" },
{ name:"Medieval Chronicles Link",href:"https://overcloaked.okay.lat/",cls:"" },
{ name:"Medieval Chronicles Link",href:"https://clever.com.hal.se/",cls:"" },
{ name:"Medieval Chronicles Link",href:"https://authors.odoobooks.com/",cls:"" },
{ name:"Medieval Chronicles Link",href:"https://key-98476.firebaseapp.com/",cls:"" },
{ name:"Medieval Chronicles Link",href:"https://unpkg.com/valoq-math-work@1.0.17/index.html",cls:"" },
{ name:"Medieval Chronicles Link",href:"https://infamous-scram-test.firebaseapp.com/",cls:"" },
{ name:"Medieval Chronicles Link",href:"https://sciencehistoryovertime.firebaseapp.com/",cls:"" },
{ name:"Medieval Chronicles Link",href:"https://jimlovesyou.cencopro.cl/",cls:"" },
{ name:"Medieval Chronicles Link",href:"https://jimhatesyou.cencopro.cl/",cls:"" },
{ name:"Medieval Chronicles Link",href:"https://jimscat.firebaseapp.com/",cls:"" },
{ name:"Medieval Chronicles Link",href:"https://node.ubg.lat",cls:"" },
{ name:"Medieval Chronicles Link",href:"https://panel.ubg.lat",cls:"" },
{ name:"Medieval Chronicles Link",href:"https://duck.classroomcommunity.com",cls:"" },
{ name:"Medieval Chronicles Link",href:"https://duck.classroom-community.com",cls:"" },
{ name:"Medieval Chronicles Link",href:"https://classroom.community",cls:"" },
{ name:"Medieval Chronicles Link",href:"https://gamesforpi.com",cls:"" },
{ name:"Medieval Chronicles Link",href:"https://duck.gameacademy.ro",cls:"" },
{ name:"Medieval Chronicles Link",href:"https://edysgames.com",cls:"" },
{ name:"Medieval Chronicles Link",href:"https://friv-2023.com",cls:"" },
{ name:"Medieval Chronicles Link",href:"https://duck.freezenova.ai",cls:"" },
{ name:"Medieval Chronicles Link",href:"https://gametube.io",cls:"" },
{ name:"Medieval Chronicles Link",href:"https://freegames.onl",cls:"" },
{ name:"Medieval Chronicles Link",href:"https://duck.freezenova.chat",cls:"" },
{ name:"Medieval Chronicles Link",href:"https://duck.forcez.io",cls:"" },
{ name:"Medieval Chronicles Link",href:"https://duckmath.games",cls:"" },
{ name:"Medieval Chronicles Link",href:"https://duckmathgames.com",cls:"" },
{ name:"Medieval Chronicles Link",href:"https://mathlessons.b-cdn.net",cls:"" },
{ name:"Medieval Chronicles Link",href:"https://math.study.cadou.ro.cdn.cloudflare.net",cls:"" },
{ name:"Medieval Chronicles Link",href:"https://math.classroom.onl.cdn.cloudflare.net",cls:"" },
{ name:"Medieval Chronicles Link",href:"https://94.16.31.161.nip.io/",cls:"" },
{ name:"Medieval Chronicles Link",href:"https://splash.rhw.one/",cls:"" },
{ name:"Medieval Chronicles Link",href:"https://splash.best/",cls:"" },
{ name:"Medieval Chronicles Link",href:"https://calm-nougat-8de690.netlify.app",cls:"" }
];

const OTHER = [
{ name:"Rules",href:"https://drive.google.com/file/d/1nidsUc8iekU_k7Myid8rveo9-cUK0g0h/view?usp=drive_open",cls:"" },
{ name:"Report Form",href:"https://forms.gle/cJcDpLaSAm1NNVsR8",cls:"" },
{ name:"Summary Of The Rules",href:"https://drive.google.com/file/d/1tYhAuR_AHav3PDdVl0CYvyrqd-3iEM1j/view",cls:"" },
{ name:"Beta Page",href:"test.html",cls:"" },
{ name:"Fork On Github",href:"https://github.com/NolanBetter/nolanbetter.github.io",cls:"" },
{ name:"Official Link",href:"https://www.nolangraysongames.com/",cls:"" },
{ name:"Discord",href:"https://discord.gg/nNCWgRJZ7v",cls:"discord" }
];

// ============================================================
// STATE
// ============================================================
let favorites = JSON.parse(localStorage.getItem('ngg_favs') || '[]');
let ratings = JSON.parse(localStorage.getItem('ngg_ratings') || '{}');
let recentlyPlayed = JSON.parse(localStorage.getItem('ngg_recent') || '[]');
let searchHistory = JSON.parse(localStorage.getItem('ngg_search_hist') || '[]');
let currentPage = localStorage.getItem('ngg_page') || 'home';
let currentTheme = localStorage.getItem('ngg_theme') || 'theme-default';
let currentBg = localStorage.getItem('ngg_bg') || 'stars';
let isPerfMode = localStorage.getItem('ngg_perf') === 'true';
let inactivityTimer = null;
let inactivityLimit = parseInt(localStorage.getItem('ngg_inactivity') || '120000');
let inactivityEnabled = localStorage.getItem('ngg_inactivity') !== 'off';
let currentFilter = 'all';
let currentSort = 'default';
let ctxTarget = null;

// ============================================================
// INIT
// ============================================================
document.addEventListener('DOMContentLoaded', () => {
applyTheme(currentTheme, false);
if (isPerfMode) applyPerfMode(true);
buildAllPages();
buildChangelog();
navigate(currentPage, false);
initBg(currentBg);
resizeCanvas();
requestAnimationFrame(monitorFPS);
setTimeout(() => { fpsReady = true; fpsLast = performance.now(); fpsFrames = 0; }, 5000);
updateVisitorCount();
loadSettings();
startInactivity();
checkOfficialSite();
initAnnouncement();
initContextMenu();
animateStats();
renderRecentlyPlayed();
updateNavbarInfo();
applyTabOrder();
buildTabOrderList();
loadWidgetSettings();
});

// ============================================================
// ANNOUNCEMENT BANNER â€” edit the message here in the code
// ============================================================
// â†“â†“â†“ CHANGE THIS LINE TO UPDATE THE ANNOUNCEMENT â†“â†“â†“
const ANNOUNCEMENT_MESSAGE = 'Join Our Discord at dsc.gg/nggs!';
// â†‘â†‘â†‘ Set to empty string "" to hide the banner entirely â†‘â†‘â†‘

function initAnnouncement() {
const bannerEl = document.getElementById('announcement-banner');
if (!ANNOUNCEMENT_MESSAGE || ANNOUNCEMENT_MESSAGE.trim() === '') return;
document.getElementById('announcement-text').textContent = ANNOUNCEMENT_MESSAGE;
bannerEl.classList.add('visible');
}
function closeBanner() {
document.getElementById('announcement-banner').classList.remove('visible');
}

// ============================================================
// PAGE TRANSITION
// ============================================================
// ============================================================
// PAGE NAVIGATION
// ============================================================

function navigate(page, save = true) {
document.querySelectorAll('.page').forEach(p => { p.classList.remove('active'); p.style.display=''; });
document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
const pageEl = document.getElementById('page-' + page);
if (pageEl) pageEl.classList.add('active');
const tabEl = document.querySelector(`[data-page="${page}"]`);
if (tabEl) tabEl.classList.add('active');
currentPage = page;
if (save) localStorage.setItem('ngg_page', page);
window.scrollTo(0, 0);
clearSearch();
}

// ============================================================
// ANIMATED NUMBER COUNTER
// ============================================================
function animateCount(el, target, duration = 800) {
const start = 0;
const startTime = performance.now();
const update = (now) => {
const elapsed = now - startTime;
const progress = Math.min(elapsed / duration, 1);
const ease = 1 - Math.pow(1 - progress, 3);
el.textContent = Math.round(start + (target - start) * ease).toLocaleString();
if (progress < 1) requestAnimationFrame(update);
};
requestAnimationFrame(update);
}
function animateStats() {
setTimeout(() => {
const gEl = document.getElementById('stat-games');
const sEl = document.getElementById('stat-sites');
if (gEl) animateCount(gEl, GAMES.length);
if (sEl) animateCount(sEl, WEBSITES.length);
}, 400);
}

// ============================================================
// BUILD PAGES
// ============================================================
function buildAllPages() {
buildGames();
buildWebsites();
buildSiteCards('eaglercraft-grid', EAGLERCRAFT);
buildSiteCards('partnerships-grid', PARTNERSHIPS);
buildSiteCards('medieval-grid', MEDIEVAL);
buildSiteCards('ourlinks-grid', OURLINKS);
buildSiteCards('other-grid', OTHER);
renderFavorites();
document.getElementById('games-count').innerHTML = `<span>${GAMES.length}</span>`;
document.getElementById('websites-count').innerHTML = `<span>${WEBSITES.length}</span>`;
}

// Helper: get favicon for any url
function getFavicon(href) {
try { return `https://www.google.com/s2/favicons?domain=${new URL(href).hostname}&sz=32`; } catch(e){ return ''; }
}
function getDomain(href) {
try { return new URL(href).hostname; } catch(e){ return href; }
}

// Build site-style card grid for link sections
function buildSiteCards(containerId, data) {
const grid = document.getElementById(containerId);
if (!grid) return;
grid.innerHTML = '';
data.forEach((item, i) => {
const id = 'link:' + item.href;
const isFav = favorites.includes(id);
const domain = getDomain(item.href);
const faviconUrl = getFavicon(item.href);
const card = document.createElement('a');
card.className = 'site-card';
card.href = item.href;
card.target = '_blank';
card.dataset.id = id;
card.dataset.name = item.name;
card.dataset.href = item.href;
card.style.setProperty('--i', i);
const cls = item.cls || '';
card.innerHTML = `
<div class="site-preview">
<div class="site-preview-bg"></div>
<img class="site-favicon" src="${faviconUrl}" alt="${domain}" onerror="this.style.display='none'">
<div class="site-domain">${domain}</div>
<span class="site-fav ${isFav?'active':''}" onclick="toggleFav(event,'${id.replace(/'/g,"\'")}',this)"></span>
</div>
<div class="site-info">
<div class="site-name ${cls}">${item.name}</div>
</div>`;
card.addEventListener('contextmenu', e => showContextMenu(e, { name: item.name, href: item.href, id, type: 'site' }));
grid.appendChild(card);
});
}

function buildGames(filtered) {
const grid = document.getElementById('games-grid');
grid.innerHTML = '';
let list = filtered !== undefined ? filtered : [...GAMES];

// Sort
if (currentSort === 'alpha') list.sort((a,b) => a.name.localeCompare(b.name));
else if (currentSort === 'rating') list.sort((a,b) => (ratings['game:'+b.href]||0) - (ratings['game:'+a.href]||0));
else if (currentSort === 'recent') {
list.sort((a,b) => {
const ra = recentlyPlayed.findIndex(r=>r.href===a.href);
const rb = recentlyPlayed.findIndex(r=>r.href===b.href);
if (ra===-1 && rb===-1) return 0;
if (ra===-1) return 1;
if (rb===-1) return -1;
return ra - rb;
});
}

list.forEach((g, i) => {
const id = 'game:' + g.href;
const isFav = favorites.includes(id);
const rating = ratings[id] || 0;
const rp = recentlyPlayed.find(r => r.href === g.href);
const card = document.createElement('a');
card.className = 'game-card';
card.href = g.href;
card.target = '_blank';
card.dataset.id = id;
card.dataset.name = g.name;
card.dataset.category = 'Games';
card.style.setProperty('--i', i);
const stars = [1,2,3,4,5].map(n =>
`<span class="star ${n<=rating?'filled':''}" onclick="rateGame(event,'${id}',${n},this.parentElement)">${n<=rating?'â˜…':'â˜†'}</span>`
).join('');
const hasImg = g.img && g.img.trim() !== '';
card.innerHTML = `
<div class="card-thumb">
${hasImg ? `<img class="card-thumb-img" src="${g.img}" alt="${g.name}" onerror="this.style.display='none';this.nextElementSibling.classList.remove('hidden')">` : ''}
<div class="card-thumb-placeholder${hasImg ? ' hidden' : ''}">${g.icon||'ğŸ®'}</div>
<div class="card-thumb-overlay"></div>
${rp ? `<div class="card-played-badge">â–¶ PLAYED</div>` : ''}
<span class="card-fav ${isFav?'active':''}" onclick="toggleFav(event,'${id}',this)">â˜…</span>
<div class="card-rating">${stars}</div>
</div>
<div class="card-info">
<div class="card-name">${g.name}</div>
<span class="card-tag">Game</span>
</div>`;
card.addEventListener('click', () => trackPlay(g.name, g.icon, g.href));
card.addEventListener('contextmenu', e => showContextMenu(e, { name: g.name, href: g.href, id, type: 'game' }));
grid.appendChild(card);
});
}

function buildWebsites() {
const grid = document.getElementById('websites-grid');
grid.innerHTML = '';
WEBSITES.forEach((w, i) => {
const isFav = favorites.includes('site:' + w.href);
let domain = getDomain(w.href);
const faviconUrl = getFavicon(w.href);
const card = document.createElement('a');
card.className = 'site-card';
card.href = w.href;
card.target = '_blank';
card.dataset.id = 'site:' + w.href;
card.dataset.name = w.name;
card.style.setProperty('--i', i);
card.innerHTML = `
<div class="site-preview">
<div class="site-preview-bg"></div>
<img class="site-favicon" src="${faviconUrl}" alt="${domain}" onerror="this.style.display='none'">
<div class="site-domain">${domain}</div>
<span class="site-fav ${isFav?'active':''}" onclick="toggleFav(event,'site:${w.href.replace(/'/g,'\\\'').replace(/"/g,'&quot;')}',this)"></span>
</div>
<div class="site-info">
<div class="site-name ${w.cls||''}">${w.name}</div>
</div>`;
card.addEventListener('contextmenu', e => showContextMenu(e, { name: w.name, href: w.href, id: 'site:'+w.href, type: 'site' }));
grid.appendChild(card);
});
}

// ============================================================
// FILTER & SORT - GAMES
// ============================================================
function filterGames(filter, btnEl) {
currentFilter = filter;
document.querySelectorAll('#games-filter-bar .filter-btn').forEach(b => b.classList.remove('active'));
if (btnEl) btnEl.classList.add('active');
applyGameFilter();
}
function sortGames(val) {
currentSort = val;
applyGameFilter();
}
function applyGameFilter() {
let list = [...GAMES];
if (currentFilter === 'played') {
const playedHrefs = new Set(recentlyPlayed.map(r=>r.href));
list = list.filter(g => playedHrefs.has(g.href));
} else if (currentFilter === 'rated') {
list = list.filter(g => ratings['game:'+g.href]);
} else if (currentFilter !== 'all') {
list = list.filter(g => g.tags && g.tags.includes(currentFilter));
}
buildGames(list);
}

// ============================================================
// RATING SYSTEM
// ============================================================
function rateGame(e, id, stars, container) {
e.preventDefault();
e.stopPropagation();
ratings[id] = stars;
localStorage.setItem('ngg_ratings', JSON.stringify(ratings));
container.querySelectorAll('.star').forEach((s, i) => {
s.classList.toggle('filled', i < stars);
s.textContent = i < stars ? 'â˜…' : 'â˜†';
});
showToast(`${stars}â˜… rating saved!`, 'success');
}
function clearRatings() {
if (!confirm('Clear all ratings?')) return;
ratings = {};
localStorage.setItem('ngg_ratings', '{}');
buildGames();
showToast('Ratings cleared','');
}

// ============================================================
// RECENTLY PLAYED
// ============================================================
function trackPlay(name, icon, href) {
recentlyPlayed = recentlyPlayed.filter(r => r.href !== href);
recentlyPlayed.unshift({ name, icon, href, time: Date.now() });
if (recentlyPlayed.length > 20) recentlyPlayed.pop();
localStorage.setItem('ngg_recent', JSON.stringify(recentlyPlayed));
renderRecentlyPlayed();
}
function renderRecentlyPlayed() {
const list = document.getElementById('recently-list');
if (!list) return;
if (recentlyPlayed.length === 0) {
list.innerHTML = '<div class="recently-empty">No games played yet â€” click a game to start!</div>';
return;
}
list.innerHTML = '';
recentlyPlayed.slice(0, 8).forEach(r => {
const timeAgo = getTimeAgo(r.time);
const item = document.createElement('a');
item.className = 'recently-item';
item.href = r.href;
item.target = '_blank';
item.onclick = () => trackPlay(r.name, r.icon, r.href);
item.innerHTML = `<span class="ri-icon">${r.icon||''}</span><span class="ri-name">${r.name}</span><span class="ri-time">${timeAgo}</span>`;
list.appendChild(item);
});
}
function getTimeAgo(ts) {
const diff = Date.now() - ts;
if (diff < 60000) return 'just now';
if (diff < 3600000) return Math.floor(diff/60000) + 'm ago';
if (diff < 86400000) return Math.floor(diff/3600000) + 'h ago';
return Math.floor(diff/86400000) + 'd ago';
}
function clearRecentlyPlayed() {
if (!confirm('Clear recently played history?')) return;
recentlyPlayed = [];
localStorage.setItem('ngg_recent', '[]');
renderRecentlyPlayed();
buildGames();
showToast('Recently played cleared','');
}

// ============================================================
// FAVORITES
// ============================================================
function toggleFav(e, id, starEl) {
e.preventDefault();
e.stopPropagation();
if (favorites.includes(id)) {
favorites = favorites.filter(f => f !== id);
starEl.classList.remove('active');
} else {
favorites.push(id);
starEl.classList.add('active', 'animate');
setTimeout(() => starEl.classList.remove('animate'), 350);
showToast(' Added to favorites!', 'success');
}
saveFavorites();
renderFavorites();
}
function saveFavorites() { localStorage.setItem('ngg_favs', JSON.stringify(favorites)); }
function renderFavorites() {
const container = document.getElementById('favorites-content');
if (!container) return;
if (favorites.length === 0) {
container.innerHTML = `<div class="empty-state"><div class="es-icon"></div><h3>No Favorites Yet</h3><p>Click the on any game or website to add it here.</p></div>`;
return;
}
container.innerHTML = '';
const grid = document.createElement('div');
grid.className = 'card-grid';
favorites.forEach(id => {
let item = null, type = '';
if (id.startsWith('game:')) {
const g = GAMES.find(x => x.href === id.slice(5));
if (g) { item = g; type = 'game'; }
} else if (id.startsWith('site:') || id.startsWith('link:')) {
const href = id.slice(5);
const all = [...WEBSITES,...PARTNERSHIPS,...EAGLERCRAFT,...OURLINKS,...MEDIEVAL,...OTHER];
const s = all.find(x => x.href === href);
if (s) { item = s; type = 'site'; }
}
if (!item) return;
if (type === 'game') {
const g = item;
const rating = ratings[id] || 0;
const card = document.createElement('a');
card.className = 'game-card';
card.href = g.href; card.target = '_blank';
card.dataset.id = id;
const stars = [1,2,3,4,5].map(n=>`<span class="star ${n<=rating?'filled':''}" onclick="rateGame(event,'${id}',${n},this.parentElement)">${n<=rating?'â˜…':'â˜†'}</span>`).join('');
card.innerHTML = `<div class="card-thumb"><div class="card-thumb-placeholder">${g.icon}</div><div class="card-thumb-overlay"></div><span class="card-fav active" onclick="removeFav(event,'${id}',this)">â˜…</span><div class="card-rating">${stars}</div></div><div class="card-info"><div class="card-name">${g.name}</div><span class="card-tag">Game</span></div>`;
card.addEventListener('click', () => trackPlay(g.name, g.icon, g.href));
grid.appendChild(card);
} else {
const domain = getDomain(item.href);
const card = document.createElement('a');
card.className = 'site-card';
card.href = item.href; card.target = '_blank';
card.dataset.id = id;
card.innerHTML = `<div class="site-preview"><div class="site-preview-bg"></div><img class="site-favicon" src="${getFavicon(item.href)}" alt="${domain}" onerror="this.style.display='none'"><div class="site-domain">${domain}</div><span class="site-fav active" onclick="removeFav(event,'${id.replace(/'/g,"\\'")}',this)"></span></div><div class="site-info"><div class="site-name ${item.cls||''}">${item.name}</div></div>`;
grid.appendChild(card);
}
});
container.appendChild(grid);
}
function removeFav(e, id, el) {
e.preventDefault();
e.stopPropagation();
favorites = favorites.filter(f => f !== id);
saveFavorites();
document.querySelectorAll(`[data-id="${id}"] .card-fav,[data-id="${id}"] .site-fav`).forEach(s => s.classList.remove('active'));
renderFavorites();
showToast('Removed from favorites','');
}
function clearFavorites() {
if (!confirm('Clear all favorites?')) return;
favorites = [];
saveFavorites();
document.querySelectorAll('.card-fav.active,.site-fav.active,.link-row-fav.active').forEach(s=>s.classList.remove('active'));
renderFavorites();
showToast('Favorites cleared','');
}

// ============================================================
// SEARCH + HISTORY
// ============================================================
const ALL_SEARCH = () => [
...GAMES.map(g=>({name:g.name,href:g.href,icon:g.icon,cat:'Games',id:'game:'+g.href})),
...WEBSITES.map(w=>({name:w.name,href:w.href,icon:'',cat:'Websites',id:'site:'+w.href})),
...EAGLERCRAFT.map(e=>({name:e.name,href:e.href,icon:'',cat:'Eaglercraft',id:'link:'+e.href})),
...PARTNERSHIPS.map(p=>({name:p.name,href:p.href,icon:'',cat:'Partnerships',id:'link:'+p.href})),
...OURLINKS.map(l=>({name:l.name,href:l.href,icon:'',cat:'Our Links',id:'link:'+l.href})),
...OTHER.map(o=>({name:o.name,href:o.href,icon:'',cat:'Other',id:'link:'+o.href}))
];

function handleSearch(val) {
const q = val.trim().toLowerCase();
const sr = document.getElementById('search-results');
if (!q) { showSearchHistory(); return; }
sr.classList.add('visible');
const results = ALL_SEARCH().filter(x => x.name.toLowerCase().includes(q)).slice(0, 15);
sr.innerHTML = `<h4> Results for "${val}" <span style="font-size:11px;color:var(--text-dim);cursor:pointer;text-transform:none" onclick="saveSearchHistory('${val.replace(/'/g,"\'")}')">+ Save</span></h4>`;
if (results.length === 0) {
sr.innerHTML += `<div style="color:var(--text-muted);font-size:14px;padding:10px 0">No results found</div>`;
} else {
results.forEach(r => {
const div = document.createElement('a');
div.className = 'sr-item'; div.href = r.href; div.target = '_blank';
if (r.cat === 'Games') div.onclick = () => { trackPlay(r.name, r.icon, r.href); saveSearchHistory(val); };
else div.onclick = () => saveSearchHistory(val);
div.innerHTML = `<span class="sr-icon">${r.icon}</span><div class="sr-text"><div class="sr-name">${r.name}</div><div class="sr-cat">${r.cat}</div></div>`;
sr.appendChild(div);
});
}
}
function showSearchHistory() {
const sr = document.getElementById('search-results');
if (searchHistory.length === 0) { sr.classList.remove('visible'); return; }
sr.classList.add('visible');
sr.innerHTML = `<h4> Recent Searches <span style="font-size:10px;color:var(--text-dim);cursor:pointer;text-transform:none;margin-left:8px" onclick="clearSearchHistory()">Clear all</span></h4>`;
const row = document.createElement('div');
row.className = 'search-history-row';
searchHistory.slice(0,10).forEach(q => {
const tag = document.createElement('div');
tag.className = 'sh-tag';
tag.innerHTML = `<span onclick="replaySearch('${q.replace(/'/g,"\\'")}')">${q}</span><span class="sh-del" onclick="removeSearchHistory('${q.replace(/'/g,"\\'")}')" title="Remove">Ã—</span>`;
row.appendChild(tag);
});
sr.appendChild(row);
}
function saveSearchHistory(q) {
if (!q || q.length < 2) return;
searchHistory = searchHistory.filter(x => x !== q);
searchHistory.unshift(q);
if (searchHistory.length > 20) searchHistory.pop();
localStorage.setItem('ngg_search_hist', JSON.stringify(searchHistory));
}
function replaySearch(q) {
const inp = document.getElementById('search');
inp.value = q; handleSearch(q);
}
function removeSearchHistory(q) {
searchHistory = searchHistory.filter(x => x !== q);
localStorage.setItem('ngg_search_hist', JSON.stringify(searchHistory));
showSearchHistory();
}
function clearSearchHistory() {
searchHistory = [];
localStorage.setItem('ngg_search_hist', '[]');
document.getElementById('search-results').classList.remove('visible');
}
function clearSearch() {
document.getElementById('search').value = '';
document.getElementById('search-results').classList.remove('visible');
}
document.addEventListener('click', (e) => {
if (!e.target.closest('#navbar-search') && !e.target.closest('#search-results')) clearSearch();
});

// ============================================================
// CONTEXT MENU
// ============================================================
function initContextMenu() {
document.addEventListener('click', () => hideContextMenu());
document.addEventListener('contextmenu', e => {
// If not on a card, close menu
if (!e.target.closest('.game-card') && !e.target.closest('.site-card')) {
hideContextMenu();
}
});
}
function showContextMenu(e, target) {
e.preventDefault();
ctxTarget = target;
const menu = document.getElementById('context-menu');
// Update label based on type
menu.querySelector('.ctx-item:first-child').textContent = '';
const firstItem = menu.querySelector('.ctx-item:first-child');
firstItem.innerHTML = `<span class="ctx-icon">${target.type==='game'?'':''}</span> Open ${target.type==='game'?'Game':'Site'}`;
// Check fav state
const favItem = menu.querySelectorAll('.ctx-item')[2];
favItem.innerHTML = `<span class="ctx-icon"></span> ${favorites.includes(target.id)?'Remove Favorite':'Add Favorite'}`;
// Hide rate option for sites
const rateItem = menu.querySelectorAll('.ctx-item')[3];
rateItem.style.display = target.type === 'game' ? 'flex' : 'none';
menu.style.display = 'none';
menu.classList.remove('visible');
// Position
let x = e.clientX, y = e.clientY;
const mw = 200, mh = 180;
if (x + mw > window.innerWidth) x = window.innerWidth - mw - 8;
if (y + mh > window.innerHeight) y = window.innerHeight - mh - 8;
menu.style.left = x + 'px';
menu.style.top = y + 'px';
void menu.offsetWidth;
menu.classList.add('visible');
}
function hideContextMenu() {
document.getElementById('context-menu').classList.remove('visible');
ctxTarget = null;
}
function ctxAction(action) {
if (!ctxTarget) return;
hideContextMenu();
if (action === 'open') {
window.open(ctxTarget.href, '_blank');
if (ctxTarget.type === 'game') {
const g = GAMES.find(x => x.href === ctxTarget.href);
if (g) trackPlay(g.name, g.icon, g.href);
}
} else if (action === 'open-blank') {
window.open(ctxTarget.href, '_blank');
} else if (action === 'fav') {
const id = ctxTarget.id;
if (favorites.includes(id)) {
favorites = favorites.filter(f => f !== id);
showToast('Removed from favorites','');
} else {
favorites.push(id);
showToast(' Added to favorites!','success');
}
saveFavorites();
// Update star visuals
document.querySelectorAll(`[data-id="${id}"] .card-fav,[data-id="${id}"] .site-fav`).forEach(s => s.classList.toggle('active', favorites.includes(id)));
renderFavorites();
} else if (action === 'rate') {
const r = parseInt(prompt('Rate this game (1â€“5 stars):'));
if (r >= 1 && r <= 5) { ratings[ctxTarget.id] = r; localStorage.setItem('ngg_ratings', JSON.stringify(ratings)); buildGames(); showToast(`${r} rating saved!`,'success'); }
} else if (action === 'copy') {
navigator.clipboard.writeText(ctxTarget.href).then(() => showToast(' Link copied!','success')).catch(()=>showToast(' Copy failed','error'));
}
}

// ============================================================
// THEME
// ============================================================
function setTheme(theme) { applyTheme(theme, true); }
function applyTheme(theme, save) {
const themes = ['theme-default','theme-neon','theme-midnight','theme-sunset','theme-ocean','theme-forest','theme-candy','theme-lava','theme-arctic','theme-gold','theme-toxic','theme-blood'];
document.body.classList.remove(...themes);
document.body.classList.add(theme);
currentTheme = theme;
if (save) localStorage.setItem('ngg_theme', theme);
document.querySelectorAll('.theme-chip').forEach(c => c.classList.toggle('active', c.dataset.theme === theme));
if (!isPerfMode) { stopBg(); initBg(currentBg); }
}

// ============================================================
// BACKGROUND EFFECTS
// ============================================================
const canvas = document.getElementById('bgCanvas');
const ctx = canvas.getContext('2d');
let bgAnim = null;
let bgParticles = [];
let clickParticles = [];
let matrixColumns = [];

function getAccentColor() { return getComputedStyle(document.body).getPropertyValue('--accent').trim() || '#7c5cfc'; }
function getAccent2Color() { return getComputedStyle(document.body).getPropertyValue('--accent2').trim() || '#5eead4'; }
function resizeCanvas() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
window.addEventListener('resize', () => { resizeCanvas(); if(currentBg==='matrix') initMatrix(); });

function stopBg() {
if (bgAnim) { cancelAnimationFrame(bgAnim); bgAnim = null; }
ctx.clearRect(0, 0, canvas.width, canvas.height);
bgParticles = []; matrixColumns = [];
}
function initBg(type) {
stopBg(); currentBg = type;
document.querySelectorAll('.bg-chip').forEach(c => c.classList.toggle('active', c.dataset.bg === type));
if (isPerfMode || type === 'none') return;
if (type==='stars') initStars();
else if (type==='matrix') initMatrix();
else if (type==='geometric') initGeometric();
else if (type==='particles') initParticles();
else if (type==='nebula') initNebula();
else if (type==='rain') initRain();
else if (type==='aurora') initAurora();
else if (type==='vortex') initVortex();
else if (type==='fire') initFire();
}

function initStars() {
bgParticles = Array.from({length:150},()=>({x:Math.random()*canvas.width,y:Math.random()*canvas.height,r:Math.random()*1.5+0.3,s:Math.random()*0.4+0.05,opacity:Math.random()*0.7+0.3,twinkle:Math.random()*Math.PI*2}));
function draw() {
ctx.clearRect(0,0,canvas.width,canvas.height);
bgParticles.forEach(s=>{ s.y+=s.s; s.twinkle+=0.05; if(s.y>canvas.height){s.y=0;s.x=Math.random()*canvas.width;} const op=s.opacity*(0.6+0.4*Math.sin(s.twinkle)); ctx.globalAlpha=op; ctx.fillStyle='#ffffff'; ctx.beginPath(); ctx.arc(s.x,s.y,s.r,0,Math.PI*2); ctx.fill(); });
drawClickParticles(); ctx.globalAlpha=1; bgAnim=requestAnimationFrame(draw);
} draw();
}
function initMatrix() {
const colWidth=22, colCount=Math.floor(canvas.width/colWidth);
matrixColumns=Array.from({length:colCount},()=>({y:Math.random()*canvas.height*2-canvas.height,speed:Math.random()*1.0+0.4,opacity:Math.random()*0.4+0.2,trailLen:Math.floor(Math.random()*8+5)}));
const chars='ã‚¢ã‚¦ã‚¨ã‚ªã‚«ã‚³ã‚µã‚·ã‚¹ã‚¿ãƒãƒ„ãƒ†ãƒŠãƒ‹ãƒŒ01ã‚¢ã‚¦ã‚¨ã‚ªã‚«ã‚³';
let frame=0;
function draw() {
frame++; ctx.fillStyle='rgba(0,0,0,0.06)'; ctx.fillRect(0,0,canvas.width,canvas.height);
const accent=getAccentColor(); const doUpdate=frame%2===0;
matrixColumns.forEach((col,i)=>{ const x=i*colWidth+4; ctx.font='14px monospace'; if(doUpdate){ const leadChar=chars[Math.floor(Math.random()*chars.length)]; ctx.globalAlpha=col.opacity*0.7; ctx.fillStyle='#c8ffc8'; ctx.fillText(leadChar,x,col.y); for(let t=1;t<col.trailLen;t++){const ta=col.opacity*(1-t/col.trailLen)*0.3; if(ta<0.02)break; ctx.globalAlpha=ta; ctx.fillStyle=accent; ctx.fillText(chars[Math.floor(Math.random()*chars.length)],x,col.y-t*14);} col.y+=col.speed; if(col.y>canvas.height+60){col.y=-Math.random()*canvas.height*0.5; col.speed=Math.random()*1.0+0.4; col.opacity=Math.random()*0.4+0.2;}} });
drawClickParticles(); ctx.globalAlpha=1; bgAnim=requestAnimationFrame(draw);
} draw();
}
function initGeometric() {
bgParticles=Array.from({length:20},()=>({x:Math.random()*canvas.width,y:Math.random()*canvas.height,size:Math.random()*60+20,rotation:Math.random()*Math.PI*2,rotSpeed:(Math.random()-.5)*0.01,vx:(Math.random()-.5)*0.3,vy:(Math.random()-.5)*0.3,sides:Math.floor(Math.random()*4)+3,opacity:Math.random()*0.1+0.03}));
function drawPoly(x,y,r,sides,rot){ctx.beginPath();for(let i=0;i<=sides;i++){const a=(i/sides)*Math.PI*2+rot; i===0?ctx.moveTo(x+r*Math.cos(a),y+r*Math.sin(a)):ctx.lineTo(x+r*Math.cos(a),y+r*Math.sin(a));}ctx.closePath();}
function draw(){ctx.clearRect(0,0,canvas.width,canvas.height); const accent=getAccentColor(),accent2=getAccent2Color(); bgParticles.forEach((p,i)=>{p.x+=p.vx;p.y+=p.vy;p.rotation+=p.rotSpeed; if(p.x<-100)p.x=canvas.width+100; if(p.x>canvas.width+100)p.x=-100; if(p.y<-100)p.y=canvas.height+100; if(p.y>canvas.height+100)p.y=-100; ctx.globalAlpha=p.opacity; ctx.strokeStyle=i%2?accent:accent2; ctx.lineWidth=1; drawPoly(p.x,p.y,p.size,p.sides,p.rotation); ctx.stroke();}); drawClickParticles(); ctx.globalAlpha=1; bgAnim=requestAnimationFrame(draw);} draw();
}
function initParticles() {
bgParticles=Array.from({length:80},()=>({x:Math.random()*canvas.width,y:Math.random()*canvas.height,r:Math.random()*2+0.5,vx:(Math.random()-.5)*0.5,vy:(Math.random()-.5)*0.5}));
let mouseX=canvas.width/2,mouseY=canvas.height/2;
canvas.addEventListener('mousemove',e=>{mouseX=e.clientX;mouseY=e.clientY;});
function draw(){ctx.clearRect(0,0,canvas.width,canvas.height); const accent=getAccentColor(); bgParticles.forEach((p,i)=>{p.x+=p.vx;p.y+=p.vy; if(p.x<0||p.x>canvas.width)p.vx*=-1; if(p.y<0||p.y>canvas.height)p.vy*=-1; const dx=mouseX-p.x,dy=mouseY-p.y,dist=Math.sqrt(dx*dx+dy*dy); if(dist<100){p.vx+=dx*0.0003;p.vy+=dy*0.0003;} bgParticles.slice(i+1).forEach(q=>{const d=Math.sqrt((p.x-q.x)**2+(p.y-q.y)**2); if(d<80){ctx.globalAlpha=(1-d/80)*0.15;ctx.strokeStyle=accent;ctx.lineWidth=0.5;ctx.beginPath();ctx.moveTo(p.x,p.y);ctx.lineTo(q.x,q.y);ctx.stroke();}}); ctx.globalAlpha=0.5;ctx.fillStyle=accent;ctx.beginPath();ctx.arc(p.x,p.y,p.r,0,Math.PI*2);ctx.fill();}); drawClickParticles(); ctx.globalAlpha=1; bgAnim=requestAnimationFrame(draw);} draw();
}
function initNebula() {
bgParticles=Array.from({length:200},()=>({x:Math.random()*canvas.width,y:Math.random()*canvas.height,r:Math.random()*100+20,opacity:Math.random()*0.06+0.01,phase:Math.random()*Math.PI*2}));
function draw(){ctx.clearRect(0,0,canvas.width,canvas.height); const accent=getAccentColor(); bgParticles.forEach(p=>{p.phase+=0.003; const op=p.opacity*(0.7+0.3*Math.sin(p.phase)); try{const r=parseInt(accent.slice(1,3),16),g2=parseInt(accent.slice(3,5),16),b=parseInt(accent.slice(5,7),16); const grad=ctx.createRadialGradient(p.x,p.y,0,p.x,p.y,p.r); grad.addColorStop(0,`rgba(${r},${g2},${b},${op})`); grad.addColorStop(1,'rgba(0,0,0,0)'); ctx.fillStyle=grad;}catch(e){ctx.fillStyle='rgba(124,92,252,0.02)';} ctx.beginPath();ctx.arc(p.x,p.y,p.r,0,Math.PI*2);ctx.fill();}); ctx.fillStyle='#ffffff'; for(let i=0;i<5;i++){ctx.globalAlpha=Math.random()*0.5;ctx.beginPath();ctx.arc(Math.random()*canvas.width,Math.random()*canvas.height,0.5,0,Math.PI*2);ctx.fill();} drawClickParticles(); ctx.globalAlpha=1; bgAnim=requestAnimationFrame(draw);} draw();
}
function initRain() {
bgParticles=Array.from({length:120},()=>({x:Math.random()*canvas.width,y:Math.random()*canvas.height-canvas.height,len:Math.random()*15+8,speed:Math.random()*4+6,opacity:Math.random()*0.4+0.1,slant:Math.random()*0.3+0.1}));
function draw(){
ctx.clearRect(0,0,canvas.width,canvas.height);
const accent=getAccentColor();
bgParticles.forEach(p=>{
p.y+=p.speed; p.x+=p.slant;
if(p.y>canvas.height){p.y=-20;p.x=Math.random()*canvas.width;}
ctx.globalAlpha=p.opacity; ctx.strokeStyle=accent; ctx.lineWidth=1;
ctx.beginPath(); ctx.moveTo(p.x,p.y); ctx.lineTo(p.x-p.slant*p.len/p.speed,p.y-p.len); ctx.stroke();
});
drawClickParticles(); ctx.globalAlpha=1; bgAnim=requestAnimationFrame(draw);
} draw();
}
function initAurora() {
const waves=Array.from({length:4},(_,i)=>({offset:i*0.8,amp:45+i*18,freq:0.0025+i*0.0008,yBase:0.32+i*0.07}));
let t=0;
function hexToRgb(h){try{return[parseInt(h.slice(1,3),16),parseInt(h.slice(3,5),16),parseInt(h.slice(5,7),16)];}catch(e){return[124,92,252];}}
function draw(){
ctx.clearRect(0,0,canvas.width,canvas.height);
const accent=getAccentColor(), accent2=getAccent2Color();
const [r1,g1,b1]=hexToRgb(accent); const [r2,g2,b2]=hexToRgb(accent2);
waves.forEach((w,wi)=>{
const pts=[];
for(let x=0;x<=canvas.width;x+=8){
const y=canvas.height*w.yBase + Math.sin(x*w.freq+t+w.offset)*w.amp + Math.cos(x*w.freq*0.6+t*0.5+w.offset)*w.amp*0.4;
pts.push([x,y]);
}
// Fill
ctx.beginPath();
ctx.moveTo(pts[0][0],pts[0][1]);
for(let i=1;i<pts.length-1;i++){const mx=(pts[i][0]+pts[i+1][0])/2,my=(pts[i][1]+pts[i+1][1])/2;ctx.quadraticCurveTo(pts[i][0],pts[i][1],mx,my);}
ctx.lineTo(canvas.width,canvas.height); ctx.lineTo(0,canvas.height); ctx.closePath();
const grad=ctx.createLinearGradient(0,canvas.height*w.yBase,0,canvas.height);
const ca=wi%2===0?[r1,g1,b1]:[r2,g2,b2];
grad.addColorStop(0,`rgba(${ca[0]},${ca[1]},${ca[2]},0.06)`);
grad.addColorStop(1,`rgba(${ca[0]},${ca[1]},${ca[2]},0)`);
ctx.fillStyle=grad; ctx.fill();
// Thin glowing edge
ctx.beginPath();
ctx.moveTo(pts[0][0],pts[0][1]);
for(let i=1;i<pts.length-1;i++){const mx=(pts[i][0]+pts[i+1][0])/2,my=(pts[i][1]+pts[i+1][1])/2;ctx.quadraticCurveTo(pts[i][0],pts[i][1],mx,my);}
ctx.strokeStyle=`rgba(${ca[0]},${ca[1]},${ca[2]},0.2)`;
ctx.lineWidth=1.5; ctx.stroke();
});
t+=0.005;
drawClickParticles(); ctx.globalAlpha=1; bgAnim=requestAnimationFrame(draw);
} draw();
}
function initVortex() {
bgParticles=Array.from({length:100},(_,i)=>({angle:(i/100)*Math.PI*2,radius:Math.random()*Math.min(canvas.width,canvas.height)*0.45,speed:0.008+Math.random()*0.015,r:Math.random()*2+0.5,opacity:Math.random()*0.5+0.2}));
function draw(){
ctx.clearRect(0,0,canvas.width,canvas.height);
const cx=canvas.width/2,cy=canvas.height/2;
const accent=getAccentColor(),accent2=getAccent2Color();
bgParticles.forEach((p,i)=>{
p.angle+=p.speed*(1-p.radius/(Math.min(canvas.width,canvas.height)*0.5)*0.5);
const x=cx+Math.cos(p.angle)*p.radius, y=cy+Math.sin(p.angle)*p.radius;
ctx.globalAlpha=p.opacity*(0.4+0.6*(p.radius/(Math.min(canvas.width,canvas.height)*0.45)));
ctx.fillStyle=i%2?accent:accent2;
ctx.beginPath(); ctx.arc(x,y,p.r,0,Math.PI*2); ctx.fill();
});
drawClickParticles(); ctx.globalAlpha=1; bgAnim=requestAnimationFrame(draw);
} draw();
}
function initFire() {
// Proper fire: particles rising from the bottom with heat-based colors
const W=canvas.width, H=canvas.height;
const COLS=Math.floor(W/6)+2, ROWS=Math.floor(H/6)+2;
let heat=new Float32Array(COLS*ROWS);
function idx(x,y){return y*COLS+x;}
function draw(){
// Reseed bottom 2 rows with random heat
for(let x=0;x<COLS;x++){
heat[idx(x,ROWS-1)]=Math.random()>0.25?0.8+Math.random()*0.2:Math.random()*0.3;
heat[idx(x,ROWS-2)]=Math.random()>0.35?0.6+Math.random()*0.4:Math.random()*0.2;
}
// Propagate heat upward with slight horizontal drift
const next=new Float32Array(COLS*ROWS);
for(let y=1;y<ROWS;y++){
for(let x=0;x<COLS;x++){
const l=heat[idx(Math.max(0,x-1),y)];
const r=heat[idx(Math.min(COLS-1,x+1),y)];
const d=heat[idx(x,Math.min(ROWS-1,y+1))];
const d2=heat[idx(x,Math.min(ROWS-1,y+2))];
next[idx(x,y-1)]=(l+r+d+d2)/4.08;
}
}
heat=next;
// Draw
ctx.clearRect(0,0,W,H);
for(let y=0;y<ROWS;y++){
for(let x=0;x<COLS;x++){
const v=heat[idx(x,y)];
if(v<0.01) continue;
// Heat â†’ color: blackâ†’redâ†’orangeâ†’yellowâ†’white tip
let r,g,b,a;
if(v<0.33){r=Math.floor(v/0.33*200);g=0;b=0;a=v*0.9;}
else if(v<0.66){const t=(v-0.33)/0.33;r=200+Math.floor(t*55);g=Math.floor(t*140);b=0;a=0.7+t*0.2;}
else{const t=(v-0.66)/0.34;r=255;g=140+Math.floor(t*115);b=Math.floor(t*80);a=0.85+t*0.15;}
ctx.globalAlpha=Math.min(1,a);
ctx.fillStyle=`rgb(${r},${g},${b})`;
ctx.fillRect(x*6,y*6,7,7);
}
}
drawClickParticles(); ctx.globalAlpha=1; bgAnim=requestAnimationFrame(draw);
} draw();
}
function spawnClickParticles(x,y){const a=getAccentColor(),b=getAccent2Color(); for(let i=0;i<20;i++){const ang=(i/20)*Math.PI*2+Math.random()*0.5,sp=Math.random()*5+2; clickParticles.push({x,y,vx:Math.cos(ang)*sp,vy:Math.sin(ang)*sp,r:Math.random()*3+1,life:1,color:Math.random()>.5?a:b});}}
function drawClickParticles(){clickParticles=clickParticles.filter(p=>p.life>0); clickParticles.forEach(p=>{p.x+=p.vx;p.y+=p.vy;p.vx*=0.95;p.vy*=0.95;p.life-=0.035; ctx.globalAlpha=p.life*0.8;ctx.fillStyle=p.color;ctx.beginPath();ctx.arc(p.x,p.y,p.r*p.life,0,Math.PI*2);ctx.fill();});}

function setBgEffect(type){currentBg=type;localStorage.setItem('ngg_bg',type);initBg(type);}

// ============================================================
// PERFORMANCE MODE
// ============================================================
function togglePerfMode(val) {
isPerfMode = val === undefined ? !isPerfMode : val;
applyPerfMode(isPerfMode);
}
function applyPerfMode(val) {
isPerfMode=val; localStorage.setItem('ngg_perf',val);
document.body.classList.toggle('perf-mode',val);
const toggle=document.getElementById('perf-toggle'); if(toggle)toggle.checked=val;
if(val)stopBg(); else initBg(currentBg);
}

// ============================================================
// SETTINGS LOAD
// ============================================================
function loadSettings() {
const inactSel=document.getElementById('inactivity-select');
const saved=localStorage.getItem('ngg_inactivity');
if(saved&&inactSel)inactSel.value=saved;

const perfTog=document.getElementById('perf-toggle'); if(perfTog)perfTog.checked=isPerfMode;
document.querySelectorAll('.bg-chip').forEach(c=>c.classList.toggle('active',c.dataset.bg===currentBg));
document.querySelectorAll('.theme-chip').forEach(c=>c.classList.toggle('active',c.dataset.theme===currentTheme));
const anMsg = ANNOUNCEMENT_MESSAGE;
const ceTog = document.getElementById('click-effects-toggle'); if(ceTog) ceTog.checked = clickEffectsEnabled;
document.querySelectorAll('#click-effect-grid .bg-chip').forEach(c => c.classList.toggle('active', c.dataset.ce === clickEffectStyle));
const apTog = document.getElementById('auto-perf-toggle'); if(apTog) apTog.checked = autoPerfEnabled;
const tpTog = document.getElementById('tab-perf-toggle'); if(tpTog) tpTog.checked = tabPerfEnabled;
}
function saveInactivity(val) {
localStorage.setItem('ngg_inactivity',val);
inactivityEnabled=val!=='off';
inactivityLimit=val==='off'?0:parseInt(val);
resetInactivity();
}

// ============================================================
// INACTIVITY
// ============================================================
function startInactivity() {
const saved=localStorage.getItem('ngg_inactivity');
if(saved==='off'){inactivityEnabled=false;return;}
if(saved)inactivityLimit=parseInt(saved);
resetInactivity();
['mousemove','keydown','scroll','click','touchstart'].forEach(ev=>document.addEventListener(ev,resetInactivity,{passive:true}));
}
function resetInactivity() {
if(!inactivityEnabled)return;
clearTimeout(inactivityTimer);
inactivityTimer=setTimeout(()=>window.location.replace(window.location.href),inactivityLimit);
}

// ============================================================
// VISITOR COUNT
// ============================================================
function updateVisitorCount() {
let count=parseInt(localStorage.getItem('ngg_views')||'0');
if(!sessionStorage.getItem('ngg_session')){count++;localStorage.setItem('ngg_views',count);sessionStorage.setItem('ngg_session','1');}
const el=document.getElementById('stat-views'); if(el){const target=count; el.textContent='0'; setTimeout(()=>animateCount(el,target),600);}
}

// ============================================================
// DATA IMPORT / EXPORT
// ============================================================
function exportData() {
const data={version:'1.7.6',exported:new Date().toISOString(),favorites,ratings,recentlyPlayed,searchHistory,theme:currentTheme,bg:currentBg,inactivity:localStorage.getItem('ngg_inactivity'),perf:isPerfMode,clickEffects:clickEffectsEnabled,clickStyle:clickEffectStyle,autoPerf:autoPerfEnabled,tabPerf:tabPerfEnabled,tabOrder,widgetSettings};
const blob=new Blob([JSON.stringify(data,null,2)],{type:'application/json'});
const a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download='ngg-data.json'; a.click();
showToast(' Data exported!','success');
}
function importData(input) {
const file=input.files[0]; if(!file)return;
const reader=new FileReader();
reader.onload=(e)=>{
try {
const data=JSON.parse(e.target.result);
if(data.favorites){favorites=data.favorites;saveFavorites();}
if(data.ratings){ratings=data.ratings;localStorage.setItem('ngg_ratings',JSON.stringify(ratings));}
if(data.recentlyPlayed){recentlyPlayed=data.recentlyPlayed;localStorage.setItem('ngg_recent',JSON.stringify(recentlyPlayed));}
if(data.searchHistory){searchHistory=data.searchHistory;localStorage.setItem('ngg_search_hist',JSON.stringify(searchHistory));}
if(data.theme)applyTheme(data.theme,true);
if(data.bg)setBgEffect(data.bg);
if(data.inactivity)localStorage.setItem('ngg_inactivity',data.inactivity);
if(data.clickEffects!==undefined){clickEffectsEnabled=data.clickEffects;localStorage.setItem('ngg_click_effects',data.clickEffects);}
if(data.clickStyle){setClickEffectStyle(data.clickStyle);}
if(data.autoPerf!==undefined){autoPerfEnabled=data.autoPerf;localStorage.setItem('ngg_auto_perf',data.autoPerf);}
if(data.tabPerf!==undefined){tabPerfEnabled=data.tabPerf;localStorage.setItem('ngg_tab_perf',data.tabPerf);}
if(data.tabOrder){tabOrder=data.tabOrder;saveTabOrder();} if(data.widgetSettings){widgetSettings=data.widgetSettings;localStorage.setItem('ngg_widget',JSON.stringify(widgetSettings));} loadSettings(); renderFavorites(); renderRecentlyPlayed(); buildGames(); applyTabOrder(); buildTabOrderList();
showToast(' Data imported!','success');
} catch(err){showToast(' Invalid file','error');}
};
reader.readAsText(file); input.value='';
}
function clearAllData() {
if(!confirm('Reset ALL data? This cannot be undone.'))return;
localStorage.clear(); sessionStorage.clear();
showToast('All data cleared. Reloading...','');
setTimeout(()=>location.reload(),1000);
}

// ============================================================
// BLOB / ABOUT BLANK
// ============================================================
function openBlob(){const blob=new Blob([document.documentElement.outerHTML],{type:'text/html'});window.open(URL.createObjectURL(blob),'_blank');}
function openAboutBlank(){const w=window.open('about:blank','_blank');if(w){w.document.open();w.document.write(document.documentElement.outerHTML);w.document.close();}}

// ============================================================
// TOAST
// ============================================================
function showToast(msg,type){const container=document.getElementById('toast-container');const t=document.createElement('div');t.className=`toast ${type}`;t.textContent=msg;container.appendChild(t);setTimeout(()=>{t.style.opacity='0';t.style.transform='translateX(20px)';t.style.transition='all 0.3s';setTimeout(()=>t.remove(),300);},2500);}

// ============================================================
// UNOFFICIAL WARNING
// ============================================================
function checkOfficialSite(){const official=['https://www.nolangraysongames.com','https://nolansandgraysonsgames.w3spaces.com','https://nolanbetter.github.io','https://nolanbetter-github-io.vercel.app','https://mathisfun-lilac.vercel.app','https://clevercom-iota.vercel.app','about:blank'];if(!official.includes(window.location.origin)){showToast(' Unofficial copy â€“ visit nolangraysongames.com for the official site','error');}}

// ============================================================
// CHANGELOG RENDERER
// ============================================================
function buildChangelog() {
const list = document.getElementById('changelog-list');
if (!list) return;
list.innerHTML = CHANGELOG.map(c => `
<div class="cl-item">
<div class="cl-version">v${c.version}${c.badge ? ` <span class="cl-badge ${c.badge}">${c.badge.toUpperCase()}</span>` : ''}</div>
<div class="cl-date">${c.date}</div>
${c.entries.map(e => `<div class="cl-entry">${e}</div>`).join('')}
</div>`).join('');
}

// ============================================================
// NAVBAR WIDGET (TIME + DATE + BATTERY + CUSTOM)
// ============================================================
let widgetSettings = JSON.parse(localStorage.getItem('ngg_widget') || '{"time":true,"date":false,"batt":true,"custom":false,"customText":"","hide":false}');

function saveWidgetSettings(changedId) {
  const timeTog = document.getElementById('widget-time-toggle');
  const dateTog = document.getElementById('widget-date-toggle');
  const battTog = document.getElementById('widget-batt-toggle');
  const customTog = document.getElementById('widget-custom-toggle');
  const customInput = document.getElementById('widget-custom-input');
  const hideTog = document.getElementById('widget-hide-toggle');
  const customRow = document.getElementById('widget-custom-row');

  // Enforce max 2 content items (time, date, battery, custom)
  const contentToggles = [timeTog, dateTog, battTog, customTog];
  const contentKeys = ['time', 'date', 'batt', 'custom'];
  const checkedCount = contentToggles.filter(t => t && t.checked).length;
  if (checkedCount > 2 && changedId) {
    // The one just turned on is changedId â€” find and uncheck it
    const el = document.getElementById(changedId);
    if (el) { el.checked = false; showToast('Widget max 2 items â€” uncheck one first', 'error'); return; }
  }

  if (timeTog) widgetSettings.time = timeTog.checked;
  if (dateTog) widgetSettings.date = dateTog.checked;
  if (battTog) widgetSettings.batt = battTog.checked;
  if (customTog) widgetSettings.custom = customTog.checked;
  if (customInput) widgetSettings.customText = customInput.value;
  if (hideTog) widgetSettings.hide = hideTog.checked;
  if (customRow) customRow.style.display = widgetSettings.custom ? '' : 'none';
  localStorage.setItem('ngg_widget', JSON.stringify(widgetSettings));
  updateNavbarInfo();
}

const IS_MOBILE = /Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
let battWarningCount = 0;

function handleBattToggle(el) {
  if (IS_MOBILE) {
    el.checked = false; // always revert first
    battWarningCount++;
    if (battWarningCount >= 2) {
      battWarningCount = 0;
      if (confirm('âš ï¸ Battery API is not supported on most mobile devices and may show incorrect data. Enable anyway?')) {
        el.checked = true;
        el.disabled = false;
        saveWidgetSettings('widget-batt-toggle');
      }
    } else {
      showToast('ğŸ”’ Battery not supported on mobile â€” tap again to override', 'error');
    }
    return;
  }
  saveWidgetSettings('widget-batt-toggle');
}

function loadWidgetSettings() {
  const timeTog = document.getElementById('widget-time-toggle');
  const dateTog = document.getElementById('widget-date-toggle');
  const battTog = document.getElementById('widget-batt-toggle');
  const customTog = document.getElementById('widget-custom-toggle');
  const customInput = document.getElementById('widget-custom-input');
  const hideTog = document.getElementById('widget-hide-toggle');
  const customRow = document.getElementById('widget-custom-row');
  const battLock = document.getElementById('widget-batt-lock-icon');
  const battDesc = document.getElementById('widget-batt-desc');

  if (timeTog) timeTog.checked = widgetSettings.time !== false;
  if (dateTog) dateTog.checked = !!widgetSettings.date;
  if (customTog) customTog.checked = !!widgetSettings.custom;
  if (customInput) customInput.value = widgetSettings.customText || '';
  if (hideTog) hideTog.checked = !!widgetSettings.hide;
  if (customRow) customRow.style.display = widgetSettings.custom ? '' : 'none';

  // Battery: lock on mobile
  if (battTog) {
    if (IS_MOBILE) {
      battTog.checked = false;
      battTog.disabled = true;
      widgetSettings.batt = false;
      if (battLock) battLock.style.display = 'inline';
      if (battDesc) battDesc.textContent = 'Not available on mobile â€” tap toggle twice to override';
    } else {
      battTog.checked = widgetSettings.batt !== false;
      battTog.disabled = false;
      if (battLock) battLock.style.display = 'none';
      if (battDesc) battDesc.textContent = '';
    }
  }
}

function updateNavbarInfo() {
  const widget = document.getElementById('navbar-info');
  const timeEl = document.getElementById('info-time');
  const dateEl = document.getElementById('info-date');
  const battEl = document.getElementById('info-battery');
  const customEl = document.getElementById('info-custom');
  const ws = widgetSettings;

  // Hide entire widget if toggled
  if (widget) widget.style.display = ws.hide ? 'none' : '';
  if (ws.hide) return;

  const now = new Date();
  const h = now.getHours(), m = now.getMinutes().toString().padStart(2,'0');
  const ampm = h >= 12 ? 'PM' : 'AM';

  if (timeEl) {
    timeEl.style.display = ws.time !== false ? '' : 'none';
    timeEl.textContent = `${h % 12 || 12}:${m} ${ampm}`;
  }
  if (dateEl) {
    const show = !!ws.date;
    dateEl.style.display = show ? '' : 'none';
    if (show) {
      const days = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];
      const months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
      dateEl.textContent = `${days[now.getDay()]} ${months[now.getMonth()]} ${now.getDate()}`;
    }
  }
  if (customEl) {
    const show = !!ws.custom && ws.customText;
    customEl.style.display = show ? '' : 'none';
    if (show) customEl.textContent = ws.customText;
  }
  if (battEl) {
    battEl.style.display = ws.batt !== false ? '' : 'none';
    if (ws.batt !== false && navigator.getBattery) {
      navigator.getBattery().then(b => {
        const pct = Math.round(b.level * 100);
        const icon = b.charging ? 'âš¡' : pct > 70 ? 'ğŸ”‹' : pct > 30 ? 'ğŸª«' : 'ğŸ”´';
        battEl.textContent = `${icon} ${pct}%`;
      }).catch(() => { battEl.textContent = 'ğŸ”‹ N/A'; });
    } else if (battEl && ws.batt === false) { battEl.textContent = ''; }
  }

  // (preview removed)
}
setInterval(updateNavbarInfo, 10000);
/*document.addEventListener('DOMContentLoaded', () => { updateNavbarInfo(); buildChangelog(); });*/

// ============================================================
// CLICK EFFECTS
// ============================================================
let clickEffectsEnabled = localStorage.getItem('ngg_click_effects') === 'true';
let clickEffectStyle = localStorage.getItem('ngg_click_style') || 'both';

function toggleClickEffects(val) {
clickEffectsEnabled = val;
localStorage.setItem('ngg_click_effects', val);
}
function setClickEffectStyle(val) {
clickEffectStyle = val;
localStorage.setItem('ngg_click_style', val);
document.querySelectorAll('#click-effect-grid .bg-chip').forEach(c => c.classList.toggle('active', c.dataset.ce === val));
}
function spawnUIClickEffect(e) {
if (isPerfMode || !clickEffectsEnabled) return;
const x = e.clientX, y = e.clientY;
const accent = getComputedStyle(document.body).getPropertyValue('--accent').trim();
const accent2 = getComputedStyle(document.body).getPropertyValue('--accent2').trim();
const accent3 = getComputedStyle(document.body).getPropertyValue('--accent3').trim();
const gold = getComputedStyle(document.body).getPropertyValue('--gold').trim();
const style = clickEffectStyle;

// PARTICLES
if (style === 'particles' || style === 'both') {
for (let i = 0; i < 12; i++) {
const p = document.createElement('div');
p.className = 'click-particle';
const angle = (i / 12) * Math.PI * 2;
const dist = 30 + Math.random() * 40;
const size = 4 + Math.random() * 5;
p.style.cssText = `left:${x}px;top:${y}px;width:${size}px;height:${size}px;background:${[accent,accent2,accent3][Math.floor(Math.random()*3)]};--tx:${Math.cos(angle)*dist}px;--ty:${Math.sin(angle)*dist}px;--dur:${0.4+Math.random()*0.3}s;margin-left:-${size/2}px;margin-top:-${size/2}px`;
document.body.appendChild(p);
setTimeout(() => p.remove(), 700);
}
}

// RIPPLE
if (style === 'ripple' || style === 'both') {
const r = document.createElement('div');
r.className = 'click-ripple';
const sz = 40;
r.style.cssText = `left:${x}px;top:${y}px;width:${sz}px;height:${sz}px;margin-left:-${sz/2}px;margin-top:-${sz/2}px;border-color:${accent}`;
document.body.appendChild(r);
setTimeout(() => r.remove(), 600);
}

// SPARKS â€” thin fast lines shooting out
if (style === 'sparks') {
for (let i = 0; i < 10; i++) {
const s = document.createElement('div');
s.className = 'click-particle';
const angle = (i / 10) * Math.PI * 2;
const dist = 50 + Math.random() * 30;
const w = 2, h = 8 + Math.random() * 8;
s.style.cssText = `left:${x}px;top:${y}px;width:${w}px;height:${h}px;border-radius:1px;background:${Math.random()>.5?accent:gold};--tx:${Math.cos(angle)*dist}px;--ty:${Math.sin(angle)*dist}px;--dur:${0.3+Math.random()*0.2}s;margin-left:-1px;margin-top:-4px;transform-origin:center`;
document.body.appendChild(s);
setTimeout(() => s.remove(), 600);
}
// small bright center flash
const flash = document.createElement('div');
flash.style.cssText = `position:fixed;left:${x}px;top:${y}px;width:14px;height:14px;border-radius:50%;background:${accent};margin:-7px 0 0 -7px;z-index:9999;opacity:1;transition:all 0.25s ease;pointer-events:none`;
document.body.appendChild(flash);
requestAnimationFrame(()=>{flash.style.opacity='0';flash.style.transform='scale(3)';});
setTimeout(() => flash.remove(), 300);
}

// CONFETTI â€” colourful squares tumbling down
if (style === 'confetti') {
const colors = [accent, accent2, accent3, gold, '#ff6b6b', '#51cf66'];
for (let i = 0; i < 18; i++) {
const c = document.createElement('div');
const size = 5 + Math.random() * 6;
const tx = (Math.random() - 0.5) * 120;
const ty = 40 + Math.random() * 80;
const rot = Math.random() * 720;
c.style.cssText = `position:fixed;left:${x}px;top:${y}px;width:${size}px;height:${size}px;background:${colors[Math.floor(Math.random()*colors.length)]};margin-left:-${size/2}px;margin-top:-${size/2}px;z-index:9999;pointer-events:none;border-radius:${Math.random()>.5?'50%':'2px'};transition:all ${0.6+Math.random()*0.4}s cubic-bezier(0.25,0.46,0.45,0.94);opacity:1`;
document.body.appendChild(c);
requestAnimationFrame(()=>{ c.style.transform = `translate(${tx}px,${ty}px) rotate(${rot}deg)`; c.style.opacity = '0'; });
setTimeout(() => c.remove(), 1100);
}
}

// STARS â€” â˜… symbols floating upward
if (style === 'stars') {
for (let i = 0; i < 8; i++) {
const s = document.createElement('div');
s.style.cssText = `position:fixed;left:${x + (Math.random()-0.5)*60}px;top:${y}px;font-size:${12+Math.random()*10}px;z-index:9999;pointer-events:none;color:${[gold,accent,accent2][Math.floor(Math.random()*3)]};transition:all ${0.7+Math.random()*0.4}s ease-out;opacity:1;user-select:none`;
s.textContent = ['â˜…','âœ¦','âœ§','â­'][Math.floor(Math.random()*4)];
document.body.appendChild(s);
requestAnimationFrame(()=>{ s.style.transform = `translateY(-${50+Math.random()*40}px) rotate(${(Math.random()-.5)*60}deg) scale(0.3)`; s.style.opacity = '0'; });
setTimeout(() => s.remove(), 1200);
}
}
}
document.addEventListener('click', spawnUIClickEffect);

// ============================================================
// AUTO PERFORMANCE MODE (slow page detection + tab visibility)
// ============================================================
let autoPerfEnabled = localStorage.getItem('ngg_auto_perf') !== 'false';
let tabPerfEnabled = localStorage.getItem('ngg_tab_perf') !== 'false';
let userHadPerfOn = false;
let fpsFrames = 0, fpsLast = 0, fpsSlow = 0, fpsReady = false;

function toggleAutoPerf(val) {
autoPerfEnabled = val;
localStorage.setItem('ngg_auto_perf', val);
}
function toggleTabPerf(val) {
tabPerfEnabled = val;
localStorage.setItem('ngg_tab_perf', val);
}

// FPS monitor for auto-perf â€” starts after 5s grace period so bg can settle
function monitorFPS() {
fpsFrames++;
const now = performance.now();
if (!fpsReady) { fpsLast = now; requestAnimationFrame(monitorFPS); return; }
if (now - fpsLast >= 2000) {
const fps = fpsFrames / ((now - fpsLast) / 1000);
fpsFrames = 0; fpsLast = now;
if (autoPerfEnabled && !isPerfMode && fps < 20) {
fpsSlow++;
if (fpsSlow >= 2) { applyPerfMode(true); showToast('âš¡ Auto Performance Mode enabled (low FPS)',''); }
} else { fpsSlow = 0; }
}
requestAnimationFrame(monitorFPS);
}

// Tab visibility â€” guard against firing during initial page load
let tabPerfReady = false;
setTimeout(() => { tabPerfReady = true; }, 2000);
document.addEventListener('visibilitychange', () => {
if (!tabPerfEnabled || !tabPerfReady) return;
if (document.hidden) {
userHadPerfOn = isPerfMode;
if (!isPerfMode) applyPerfMode(true);
} else {
if (!userHadPerfOn) applyPerfMode(false);
}
});

// ============================================================
// NAVBAR EDGE SCROLL
// ============================================================
(function(){
const tabs=document.getElementById('navbar-tabs'); if(!tabs)return;
let scrollRAF=null,scrollSpeed=0;
const EDGE=80,MAX_SPEED=12;
function onMouseMove(e){const rect=tabs.getBoundingClientRect();const x=e.clientX-rect.left;const w=rect.width;if(x<0||x>w){scrollSpeed=0;return;}if(x<EDGE){scrollSpeed=-MAX_SPEED*(1-x/EDGE);}else if(x>w-EDGE){scrollSpeed=MAX_SPEED*(1-(w-x)/EDGE);}else{scrollSpeed=0;}}
tabs.addEventListener('mousemove',onMouseMove);
tabs.addEventListener('mouseleave',()=>{scrollSpeed=0;});
function loop(){if(scrollSpeed!==0)tabs.scrollLeft+=scrollSpeed;scrollRAF=requestAnimationFrame(loop);}
scrollRAF=requestAnimationFrame(loop);
})();


// ============================================================
// TAB DRAG REORDER
// ============================================================
// Locked tabs that can never be moved
const LOCKED_TABS = ['home', 'settings'];
// Default order of moveable tabs
const DEFAULT_TAB_ORDER = ['games','websites','eaglercraft','partnerships','medieval','ourlinks','proxy','other','favorites'];

let tabOrder = JSON.parse(localStorage.getItem('ngg_tab_order') || 'null') || [...DEFAULT_TAB_ORDER];

function applyTabOrder() {
  const container = document.getElementById('navbar-tabs');
  if (!container) return;
  const settingsBtn = container.querySelector('[data-page="settings"]');
  // Re-insert each tab in order before settings (home stays first naturally)
  tabOrder.forEach(page => {
    const btn = container.querySelector(`[data-page="${page}"]`);
    if (btn) container.insertBefore(btn, settingsBtn);
  });
  // Make moveable tabs draggable directly in navbar
  initNavbarTabDrag();
}

function initNavbarTabDrag() {
  const container = document.getElementById('navbar-tabs');
  if (!container) return;
  let dragSrc = null;

  // Drop indicator line
  let indicator = document.getElementById('tab-drop-indicator');
  if (!indicator) {
    indicator = document.createElement('div');
    indicator.id = 'tab-drop-indicator';
    indicator.style.cssText = 'position:absolute;top:6px;bottom:6px;width:3px;border-radius:2px;background:var(--accent);box-shadow:0 0 8px var(--accent);pointer-events:none;display:none;z-index:100';
    container.style.position = 'relative';
    container.appendChild(indicator);
  }

  function showIndicator(targetTab, after) {
    const containerRect = container.getBoundingClientRect();
    const tabRect = targetTab.getBoundingClientRect();
    const x = after
      ? tabRect.right - containerRect.left + container.scrollLeft + 2
      : tabRect.left - containerRect.left + container.scrollLeft - 4;
    indicator.style.left = x + 'px';
    indicator.style.display = 'block';
  }
  function hideIndicator() { indicator.style.display = 'none'; }

  container.querySelectorAll('.nav-tab').forEach(tab => {
    const page = tab.dataset.page;
    if (LOCKED_TABS.includes(page)) { tab.draggable = false; return; }
    tab.draggable = true;
    const clone = tab.cloneNode(true);
    tab.parentNode.replaceChild(clone, tab);
    clone.draggable = true;

    clone.addEventListener('dragstart', e => {
      dragSrc = page;
      clone.classList.add('dragging');
      e.dataTransfer.setData('text/plain', page);
      e.dataTransfer.effectAllowed = 'move';
    });
    clone.addEventListener('dragend', () => {
      dragSrc = null;
      clone.classList.remove('dragging');
      hideIndicator();
    });
    clone.addEventListener('dragover', e => {
      // Only allow drop if hovering over another .nav-tab, not the navbar itself
      if (!e.target.closest('.nav-tab')) { e.dataTransfer.dropEffect = 'none'; return; }
      e.preventDefault();
      if (!dragSrc || dragSrc === page || LOCKED_TABS.includes(page)) return;
      const rect = clone.getBoundingClientRect();
      showIndicator(clone, e.clientX > rect.left + rect.width / 2);
    });
    clone.addEventListener('drop', e => {
      // Reject drops onto non-tab areas
      if (!e.target.closest('.nav-tab')) return;
      e.preventDefault();
      hideIndicator();
      const fromPage = e.dataTransfer.getData('text/plain');
      if (!fromPage || fromPage === page || LOCKED_TABS.includes(page)) return;
      const fromIdx = tabOrder.indexOf(fromPage);
      if (fromIdx === -1 || tabOrder.indexOf(page) === -1) return;
      const rect = clone.getBoundingClientRect();
      const after = e.clientX > rect.left + rect.width / 2;
      tabOrder.splice(fromIdx, 1);
      const toIdx = tabOrder.indexOf(page);
      tabOrder.splice(after ? toIdx + 1 : toIdx, 0, fromPage);
      saveTabOrder();
      buildTabOrderList();
    });
  });

  container.addEventListener('dragleave', e => {
    if (!container.contains(e.relatedTarget)) hideIndicator();
  });
  // Prevent drop on the container background (non-tab areas)
  container.addEventListener('dragover', e => {
    if (!e.target.closest('.nav-tab')) e.dataTransfer.dropEffect = 'none';
  });
}

function buildTabOrderList() {
  const list = document.getElementById('tab-order-list');
  if (!list) return;
  list.innerHTML = '';
  let dragSrcRow = null;

  tabOrder.forEach((page, idx) => {
    const btn = document.querySelector(`[data-page="${page}"]`);
    if (!btn) return;
    const label = btn.textContent.trim();
    const icon = btn.querySelector('.tab-icon')?.textContent || '';

    // Wrapper with indicator
    const wrapper = document.createElement('div');
    wrapper.style.cssText = 'position:relative';

    // Drop indicator line for settings list
    const lineIndicator = document.createElement('div');
    lineIndicator.style.cssText = 'height:2px;border-radius:2px;background:var(--accent);box-shadow:0 0 6px var(--accent);display:none;margin:0 4px;transition:opacity 0.1s';

    const row = document.createElement('div');
    row.className = 'setting-row';
    row.style.cssText = 'cursor:grab;user-select:none;padding:8px 12px;border-radius:var(--radius-sm);transition:background 0.15s;border:1.5px solid transparent';
    row.draggable = true;
    row.dataset.page = page;
    row.innerHTML = `<div style="display:flex;align-items:center;gap:10px;flex:1"><span style="font-size:18px;opacity:0.4">â ¿</span><span style="font-size:15px">${icon}</span><span style="font-size:14px;color:var(--text)">${label.replace(icon,'').trim()}</span></div><div style="display:flex;gap:4px"><button class="s-btn" style="padding:4px 8px;font-size:12px" onclick="moveTab('${page}',-1)">â–²</button><button class="s-btn" style="padding:4px 8px;font-size:12px" onclick="moveTab('${page}',1)">â–¼</button></div>`;

    lineIndicator.dataset.indicator = '1';

    row.addEventListener('dragstart', e => {
      dragSrcRow = page;
      e.dataTransfer.setData('text/plain', page);
      
    });
    row.addEventListener('dragend', () => {
      
      dragSrcRow = null;
      list.querySelectorAll('[data-indicator]').forEach(el => el.style.display = 'none');
    });
    row.addEventListener('dragover', e => {
      e.preventDefault();
      if (!dragSrcRow || dragSrcRow === page) return;
      list.querySelectorAll('[data-indicator]').forEach(el => el.style.display = 'none');
      const rect = row.getBoundingClientRect();
      const after = e.clientY > rect.top + rect.height / 2;
      if (after) { wrapper.appendChild(lineIndicator); } else { wrapper.insertBefore(lineIndicator, row); }
      lineIndicator.style.display = 'block';
    });
    row.addEventListener('dragleave', e => {
      if (!wrapper.contains(e.relatedTarget)) lineIndicator.style.display = 'none';
    });
    row.addEventListener('drop', e => {
      e.preventDefault();
      list.querySelectorAll('[data-indicator]').forEach(el => el.style.display = 'none');
      const fromPage = e.dataTransfer.getData('text/plain');
      const toPage = page;
      if (fromPage === toPage) return;
      const fromIdx = tabOrder.indexOf(fromPage);
      const after = e.clientY > row.getBoundingClientRect().top + row.getBoundingClientRect().height / 2;
      tabOrder.splice(fromIdx, 1);
      const toIdx = tabOrder.indexOf(toPage);
      tabOrder.splice(after ? toIdx + 1 : toIdx, 0, fromPage);
      saveTabOrder();
      buildTabOrderList();
    });

    wrapper.appendChild(row);
    list.appendChild(wrapper);
  });
}

function moveTab(page, dir) {
  const idx = tabOrder.indexOf(page);
  const newIdx = idx + dir;
  if (newIdx < 0 || newIdx >= tabOrder.length) return;
  tabOrder.splice(idx, 1);
  tabOrder.splice(newIdx, 0, page);
  saveTabOrder();
  buildTabOrderList();
}

function saveTabOrder() {
  localStorage.setItem('ngg_tab_order', JSON.stringify(tabOrder));
  applyTabOrder();
}

function resetTabOrder() {
  tabOrder = [...DEFAULT_TAB_ORDER];
  localStorage.removeItem('ngg_tab_order');
  applyTabOrder();
  buildTabOrderList();
  showToast('Tab order reset','success');
}

// ============================================================
// PROXY FUNCTIONS
// ============================================================
const PROXY_BASE = 'https://67-blue.vercel.app/api/proxy?url=';

function loadProxy() {
  const input = document.getElementById('proxy-input');
  if (!input) return;
  let url = input.value.trim();
  if (!url) return;
  // Strip the proxy base if user somehow has it in the bar already
  if (url.startsWith(PROXY_BASE)) url = decodeURIComponent(url.slice(PROXY_BASE.length));
  if (!url.startsWith('http://') && !url.startsWith('https://')) url = 'https://' + url;
  // Show clean URL in the bar, load through proxy internally
  input.value = url;
  proxyLoad(PROXY_BASE + encodeURIComponent(url));
}

function proxyLoad(proxyUrl) {
  const frame = document.getElementById('proxy-frame');
  const placeholder = document.getElementById('proxy-placeholder');
  if (!frame) return;
  // Load iframe with the proxy URL but don't show it in the input bar
  frame.src = proxyUrl;
  frame.style.display = 'block';
  if (placeholder) placeholder.style.display = 'none';
  showToast('Loading... (some sites block embedding)','');
}

function proxyNavBack() {
  const frame = document.getElementById('proxy-frame');
  if (frame) try { frame.contentWindow.history.back(); } catch(e) { showToast('Cannot navigate (cross-origin)','error'); }
}

function proxyNavRefresh() {
  const frame = document.getElementById('proxy-frame');
  if (frame && frame.src && frame.src !== 'about:blank') {
    frame.src = frame.src;
  }
}

function proxyOpenBlank() {
  const frame = document.getElementById('proxy-frame');
  const url = frame?.src;
  if (!url || url === 'about:blank') { showToast('Load a page first','error'); return; }
  const w = window.open('about:blank','_blank');
  if (w) {
    w.document.open();
    w.document.write(`<iframe src="${url}" style="width:100%;height:100%;border:none;position:fixed;inset:0"></iframe>`);
    w.document.close();
  }
}

// ============================================================
// KEYBOARD SHORTCUTS
// ============================================================
document.addEventListener('keydown',e=>{
if(e.key==='Escape')clearSearch();
if((e.ctrlKey||e.metaKey)&&e.key==='k'){e.preventDefault();document.getElementById('search').focus();}
});
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nolan's And Grayson's Games</title>
<link rel="icon" href="https://nolangraysongames.com/Logo.png" type="image/x-icon">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;500;600;700&family=Exo+2:wght@300;400;600;700;800&display=swap" rel="stylesheet">

<style>
/* ===== CSS VARIABLES / THEMES ===== */
:root {
  --bg: #0a0a0f;
  --bg2: #111118;
  --surface: rgba(255,255,255,0.04);
  --surface2: rgba(255,255,255,0.08);
  --border: rgba(255,255,255,0.12);
  --border-strong: rgba(255,255,255,0.25);
  --accent: #7c5cfc;
  --accent2: #5eead4;
  --accent3: #f472b6;
  --text: #e2e8f0;
  --text-muted: #94a3b8;
  --text-dim: #475569;
  --danger: #f87171;
  --gold: #fbbf24;
  --nav-h: 64px;
  --radius: 12px;
  --radius-sm: 8px;
  --shadow: 0 4px 24px rgba(0,0,0,0.5);
  --glow: 0 0 20px rgba(124,92,252,0.3);
}

body.theme-neon {
  --bg: #050510;
  --bg2: #0a0a1a;
  --surface: rgba(57,255,20,0.05);
  --surface2: rgba(57,255,20,0.1);
  --border: rgba(57,255,20,0.2);
  --border-strong: rgba(57,255,20,0.5);
  --accent: #39ff14;
  --accent2: #00eaff;
  --accent3: #ff00ff;
  --text: #e0ffe0;
  --text-muted: #7dff6b;
  --text-dim: #3a7a33;
  --gold: #ffd700;
  --glow: 0 0 20px rgba(57,255,20,0.4);
}

body.theme-midnight {
  --bg: #020617;
  --bg2: #050c23;
  --surface: rgba(99,102,241,0.07);
  --surface2: rgba(99,102,241,0.14);
  --border: rgba(99,102,241,0.2);
  --border-strong: rgba(99,102,241,0.5);
  --accent: #818cf8;
  --accent2: #a5f3fc;
  --accent3: #c084fc;
  --text: #e0e7ff;
  --text-muted: #a5b4fc;
  --text-dim: #3730a3;
  --gold: #fde68a;
  --glow: 0 0 20px rgba(99,102,241,0.35);
}

body.theme-sunset {
  --bg: #1a0a0a;
  --bg2: #2a1010;
  --surface: rgba(255,107,107,0.06);
  --surface2: rgba(255,107,107,0.12);
  --border: rgba(255,107,107,0.2);
  --border-strong: rgba(255,107,107,0.45);
  --accent: #ff6b6b;
  --accent2: #ffd93d;
  --accent3: #a29bfe;
  --text: #fff5e1;
  --text-muted: #ffb3b3;
  --text-dim: #7a3a3a;
  --gold: #ffd93d;
  --glow: 0 0 20px rgba(255,107,107,0.35);
}

body.theme-ocean {
  --bg: #020d1a;
  --bg2: #041524;
  --surface: rgba(5,191,219,0.06);
  --surface2: rgba(5,191,219,0.12);
  --border: rgba(5,191,219,0.2);
  --border-strong: rgba(5,191,219,0.45);
  --accent: #05bfdb;
  --accent2: #00d9ff;
  --accent3: #4ecdc4;
  --text: #e8f9fd;
  --text-muted: #7ee8f5;
  --text-dim: #1e5a6b;
  --gold: #ffd93d;
  --glow: 0 0 20px rgba(5,191,219,0.35);
}

body.theme-forest {
  --bg: #020f02;
  --bg2: #041804;
  --surface: rgba(111,185,143,0.06);
  --surface2: rgba(111,185,143,0.12);
  --border: rgba(111,185,143,0.2);
  --border-strong: rgba(111,185,143,0.45);
  --accent: #6fb98f;
  --accent2: #90ee90;
  --accent3: #98d8c8;
  --text: #d4edda;
  --text-muted: #90c9a0;
  --text-dim: #2d5a3d;
  --gold: #ffd700;
  --glow: 0 0 20px rgba(111,185,143,0.35);
}

/* ===== RESET & BASE ===== */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

body {
  background: var(--bg);
  color: var(--text);
  font-family: 'Exo 2', sans-serif;
  font-weight: 400;
  min-height: 100vh;
  overflow-x: hidden;
  transition: background 0.5s ease, color 0.5s ease;
}

body.perf-mode * { transition: none !important; animation: none !important; }
body.perf-mode canvas#bgCanvas { display: none; }
body.perf-mode .bg-overlay { display: none; }

/* ===== BACKGROUND CANVAS ===== */
#bgCanvas {
  position: fixed; top: 0; left: 0;
  width: 100%; height: 100%;
  z-index: 0; pointer-events: none;
  transition: opacity 0.5s;
}
#bgCanvas.interactive { pointer-events: all; cursor: crosshair; }

.bg-overlay {
  position: fixed; top: 0; left: 0;
  width: 100%; height: 100%;
  z-index: 0; pointer-events: none;
  background: radial-gradient(ellipse at 20% 50%, rgba(124,92,252,0.08) 0%, transparent 60%),
              radial-gradient(ellipse at 80% 20%, rgba(94,234,212,0.06) 0%, transparent 50%);
  transition: background 0.5s ease;
}

/* ===== NAVBAR ===== */
:root { --nav-h: 108px; }

#navbar {
  position: fixed; top: 0; left: 0; right: 0;
  z-index: 1000;
  display: flex; flex-direction: column;
  background: rgba(10,10,15,0.92);
  backdrop-filter: blur(24px) saturate(1.8);
  -webkit-backdrop-filter: blur(24px) saturate(1.8);
  border-bottom: 1px solid var(--border);
  transition: background 0.5s, border-color 0.5s;
}

/* ---- Top row: logo + search + perf btn ---- */
#navbar-top {
  display: flex; align-items: center;
  padding: 0 18px; height: 52px;
  gap: 14px;
  border-bottom: 1px solid var(--border);
}

#navbar-logo {
  flex-shrink: 0; cursor: pointer;
  display: flex; align-items: center; gap: 10px;
  text-decoration: none;
}
#navbar-logo img { height: 32px; width: auto; }
#navbar-logo-text {
  font-family: 'Rajdhani', sans-serif;
  font-weight: 700; font-size: 17px; letter-spacing: 0.5px;
  color: var(--text); white-space: nowrap;
}

#navbar-search {
  flex: 1; position: relative;
  display: flex; align-items: center;
  max-width: 480px; margin: 0 auto;
}
#search {
  width: 100%;
  background: var(--surface);
  border: 1.5px solid var(--border);
  color: var(--text);
  padding: 7px 36px 7px 38px;
  border-radius: 999px;
  font-family: 'Exo 2', sans-serif;
  font-size: 13px;
  transition: all 0.3s ease;
  outline: none;
}
#search:focus {
  border-color: var(--accent);
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent) 20%, transparent);
  background: var(--surface2);
}
#search::placeholder { color: var(--text-dim); }
#search-icon {
  position: absolute; left: 12px;
  color: var(--text-dim); font-size: 15px;
  pointer-events: none; line-height: 1;
}
#search-clear {
  position: absolute; right: 12px;
  color: var(--text-dim); cursor: pointer;
  font-size: 18px; line-height: 1;
  transition: color 0.2s;
}
#search-clear:hover { color: var(--danger); }

/* Perf mode btn */
#perf-btn {
  flex-shrink: 0;
  width: 34px; height: 34px;
  border-radius: var(--radius-sm);
  background: var(--surface); border: 1px solid var(--border);
  color: var(--text-muted); cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  font-size: 15px; transition: all 0.25s;
}
#perf-btn:hover { color: var(--accent); border-color: var(--accent); }
#perf-btn.active { color: var(--accent2); border-color: var(--accent2); background: var(--surface2); }

/* ---- Bottom row: category pill bar ---- */
#navbar-tabs {
  display: flex; align-items: center;
  height: 56px;
  padding: 0 14px;
  gap: 6px;
  overflow-x: auto;
  scrollbar-width: none;
  -webkit-overflow-scrolling: touch;
  /* fade edges */
  -webkit-mask-image: linear-gradient(to right, transparent 0px, black 24px, black calc(100% - 24px), transparent 100%);
  mask-image: linear-gradient(to right, transparent 0px, black 24px, black calc(100% - 24px), transparent 100%);
}
#navbar-tabs::-webkit-scrollbar { display: none; }

.nav-tab {
  display: flex; align-items: center; gap: 7px;
  padding: 0 18px; height: 38px;
  border-radius: 999px;
  font-family: 'Rajdhani', sans-serif;
  font-weight: 700; font-size: 13px;
  color: var(--text-muted); cursor: pointer;
  white-space: nowrap;
  border: 1.5px solid transparent;
  background: var(--surface);
  transition: all 0.22s ease;
  text-transform: uppercase; letter-spacing: 0.8px;
  flex-shrink: 0;
  position: relative;
  outline: none;
}
.nav-tab:hover {
  color: var(--text);
  background: var(--surface2);
  border-color: var(--border-strong);
  transform: translateY(-1px);
}
.nav-tab.active {
  color: var(--bg);
  background: var(--accent);
  border-color: var(--accent);
  box-shadow: 0 0 14px color-mix(in srgb, var(--accent) 50%, transparent);
}
.nav-tab .tab-icon { font-size: 15px; }

/* ===== MAIN CONTENT ===== */
#main {
  position: relative; z-index: 1;
  padding-top: var(--nav-h);
  min-height: 100vh;
}

/* ===== PAGES ===== */
.page { display: none !important; }
.page.active { display: block !important; }
#page-home.active { display: grid !important; }
#page-proxy.active { display: flex !important; }
#page-favorites.active { display: block !important; }

/* ===== HOME PAGE ===== */
#page-home {
  display: grid;
  grid-template-columns: 220px 1fr 280px;
  grid-template-rows: auto 1fr;
  gap: 20px;
  padding: 24px;
  min-height: calc(100vh - var(--nav-h));
}

/* Home hero - spans all cols */
.home-hero {
  grid-column: 1 / -1;
  display: flex; flex-direction: column; align-items: center;
  padding: 40px 20px 20px;
  position: relative; overflow: hidden;
}
.home-hero img.hero-title {
  max-width: min(600px, 90%); height: auto;
  filter: drop-shadow(0 0 30px var(--accent));
  animation: heroFloat 3s ease-in-out infinite;
}
@keyframes heroFloat {
  0%,100% { transform: translateY(0) rotate(0deg); }
  50% { transform: translateY(-8px) rotate(0.5deg); }
}
.home-hero-sub {
  font-family: 'Rajdhani', sans-serif;
  font-weight: 500; font-size: 16px;
  color: var(--text-muted); letter-spacing: 3px;
  text-transform: uppercase; margin-top: 12px;
  animation: fadeUp 1s ease 0.3s both;
}
@keyframes fadeUp {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

/* Home left nav */
.home-left {
  display: flex; flex-direction: column; gap: 8px;
  padding-top: 8px;
}
.home-nav-btn {
  display: flex; align-items: center; gap: 10px;
  padding: 12px 16px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  color: var(--text); cursor: pointer;
  font-family: 'Rajdhani', sans-serif;
  font-weight: 600; font-size: 15px;
  text-transform: uppercase; letter-spacing: 0.5px;
  transition: all 0.25s ease;
  text-align: left;
}
.home-nav-btn:hover {
  background: var(--surface2);
  border-color: var(--accent);
  color: var(--accent);
  transform: translateX(4px);
  box-shadow: var(--glow);
}
.home-nav-btn .btn-icon { font-size: 18px; flex-shrink: 0; }
.home-nav-divider {
  height: 1px; background: var(--border);
  margin: 4px 0;
}

/* Home center */
.home-center { }
.home-featured {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 20px;
  margin-bottom: 16px;
}
.home-featured h3 {
  font-family: 'Rajdhani', sans-serif;
  font-weight: 700; font-size: 18px;
  color: var(--accent); text-transform: uppercase;
  letter-spacing: 1px; margin-bottom: 16px;
  display: flex; align-items: center; gap: 8px;
}
.featured-grid {
  display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
  gap: 10px;
}
.featured-card {
  background: var(--surface2);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  padding: 12px; cursor: pointer;
  text-align: center; transition: all 0.25s;
  text-decoration: none;
}
.featured-card:hover {
  border-color: var(--accent);
  transform: translateY(-3px);
  box-shadow: var(--glow);
}
.featured-card .fc-icon { font-size: 28px; margin-bottom: 6px; }
.featured-card .fc-name {
  font-size: 12px; font-weight: 600;
  color: var(--text); line-height: 1.3;
}

.home-stats {
  display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;
}
.stat-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  padding: 14px; text-align: center;
}
.stat-num {
  font-family: 'Rajdhani', sans-serif;
  font-weight: 700; font-size: 28px;
  color: var(--accent);
}
.stat-label { font-size: 11px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px; }

/* Home right - changelog */
.home-right { }
.changelog-panel {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 20px; height: 100%;
}
.changelog-panel h3 {
  font-family: 'Rajdhani', sans-serif;
  font-weight: 700; font-size: 18px;
  color: var(--accent); text-transform: uppercase;
  letter-spacing: 1px; margin-bottom: 16px;
  display: flex; align-items: center; gap: 8px;
}
.cl-item {
  padding: 12px 0;
  border-bottom: 1px solid var(--border);
}
.cl-item:last-child { border-bottom: none; }
.cl-version {
  font-family: 'Rajdhani', sans-serif;
  font-weight: 700; font-size: 13px;
  color: var(--accent); margin-bottom: 2px;
}
.cl-date { font-size: 11px; color: var(--text-dim); margin-bottom: 6px; }
.cl-entry {
  font-size: 12px; color: var(--text-muted);
  display: flex; align-items: flex-start; gap: 6px;
  margin-bottom: 4px; line-height: 1.4;
}
.cl-entry::before { content: 'â–¸'; color: var(--accent); flex-shrink: 0; }
.cl-badge {
  display: inline-block; padding: 1px 6px;
  border-radius: 4px; font-size: 10px; font-weight: 700;
  text-transform: uppercase; letter-spacing: 0.5px;
}
.cl-badge.new { background: rgba(94,234,212,0.15); color: var(--accent2); }
.cl-badge.fix { background: rgba(248,113,113,0.15); color: var(--danger); }
.cl-badge.update { background: rgba(124,92,252,0.15); color: var(--accent); }

/* ===== SECTION HEADER ===== */
.section-header {
  padding: 24px 24px 0;
  display: flex; align-items: center; justify-content: space-between;
  margin-bottom: 0;
}
.section-title {
  font-family: 'Rajdhani', sans-serif;
  font-weight: 700; font-size: 28px;
  color: var(--text);
  display: flex; align-items: center; gap: 10px;
}
.section-title span { color: var(--text-dim); font-size: 18px; }
.section-count {
  font-size: 13px; color: var(--text-muted);
  background: var(--surface);
  border: 1px solid var(--border);
  padding: 4px 12px; border-radius: 999px;
}

/* ===== GRID LAYOUTS ===== */
.card-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  gap: 12px;
  padding: 20px 24px;
}
.card-grid.list-mode {
  grid-template-columns: 1fr;
  max-width: 800px;
}

/* ===== GAME CARD ===== */
.game-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  overflow: hidden; cursor: pointer;
  transition: all 0.25s ease;
  position: relative; text-decoration: none;
  display: block;
}
.game-card:hover {
  border-color: var(--accent);
  transform: translateY(-4px) scale(1.01);
  box-shadow: var(--shadow), var(--glow);
}
.game-card:active { transform: translateY(-1px) scale(1); }

.card-thumb {
  width: 100%; aspect-ratio: 16/9;
  background: var(--bg2);
  overflow: hidden; position: relative;
  display: flex; align-items: center; justify-content: center;
}
.card-thumb img {
  width: 100%; height: 100%;
  object-fit: cover;
  transition: transform 0.4s ease;
}
.game-card:hover .card-thumb img { transform: scale(1.05); }
.card-thumb-placeholder {
  font-size: 48px; opacity: 0.3;
}
.card-thumb-overlay {
  position: absolute; inset: 0;
  background: linear-gradient(to top, rgba(0,0,0,0.6) 0%, transparent 50%);
}
.card-fav {
  position: absolute; top: 8px; right: 8px;
  z-index: 2; font-size: 18px; cursor: pointer;
  color: rgba(255,255,255,0.3); transition: all 0.2s;
  text-shadow: 0 1px 3px rgba(0,0,0,0.5);
}
.card-fav:hover, .card-fav.active { color: var(--gold); }
.card-fav.animate { animation: favPop 0.35s ease; }
@keyframes favPop {
  0%,100% { transform: scale(1); }
  50% { transform: scale(1.5); }
}

.card-info { padding: 12px 14px 14px; }
.card-name {
  font-family: 'Rajdhani', sans-serif;
  font-weight: 700; font-size: 15px;
  color: var(--text); line-height: 1.3;
  margin-bottom: 4px;
}
.card-meta { font-size: 11px; color: var(--text-muted); }
.card-tag {
  display: inline-block; padding: 2px 7px;
  background: var(--surface2); border-radius: 4px;
  font-size: 10px; font-weight: 600;
  color: var(--accent); text-transform: uppercase;
  letter-spacing: 0.5px; margin-top: 6px;
}

/* ===== WEBSITE CARD ===== */
.site-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  overflow: hidden; cursor: pointer;
  transition: all 0.25s ease;
  position: relative; text-decoration: none; display: block;
}
.site-card:hover {
  border-color: var(--accent);
  transform: translateY(-3px);
  box-shadow: var(--shadow), var(--glow);
}
.site-preview {
  width: 100%; height: 80px;
  background: var(--bg2);
  display: flex; align-items: center; justify-content: center;
  position: relative; overflow: hidden;
}
.site-preview-bg {
  position: absolute; inset: 0;
  background: linear-gradient(135deg, var(--bg2) 0%, var(--surface2) 100%);
}
.site-favicon {
  width: 32px; height: 32px;
  border-radius: 8px; object-fit: contain;
  position: relative; z-index: 1;
}
.site-domain {
  position: absolute; bottom: 6px; left: 10px;
  font-size: 10px; color: var(--text-dim);
  font-family: monospace; z-index: 1;
}
.site-fav {
  position: absolute; top: 8px; right: 8px;
  z-index: 2; font-size: 16px; cursor: pointer;
  color: rgba(255,255,255,0.3); transition: all 0.2s;
}
.site-fav:hover, .site-fav.active { color: var(--gold); }
.site-fav.animate { animation: favPop 0.35s ease; }

.site-info { padding: 10px 12px 12px; }
.site-name {
  font-family: 'Rajdhani', sans-serif;
  font-weight: 700; font-size: 14px;
  color: var(--text); margin-bottom: 2px;
}
.site-name.blocked { color: var(--danger); text-decoration: line-through; }
.site-name.pageb { color: var(--accent2); }
.site-name.discord { color: #7289da; }

/* ===== SIMPLE LINK LIST (for categories like Partnerships, Medieval, etc.) ===== */
.link-list { padding: 12px 24px 24px; display: flex; flex-direction: column; gap: 6px; }
.link-row {
  display: flex; align-items: center;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  overflow: hidden; transition: all 0.25s;
  position: relative;
}
.link-row:hover {
  border-color: var(--accent);
  background: var(--surface2);
  transform: translateX(4px);
}
.link-row a {
  flex: 1; padding: 11px 16px;
  color: var(--text); text-decoration: none;
  font-size: 14px; display: block;
}
.link-row a.blocked { color: var(--danger); text-decoration: line-through; }
.link-row a.pageb { color: var(--accent2); }
.link-row a.discord { color: #7289da; }
.link-row-fav {
  padding: 0 14px; font-size: 18px;
  color: var(--text-dim); cursor: pointer;
  transition: all 0.2s; flex-shrink: 0;
}
.link-row-fav:hover, .link-row-fav.active { color: var(--gold); }
.link-row-fav.animate { animation: favPop 0.35s ease; }

/* ===== SEARCH OVERLAY ===== */
#search-results {
  position: fixed; top: var(--nav-h); left: 0; right: 0;
  background: rgba(10,10,15,0.97);
  backdrop-filter: blur(20px);
  z-index: 900; padding: 16px 24px;
  max-height: calc(100vh - var(--nav-h));
  overflow-y: auto; display: none;
  border-bottom: 1px solid var(--border);
}
#search-results.visible { display: block; }
#search-results h4 {
  font-family: 'Rajdhani', sans-serif;
  font-size: 14px; font-weight: 600;
  color: var(--text-muted); text-transform: uppercase;
  letter-spacing: 1px; margin-bottom: 10px;
}
.sr-item {
  display: flex; align-items: center; gap: 12px;
  padding: 10px 12px;
  background: var(--surface); border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  margin-bottom: 6px; cursor: pointer;
  text-decoration: none; color: var(--text);
  transition: all 0.2s;
}
.sr-item:hover { border-color: var(--accent); background: var(--surface2); }
.sr-icon { font-size: 18px; flex-shrink: 0; }
.sr-text { flex: 1; }
.sr-name { font-weight: 600; font-size: 14px; }
.sr-cat { font-size: 11px; color: var(--text-muted); }

/* ===== SETTINGS PAGE ===== */
#page-settings { padding: 24px; }
.settings-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
  gap: 16px; margin-top: 20px;
}
.settings-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 20px;
}
.settings-card h3 {
  font-family: 'Rajdhani', sans-serif;
  font-weight: 700; font-size: 17px;
  color: var(--accent); text-transform: uppercase;
  letter-spacing: 1px; margin-bottom: 16px;
  display: flex; align-items: center; gap: 8px;
}
.setting-row {
  display: flex; align-items: center; justify-content: space-between;
  padding: 10px 0;
  border-bottom: 1px solid var(--border);
}
.setting-row:last-child { border-bottom: none; padding-bottom: 0; }
.setting-label { font-size: 14px; color: var(--text); }
.setting-desc { font-size: 11px; color: var(--text-muted); margin-top: 2px; }

.s-select {
  background: var(--bg2); border: 1px solid var(--border);
  color: var(--text); padding: 7px 12px;
  border-radius: var(--radius-sm); font-family: 'Exo 2', sans-serif;
  font-size: 13px; cursor: pointer; outline: none;
  transition: border-color 0.2s;
}
.s-select:focus { border-color: var(--accent); }

.s-btn {
  background: var(--surface2); border: 1px solid var(--border);
  color: var(--text); padding: 7px 16px;
  border-radius: var(--radius-sm); font-family: 'Exo 2', sans-serif;
  font-size: 13px; cursor: pointer;
  transition: all 0.2s;
}
.s-btn:hover { border-color: var(--accent); color: var(--accent); }
.s-btn.danger:hover { border-color: var(--danger); color: var(--danger); }

/* Toggle switch */
.s-toggle {
  position: relative; width: 44px; height: 24px;
  flex-shrink: 0;
}
.s-toggle input { opacity: 0; width: 0; height: 0; }
.s-toggle-track {
  position: absolute; inset: 0;
  background: var(--surface2); border: 1px solid var(--border);
  border-radius: 12px; cursor: pointer;
  transition: all 0.3s;
}
.s-toggle-track::after {
  content: ''; position: absolute;
  top: 3px; left: 3px;
  width: 16px; height: 16px;
  background: var(--text-dim); border-radius: 50%;
  transition: all 0.3s;
}
.s-toggle input:checked + .s-toggle-track {
  background: var(--accent); border-color: var(--accent);
}
.s-toggle input:checked + .s-toggle-track::after {
  background: white; transform: translateX(20px);
}

/* Theme grid */
.theme-grid {
  display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px;
  margin-top: 4px;
}
.theme-chip {
  padding: 8px; border-radius: var(--radius-sm);
  border: 2px solid var(--border);
  cursor: pointer; text-align: center; transition: all 0.2s;
  font-size: 12px; font-weight: 600;
  font-family: 'Rajdhani', sans-serif;
  text-transform: uppercase;
}
.theme-chip:hover { transform: scale(1.05); }
.theme-chip.active { border-color: var(--accent); box-shadow: var(--glow); }

/* BG effect grid */
.bg-grid {
  display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px;
  margin-top: 4px;
}
.bg-chip {
  padding: 10px 8px; border-radius: var(--radius-sm);
  border: 1.5px solid var(--border);
  cursor: pointer; text-align: center; transition: all 0.2s;
  font-size: 12px; font-weight: 600; color: var(--text-muted);
  font-family: 'Rajdhani', sans-serif;
}
.bg-chip:hover { border-color: var(--accent); color: var(--text); }
.bg-chip.active { border-color: var(--accent); color: var(--accent); background: var(--surface2); }
.bg-chip .bc-icon { font-size: 20px; display: block; margin-bottom: 4px; }

/* ===== PROXY PAGE ===== */
#page-proxy {
  display: flex; align-items: center; justify-content: center;
  min-height: calc(100vh - var(--nav-h));
  padding: 40px;
}
.coming-soon-box {
  text-align: center; max-width: 500px;
}
.cs-icon { font-size: 80px; margin-bottom: 20px; }
.cs-title {
  font-family: 'Rajdhani', sans-serif;
  font-weight: 700; font-size: 48px;
  color: var(--text); letter-spacing: 2px;
  text-transform: uppercase; margin-bottom: 12px;
}
.cs-sub { font-size: 16px; color: var(--text-muted); line-height: 1.6; }
.cs-bar {
  margin: 30px auto; width: 200px; height: 4px;
  background: var(--surface2); border-radius: 2px;
  overflow: hidden;
}
.cs-bar-fill {
  height: 100%; width: 0; border-radius: 2px;
  background: linear-gradient(90deg, var(--accent), var(--accent2));
  animation: loadBar 2.5s ease-in-out infinite;
}
@keyframes loadBar {
  0% { width: 0; margin-left: 0; }
  50% { width: 60%; }
  100% { width: 0; margin-left: 100%; }
}

/* ===== FAVORITES PAGE ===== */
#page-favorites { padding: 24px; }
.empty-state {
  text-align: center; padding: 80px 20px;
  color: var(--text-muted);
}
.empty-state .es-icon { font-size: 64px; margin-bottom: 16px; opacity: 0.5; }
.empty-state h3 {
  font-family: 'Rajdhani', sans-serif;
  font-size: 24px; color: var(--text-dim); margin-bottom: 8px;
}
.empty-state p { font-size: 14px; }

/* ===== TOAST NOTIFICATIONS ===== */
#toast-container {
  position: fixed; bottom: 24px; right: 24px;
  z-index: 9999; display: flex; flex-direction: column; gap: 8px;
}
.toast {
  background: var(--bg2); border: 1px solid var(--border);
  border-radius: var(--radius-sm); padding: 12px 18px;
  font-size: 13px; color: var(--text);
  box-shadow: var(--shadow); animation: toastIn 0.3s ease;
  display: flex; align-items: center; gap: 8px;
  max-width: 300px;
}
.toast.success { border-color: var(--accent2); }
.toast.error { border-color: var(--danger); }
@keyframes toastIn {
  from { opacity: 0; transform: translateX(20px); }
  to { opacity: 1; transform: translateX(0); }
}

/* ===== FOOTER ===== */
.page-footer {
  padding: 24px; text-align: center;
  border-top: 1px solid var(--border);
  margin-top: 20px;
}
.footer-text { font-size: 12px; color: var(--text-dim); }
.footer-logos { display: flex; justify-content: center; gap: 12px; margin-top: 12px; }
.footer-logos img {
  width: 32px; height: 32px; border-radius: 6px;
  cursor: pointer; transition: all 0.2s; opacity: 0.7;
}
.footer-logos img:hover { opacity: 1; transform: scale(1.1); }

/* ===== SCROLLBAR ===== */
::-webkit-scrollbar { width: 6px; height: 6px; }
::-webkit-scrollbar-track { background: var(--bg); }
::-webkit-scrollbar-thumb { background: var(--border-strong); border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: var(--accent); }

/* ===== ANIMATIONS ===== */
.fade-in { animation: fadeUp 0.4s ease both; }
.fade-in-delay-1 { animation-delay: 0.05s; }
.fade-in-delay-2 { animation-delay: 0.1s; }
.fade-in-delay-3 { animation-delay: 0.15s; }

/* Stagger grid children */
.card-grid > * { animation: fadeUp 0.4s ease both; }
.card-grid > *:nth-child(1) { animation-delay: 0.02s; }
.card-grid > *:nth-child(2) { animation-delay: 0.04s; }
.card-grid > *:nth-child(3) { animation-delay: 0.06s; }
.card-grid > *:nth-child(4) { animation-delay: 0.08s; }
.card-grid > *:nth-child(5) { animation-delay: 0.1s; }
.card-grid > *:nth-child(6) { animation-delay: 0.12s; }
.card-grid > *:nth-child(n+7) { animation-delay: 0.14s; }

.link-list > * { animation: fadeUp 0.3s ease both; }
.link-list > *:nth-child(n) { animation-delay: calc(var(--i, 0) * 0.02s); }

/* ===== RIPPLE EFFECT ===== */
.ripple-overlay {
  position: fixed; inset: 0; pointer-events: none; z-index: 0;
}

/* ===== MOBILE ===== */
@media (max-width: 1024px) {
  #page-home {
    grid-template-columns: 1fr;
    grid-template-rows: auto;
  }
  .home-left { flex-direction: row; flex-wrap: wrap; }
  .home-nav-btn { flex: 1; min-width: 140px; }
  .home-right { order: -1; }
  .changelog-panel { max-height: 300px; overflow-y: auto; }
}

@media (max-width: 768px) {
  :root { --nav-h: 100px; }
  #navbar-logo-text { display: none; }
  #navbar-top { padding: 0 12px; gap: 10px; }
  #navbar-tabs { padding: 0 8px; gap: 4px; }
  .nav-tab { padding: 0 12px; font-size: 12px; height: 34px; }
  .card-grid { grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 10px; padding: 16px; }
  #page-home { padding: 12px; }
  .section-header { padding: 16px 16px 0; }
}

@media (max-width: 480px) {
  :root { --nav-h: 96px; }
  .nav-tab .tab-icon { display: none; }
  .nav-tab { padding: 0 10px; font-size: 11px; letter-spacing: 0; }
  .card-grid { grid-template-columns: repeat(2, 1fr); padding: 12px; }
  .home-stats { grid-template-columns: repeat(3, 1fr); }
  .settings-grid { grid-template-columns: 1fr; }
  #page-home { grid-template-columns: 1fr !important; }
}
</style>
</head>
<body class="theme-default">

<!-- Background Canvas -->
<canvas id="bgCanvas"></canvas>
<div class="bg-overlay" id="bgOverlay"></div>

<!-- Toast Container -->
<div id="toast-container"></div>

<!-- NAVBAR -->
<nav id="navbar">
  <!-- Top row: logo + search + perf -->
  <div id="navbar-top">
    <a id="navbar-logo" onclick="navigate('home')">
      <img src="https://nolangraysongames.com/Logo.png" alt="NGG Logo">
      <span id="navbar-logo-text">NGG</span>
    </a>
    <div id="navbar-search">
      <span id="search-icon">ğŸ”</span>
      <input type="text" id="search" placeholder="Search games, sites..." autocomplete="off" oninput="handleSearch(this.value)">
      <span id="search-clear" onclick="clearSearch()">Ã—</span>
    </div>
    <button id="perf-btn" onclick="togglePerfMode()" title="Toggle Performance Mode">âš¡</button>
  </div>

  <!-- Bottom row: category pills -->
  <div id="navbar-tabs">
    <button class="nav-tab" data-page="home"         onclick="navigate('home')">        <span class="tab-icon">ğŸ </span> Home</button>
    <button class="nav-tab" data-page="games"        onclick="navigate('games')">       <span class="tab-icon">ğŸ®</span> Games</button>
    <button class="nav-tab" data-page="websites"     onclick="navigate('websites')">    <span class="tab-icon">ğŸŒ</span> Websites</button>
    <button class="nav-tab" data-page="eaglercraft"  onclick="navigate('eaglercraft')"> <span class="tab-icon">â›</span> Eaglercraft</button>
    <button class="nav-tab" data-page="partnerships" onclick="navigate('partnerships')"><span class="tab-icon">ğŸ‘¥</span> Partnerships</button>
    <button class="nav-tab" data-page="medieval"     onclick="navigate('medieval')">    <span class="tab-icon">âš”ï¸</span> Medieval</button>
    <button class="nav-tab" data-page="ourlinks"     onclick="navigate('ourlinks')">    <span class="tab-icon">ğŸ•¹ï¸</span> Our Links</button>
    <button class="nav-tab" data-page="proxy"        onclick="navigate('proxy')">       <span class="tab-icon">ğŸ”’</span> Proxy</button>
    <button class="nav-tab" data-page="other"        onclick="navigate('other')">       <span class="tab-icon">ğŸ“¦</span> Other</button>
    <button class="nav-tab" data-page="favorites"    onclick="navigate('favorites')">   <span class="tab-icon">â­</span> Favorites</button>
    <button class="nav-tab" data-page="settings"     onclick="navigate('settings')">    <span class="tab-icon">âš™ï¸</span> Settings</button>
  </div>
</nav>

<!-- Search Results Overlay -->
<div id="search-results"></div>

<!-- MAIN CONTENT -->
<main id="main">

<!-- ===== HOME PAGE ===== -->
<div id="page-home" class="page">
  <div class="home-hero">
    <img class="hero-title" src="https://nolangraysongames.com/Title.png" alt="Nolan's and Grayson's Games">
    <div class="home-hero-sub">âš¡ Fast Â· Simple Â· Browser-Based Gaming âš¡</div>
  </div>

  <div class="home-left">
    <button class="home-nav-btn" onclick="navigate('games')"><span class="btn-icon">ğŸ®</span> Games</button>
    <button class="home-nav-btn" onclick="navigate('websites')"><span class="btn-icon">ğŸŒ</span> Websites</button>
    <button class="home-nav-btn" onclick="navigate('eaglercraft')"><span class="btn-icon">â›</span> Eaglercraft</button>
    <div class="home-nav-divider"></div>
    <button class="home-nav-btn" onclick="navigate('partnerships')"><span class="btn-icon">ğŸ‘¥</span> Partnerships</button>
    <button class="home-nav-btn" onclick="navigate('medieval')"><span class="btn-icon">âš”ï¸</span> Medieval</button>
    <button class="home-nav-btn" onclick="navigate('ourlinks')"><span class="btn-icon">ğŸ•¹ï¸</span> Our Links</button>
    <div class="home-nav-divider"></div>
    <button class="home-nav-btn" onclick="navigate('proxy')"><span class="btn-icon">ğŸ”’</span> Proxy</button>
    <button class="home-nav-btn" onclick="navigate('favorites')"><span class="btn-icon">â­</span> Favorites</button>
    <button class="home-nav-btn" onclick="navigate('settings')"><span class="btn-icon">âš™ï¸</span> Settings</button>
  </div>

  <div class="home-center">
    <div class="home-featured">
      <h3>âš¡ Quick Access</h3>
      <div class="featured-grid" id="featured-grid">
        <a class="featured-card" href="Slope.html" target="_blank"><div class="fc-icon">ğŸ‚</div><div class="fc-name">Slope</div></a>
        <a class="featured-card" href="Cookie Clicker.html" target="_blank"><div class="fc-icon">ğŸª</div><div class="fc-name">Cookie Clicker</div></a>
        <a class="featured-card" href="DOOM.html" target="_blank"><div class="fc-icon">ğŸ’€</div><div class="fc-name">DOOM</div></a>
        <a class="featured-card" href="Geometry Dash Lite.html" target="_blank"><div class="fc-icon">ğŸ”·</div><div class="fc-name">Geometry Dash</div></a>
        <a class="featured-card" href="ULTRAKILL.html" target="_blank"><div class="fc-icon">ğŸ©¸</div><div class="fc-name">ULTRAKILL</div></a>
        <a class="featured-card" href="Hollow Knight.html" target="_blank"><div class="fc-icon">ğŸ¦‹</div><div class="fc-name">Hollow Knight</div></a>
        <a class="featured-card" href="Smash Karts.html" target="_blank"><div class="fc-icon">ğŸï¸</div><div class="fc-name">Smash Karts</div></a>
        <a class="featured-card" href="1v1LoL.html" target="_blank"><div class="fc-icon">ğŸ¯</div><div class="fc-name">1v1.lol</div></a>
      </div>
    </div>
    <div class="home-stats">
      <div class="stat-card"><div class="stat-num" id="stat-games">140+</div><div class="stat-label">Games</div></div>
      <div class="stat-card"><div class="stat-num" id="stat-sites">100+</div><div class="stat-label">Sites</div></div>
      <div class="stat-card"><div class="stat-num" id="stat-views">â€”</div><div class="stat-label">Your Visits</div></div>
    </div>
  </div>

  <div class="home-right">
    <div class="changelog-panel">
      <h3>ğŸ“‹ Changelog</h3>
      <div class="cl-item">
        <div class="cl-version">v1.6.0 <span class="cl-badge new">NEW</span></div>
        <div class="cl-date">02/17/26</div>
        <div class="cl-entry">Full site redesign with multi-page navigation</div>
        <div class="cl-entry">Interactive background effects</div>
        <div class="cl-entry">Game & website card grid view</div>
        <div class="cl-entry">Import / Export data feature</div>
        <div class="cl-entry">Performance mode toggle</div>
        <div class="cl-entry">Reworked favorites system</div>
        <div class="cl-entry">Added Proxy page (Coming Soon)</div>
      </div>
      <div class="cl-item">
        <div class="cl-version">v1.5.07 <span class="cl-badge update">UPDATE</span></div>
        <div class="cl-date">02/09/26</div>
        <div class="cl-entry">Added Crazy Cattle 3D and more games</div>
        <div class="cl-entry">Added more Medieval Chronicles links</div>
        <div class="cl-entry">Settings inactivity timer added</div>
      </div>
      <div class="cl-item">
        <div class="cl-version">v1.5.0 <span class="cl-badge update">UPDATE</span></div>
        <div class="cl-date">01/01/26</div>
        <div class="cl-entry">Added 25+ new games including OMORI, Celeste, Cuphead</div>
        <div class="cl-entry">Added theme system</div>
        <div class="cl-entry">Search functionality improved</div>
      </div>
      <div class="cl-item">
        <div class="cl-version">v1.0.0 <span class="cl-badge fix">LAUNCH</span></div>
        <div class="cl-date">2024</div>
        <div class="cl-entry">Initial release</div>
      </div>
    </div>
  </div>

  <div style="grid-column:1/-1">
    <div class="page-footer">
      <div class="footer-text">ğŸ’¥ğŸ®ğŸš€ğŸ”¥ FAST â€¢ SIMPLE â€¢ BROWSER-BASED GAMING ğŸ”¥ğŸš€ğŸ®ğŸ’¥</div>
      <div class="footer-logos">
        <img src="https://www.nolangraysongames.com/Logo.png" alt="NGG" title="NGG Discord" onclick="window.open('https://discord.gg/nNCWgRJZ7v','_blank')">
        <img src="https://www.nolangraysongames.com/SquallLogo.png" alt="Squall" title="Squall Discord" onclick="window.open('https://discord.gg/RvRPeeFgus','_blank')">
      </div>
    </div>
  </div>
</div>

<!-- ===== GAMES PAGE ===== -->
<div id="page-games" class="page">
  <div class="section-header">
    <div class="section-title">ğŸ® Games <span id="games-count"></span></div>
  </div>
  <div class="card-grid" id="games-grid"></div>
  <div class="page-footer"><div class="footer-text">Click a game to play Â· â­ to favorite</div></div>
</div>

<!-- ===== WEBSITES PAGE ===== -->
<div id="page-websites" class="page">
  <div class="section-header">
    <div class="section-title">ğŸŒ Websites <span id="websites-count"></span></div>
  </div>
  <div class="card-grid" id="websites-grid"></div>
  <div class="page-footer"><div class="footer-text">ğŸŸ¡ = Recommended Â· âŒ = Blocked Â· ğŸ’™ = Discord</div></div>
</div>

<!-- ===== EAGLERCRAFT PAGE ===== -->
<div id="page-eaglercraft" class="page">
  <div class="section-header">
    <div class="section-title">â› Eaglercraft</div>
  </div>
  <div class="link-list" id="eaglercraft-list"></div>
</div>

<!-- ===== PARTNERSHIPS PAGE ===== -->
<div id="page-partnerships" class="page">
  <div class="section-header">
    <div class="section-title">ğŸ‘¥ Our Partnerships</div>
  </div>
  <div class="link-list" id="partnerships-list"></div>
</div>

<!-- ===== MEDIEVAL PAGE ===== -->
<div id="page-medieval" class="page">
  <div class="section-header">
    <div class="section-title">âš”ï¸ Medieval Chronicles Links</div>
  </div>
  <div class="link-list" id="medieval-list"></div>
</div>

<!-- ===== OUR LINKS PAGE ===== -->
<div id="page-ourlinks" class="page">
  <div class="section-header">
    <div class="section-title">ğŸ•¹ï¸ Our Links</div>
  </div>
  <div class="link-list" id="ourlinks-list"></div>
</div>

<!-- ===== PROXY PAGE ===== -->
<div id="page-proxy" class="page">
  <div class="coming-soon-box">
    <div class="cs-icon">ğŸ”’</div>
    <div class="cs-title">Proxy</div>
    <div class="cs-sub">We're working on something special.<br>A built-in proxy experience is coming soon to NGG.</div>
    <div class="cs-bar"><div class="cs-bar-fill"></div></div>
    <div style="font-size:13px;color:var(--text-dim);">Check back for updates!</div>
  </div>
</div>

<!-- ===== OTHER PAGE ===== -->
<div id="page-other" class="page">
  <div class="section-header">
    <div class="section-title">ğŸ“¦ Other</div>
  </div>
  <div class="link-list" id="other-list"></div>
</div>

<!-- ===== FAVORITES PAGE ===== -->
<div id="page-favorites" class="page">
  <div class="section-header">
    <div class="section-title">â­ Favorites</div>
  </div>
  <div id="favorites-content"></div>
</div>

<!-- ===== SETTINGS PAGE ===== -->
<div id="page-settings" class="page">
  <div class="section-header">
    <div class="section-title">âš™ï¸ Settings</div>
  </div>
  <div class="settings-grid">

    <!-- Theme -->
    <div class="settings-card">
      <h3>ğŸ¨ Theme</h3>
      <div class="theme-grid" id="theme-grid">
        <div class="theme-chip active" style="background:linear-gradient(135deg,#0a0a0f,#1a1a2e);border-color:#7c5cfc;color:#e2e8f0" onclick="setTheme('theme-default')" data-theme="theme-default">ğŸŒ‘ Default</div>
        <div class="theme-chip" style="background:linear-gradient(135deg,#050510,#0a0a1a);color:#39ff14" onclick="setTheme('theme-neon')" data-theme="theme-neon">ğŸŒˆ Neon</div>
        <div class="theme-chip" style="background:linear-gradient(135deg,#020617,#050c23);color:#818cf8" onclick="setTheme('theme-midnight')" data-theme="theme-midnight">ğŸŒŒ Midnight</div>
        <div class="theme-chip" style="background:linear-gradient(135deg,#1a0a0a,#2a1010);color:#ff6b6b" onclick="setTheme('theme-sunset')" data-theme="theme-sunset">ğŸŒ… Sunset</div>
        <div class="theme-chip" style="background:linear-gradient(135deg,#020d1a,#041524);color:#05bfdb" onclick="setTheme('theme-ocean')" data-theme="theme-ocean">ğŸŒŠ Ocean</div>
        <div class="theme-chip" style="background:linear-gradient(135deg,#020f02,#041804);color:#6fb98f" onclick="setTheme('theme-forest')" data-theme="theme-forest">ğŸŒ² Forest</div>
      </div>
    </div>

    <!-- Background Effects -->
    <div class="settings-card">
      <h3>âœ¨ Background Effect</h3>
      <div class="bg-grid" id="bg-grid">
        <div class="bg-chip active" onclick="setBgEffect('stars')" data-bg="stars"><span class="bc-icon">â­</span>Stars</div>
        <div class="bg-chip" onclick="setBgEffect('matrix')" data-bg="matrix"><span class="bc-icon">ğŸ’»</span>Matrix</div>
        <div class="bg-chip" onclick="setBgEffect('geometric')" data-bg="geometric"><span class="bc-icon">ğŸ”·</span>Geometric</div>
        <div class="bg-chip" onclick="setBgEffect('particles')" data-bg="particles"><span class="bc-icon">âœ¨</span>Particles</div>
        <div class="bg-chip" onclick="setBgEffect('none')" data-bg="none"><span class="bc-icon">ğŸš«</span>None</div>
        <div class="bg-chip" onclick="setBgEffect('nebula')" data-bg="nebula"><span class="bc-icon">ğŸŒŒ</span>Nebula</div>
      </div>
      <div style="margin-top:14px">
        <div class="setting-row">
          <div><div class="setting-label">Interactive Background</div><div class="setting-desc">Click canvas to create particle bursts</div></div>
          <label class="s-toggle"><input type="checkbox" id="interactive-toggle" onchange="toggleInteractive(this.checked)"><span class="s-toggle-track"></span></label>
        </div>
      </div>
    </div>

    <!-- Performance -->
    <div class="settings-card">
      <h3>âš¡ Performance</h3>
      <div class="setting-row">
        <div><div class="setting-label">Performance Mode</div><div class="setting-desc">Disable animations & background</div></div>
        <label class="s-toggle"><input type="checkbox" id="perf-toggle" onchange="togglePerfMode(this.checked)"><span class="s-toggle-track"></span></label>
      </div>
      <div class="setting-row">
        <div class="setting-label">Open in About:Blank</div>
        <button class="s-btn" onclick="openAboutBlank()">Open</button>
      </div>
      <div class="setting-row">
        <div class="setting-label">Open as Blob URL</div>
        <button class="s-btn" onclick="openBlob()">Open</button>
      </div>
    </div>

    <!-- Inactivity -->
    <div class="settings-card">
      <h3>â±ï¸ Inactivity Refresh</h3>
      <div class="setting-row">
        <div class="setting-label">Auto-Refresh After</div>
        <select class="s-select" id="inactivity-select" onchange="saveInactivity(this.value)">
          <option value="30000">30 seconds</option>
          <option value="60000">1 minute</option>
          <option value="120000" selected>2 minutes</option>
          <option value="180000">3 minutes</option>
          <option value="300000">5 minutes</option>
          <option value="off">Off</option>
        </select>
      </div>
      <div class="setting-row">
        <div class="setting-label">Refresh Now</div>
        <button class="s-btn" onclick="location.reload()">Refresh</button>
      </div>
    </div>

    <!-- Data Management -->
    <div class="settings-card">
      <h3>ğŸ’¾ Data Management</h3>
      <div class="setting-row">
        <div class="setting-label">Export Data</div>
        <button class="s-btn" onclick="exportData()">ğŸ“¤ Export</button>
      </div>
      <div class="setting-row">
        <div class="setting-label">Import Data</div>
        <button class="s-btn" onclick="document.getElementById('import-file').click()">ğŸ“¥ Import</button>
        <input type="file" id="import-file" accept=".json" style="display:none" onchange="importData(this)">
      </div>
      <div class="setting-row">
        <div class="setting-label">Clear Favorites</div>
        <button class="s-btn danger" onclick="clearFavorites()">ğŸ—‘ï¸ Clear</button>
      </div>
      <div class="setting-row">
        <div class="setting-label">Reset All Data</div>
        <button class="s-btn danger" onclick="clearAllData()">âŒ Reset</button>
      </div>
    </div>

    <!-- About -->
    <div class="settings-card">
      <h3>â„¹ï¸ About</h3>
      <div class="setting-row"><div class="setting-label">Version</div><div style="color:var(--accent);font-weight:600">1.6.0</div></div>
      <div class="setting-row"><div class="setting-label">Owner</div><div style="color:var(--text-muted)">Nolan Boyer</div></div>
      <div class="setting-row"><div class="setting-label">Last Updated</div><div style="color:var(--text-muted)">02/17/26</div></div>
      <div class="setting-row"><div class="setting-label">Hosted On</div><div style="color:var(--text-muted)">Github</div></div>
      <div style="margin-top:12px">
        <a href="https://github.com/NolanBetter/nolanbetter.github.io" target="_blank" class="s-btn" style="display:inline-block;text-decoration:none">ğŸ”— Fork on GitHub</a>
      </div>
    </div>

  </div>
</div>

</main>

<script>
// ============================================================
// DATA
// ============================================================
const GAMES = [
  { name: "Bad Parenting 1", href: "Bad Parenting 1.html", icon: "ğŸ‘ª", img: "" },
  { name: "Baldi's Basics Plus", href: "Baldi's Basics Plus.html", icon: "ğŸ“", img: "" },
  { name: "Bendy and the Ink Machine", href: "Bendy and the Ink Machine.html", icon: "ğŸ­", img: "" },
  { name: "Buckshot Roulette", href: "Buckshot Roulette.html", icon: "ğŸ°", img: "" },
  { name: "Celeste", href: "Celeste.html", icon: "ğŸ”ï¸", img: "" },
  { name: "Cuphead", href: "Cuphead.html", icon: "â˜•", img: "" },
  { name: "Five Nights at Freddy's Pizza Simulator", href: "Five Nights at Freddy's_ Pizza Simulator.html", icon: "ğŸ•", img: "" },
  { name: "Five Nights at Freddy's Sister Location", href: "Five Nights at Freddy's_ Sister Location.html", icon: "ğŸ¤–", img: "" },
  { name: "Half Life", href: "Half Life.html", icon: "ğŸ”¬", img: "" },
  { name: "Hollow Knight", href: "Hollow Knight.html", icon: "ğŸ¦‹", img: "" },
  { name: "Hotline Miami", href: "Hotline Miami.html", icon: "ğŸŒ†", img: "" },
  { name: "Jelly Drift", href: "Jelly Drift.html", icon: "ğŸš—", img: "" },
  { name: "Karlson", href: "Karlson.html", icon: "ğŸ¥›", img: "" },
  { name: "Kindergarten", href: "Kindergarten.html", icon: "ğŸ«", img: "" },
  { name: "Kindergarten 2", href: "Kindergarten 2.html", icon: "ğŸ«", img: "" },
  { name: "OMORI", href: "OMORI.html", icon: "ğŸ˜¶", img: "" },
  { name: "Oneshot (LEGACY)", href: "Oneshot (LEGACY).html", icon: "ğŸ’¡", img: "" },
  { name: "People Playground", href: "People Playground.html", icon: "ğŸ§", img: "" },
  { name: "Pizza Tower", href: "Pizza Tower.html", icon: "ğŸ•", img: "" },
  { name: "Quake III Arena", href: "Quake III Arena.html", icon: "ğŸ’£", img: "" },
  { name: "R.E.P.O", href: "REPO.html", icon: "ğŸ“¦", img: "" },
  { name: "Tattletail", href: "Tattletail.html", icon: "ğŸ£", img: "" },
  { name: "Schoolboy Runaway", href: "Schoolboy Runaway.html", icon: "ğŸƒ", img: "" },
  { name: "Slime Rancher", href: "Slime Rancher.html", icon: "ğŸŸ¢", img: "" },
  { name: "Soundboard", href: "Soundboard.html", icon: "ğŸµ", img: "" },
  { name: "That's Not My Neighbor", href: "That's Not My Neighbor.html", icon: "ğŸšª", img: "" },
  { name: "ULTRAKILL", href: "ULTRAKILL.html", icon: "ğŸ©¸", img: "" },
  { name: "WebFishing", href: "WebFishing.html", icon: "ğŸ£", img: "" },
  { name: "Yume Nikki", href: "Yume Nikki.html", icon: "ğŸ’¤", img: "" },
  { name: "1v1.lol", href: "1v1LoL.html", icon: "ğŸ¯", img: "" },
  { name: "2048", href: "2048.html", icon: "ğŸ”¢", img: "" },
  { name: "2048 Merge Run", href: "2048 Merge Run.html", icon: "ğŸƒ", img: "" },
  { name: "8 Ball Pool", href: "8 Ball Pool.html", icon: "ğŸ±", img: "" },
  { name: "A Bite at Freddy's", href: "A Bite at Freddy's.html", icon: "ğŸ»", img: "" },
  { name: "Abandoned", href: "Abandoned.html", icon: "ğŸšï¸", img: "" },
  { name: "Achievement Unlocked", href: "Achievement Unlocked.html", icon: "ğŸ†", img: "" },
  { name: "Achievement Unlocked 2", href: "Achievement Unlocked 2.html", icon: "ğŸ†", img: "" },
  { name: "Achievement Unlocked 3", href: "Achievement Unlocked 3.html", icon: "ğŸ†", img: "" },
  { name: "Adventure Capitalist", href: "Adventure Capatalist.html", icon: "ğŸ’°", img: "" },
  { name: "Ages of Conflict", href: "Ages of Conflict.html", icon: "âš”ï¸", img: "" },
  { name: "Angry Birds", href: "Angry Birds.html", icon: "ğŸ¦", img: "" },
  { name: "Angry Birds Chrome", href: "Angry Birds Chrome.html", icon: "ğŸ¦", img: "" },
  { name: "Awesome Tanks", href: "Awesome Tanks.html", icon: "ğŸª–", img: "" },
  { name: "Awesome Tanks 2", href: "Awesome Tanks 2.html", icon: "ğŸª–", img: "" },
  { name: "Backrooms", href: "Backrooms.html", icon: "ğŸ¢", img: "" },
  { name: "Bad Ice Cream", href: "Bad Ice Cream.html", icon: "ğŸ¦", img: "" },
  { name: "Bad Ice Cream 2", href: "Bad Ice Cream 2.html", icon: "ğŸ¦", img: "" },
  { name: "Bad Ice Cream 3", href: "Bad Ice Cream 3.html", icon: "ğŸ¦", img: "" },
  { name: "Basket Random", href: "Basket Random.html", icon: "ğŸ€", img: "" },
  { name: "Basketball Stars", href: "Basketball Stars.html", icon: "ğŸ€", img: "" },
  { name: "Big Tower Tiny Square", href: "Big Tower Tiny Square.html", icon: "ğŸŸ¦", img: "" },
  { name: "Big Tower Tiny Square 2", href: "Big Tower Tiny Square 2.html", icon: "ğŸŸ¦", img: "" },
  { name: "BitLife", href: "BitLife.html", icon: "ğŸ‘¤", img: "" },
  { name: "BitPlanes", href: "BitPlanes.html", icon: "âœˆï¸", img: "" },
  { name: "Block Blast", href: "Block Blast.html", icon: "ğŸ§±", img: "" },
  { name: "BlockPost", href: "BlockPost.html", icon: "ğŸ”«", img: "" },
  { name: "Bob The Robber 2", href: "Bob The Robber 2.html", icon: "ğŸ¦¹", img: "" },
  { name: "Boxing Random", href: "Boxing Random.html", icon: "ğŸ¥Š", img: "" },
  { name: "Brawl Guys.io", href: "Brawl Guysio.html", icon: "âš¡", img: "" },
  { name: "CircloO", href: "CircloO.html", icon: "â­•", img: "" },
  { name: "CircloO 2", href: "CircloO 2.html", icon: "â­•", img: "" },
  { name: "Cluster Rush", href: "Cluster Rush.html", icon: "ğŸš›", img: "" },
  { name: "Cookie Clicker", href: "Cookie Clicker.html", icon: "ğŸª", img: "" },
  { name: "Crazy Cars", href: "Crazy Cars.html", icon: "ğŸš—", img: "" },
  { name: "Crossy Road", href: "Crossy Road.html", icon: "ğŸ”", img: "" },
  { name: "Cut the Rope", href: "Cut the Rope.html", icon: "ğŸ¬", img: "" },
  { name: "Doom", href: "DOOM.html", icon: "ğŸ‘¹", img: "" },
  { name: "Doom 2", href: "Doom 2.html", icon: "ğŸ‘¹", img: "" },
  { name: "Doom 3", href: "Doom 3.html", icon: "ğŸ‘¹", img: "" },
  { name: "Drift Boss", href: "Drift Boss.html", icon: "ğŸš—", img: "" },
  { name: "Draw Joust", href: "Draw Joust.html", icon: "âœï¸", img: "" },
  { name: "Drift Hunters", href: "Drift Hunters.html", icon: "ğŸï¸", img: "" },
  { name: "Duck Life", href: "Duck Life.html", icon: "ğŸ¦†", img: "" },
  { name: "Duck Life 2", href: "Duck Life 2.html", icon: "ğŸ¦†", img: "" },
  { name: "Duck Life 3", href: "Duck Life 3.html", icon: "ğŸ¦†", img: "" },
  { name: "Duck Life 4", href: "Duck Life 4.html", icon: "ğŸ¦†", img: "" },
  { name: "Duck Life 5", href: "Duck Life 5.html", icon: "ğŸ¦†", img: "" },
  { name: "Geometry Dash Lite", href: "Geometry Dash Lite.html", icon: "ğŸ”·", img: "" },
  { name: "Google Feud", href: "Google Feud.html", icon: "ğŸ”", img: "" },
  { name: "Jetpack Joyride", href: "Jetpack Joyride.html", icon: "ğŸš€", img: "" },
  { name: "Learn to Fly", href: "Learn to Fly.html", icon: "ğŸ§", img: "" },
  { name: "Learn to Fly 2", href: "Learn to Fly 2.html", icon: "ğŸ§", img: "" },
  { name: "Learn to Fly 3", href: "Learn to Fly 3.html", icon: "ğŸ§", img: "" },
  { name: "Learn to Fly Idle", href: "Learn to Fly Idle.html", icon: "ğŸ§", img: "" },
  { name: "Line Rider", href: "Line Rider.html", icon: "ğŸ›·", img: "" },
  { name: "Melon Playground", href: "Melon Playground.html", icon: "ğŸ‰", img: "" },
  { name: "Moto X3M", href: "Moto X3M.html", icon: "ğŸï¸", img: "" },
  { name: "OvO", href: "OvO.html", icon: "ğŸƒ", img: "" },
  { name: "Pixel Gun Survival", href: "Pixel Gun Survival.html", icon: "ğŸ”«", img: "" },
  { name: "Poly Track", href: "Poly Track.html", icon: "ğŸï¸", img: "" },
  { name: "Rooftop Snipers", href: "Rooftop Snipers.html", icon: "ğŸ¯", img: "" },
  { name: "Rooftop Snipers 2", href: "Rooftop Snipers 2.html", icon: "ğŸ¯", img: "" },
  { name: "Run", href: "Run 1.html", icon: "ğŸƒ", img: "" },
  { name: "Sandboxels", href: "Sandboxels.html", icon: "ğŸ–ï¸", img: "" },
  { name: "Sandtris", href: "Sandtris.html", icon: "ğŸ–ï¸", img: "" },
  { name: "Slope", href: "Slope.html", icon: "ğŸ‚", img: "" },
  { name: "Slope 2", href: "Slope 2.html", icon: "ğŸ‚", img: "" },
  { name: "Slowroads", href: "Slowroads.html", icon: "ğŸš—", img: "" },
  { name: "Smash Karts", href: "Smash Karts.html", icon: "ğŸï¸", img: "" },
  { name: "Stone Grass Mowing Simulator", href: "Stone Grass Mowing Simulator.html", icon: "ğŸŒ¿", img: "" },
  { name: "Temple Run 2", href: "Temple Run 2.html", icon: "ğŸ›ï¸", img: "" },
  { name: "The World's Hardest Game", href: "The World's Hardest Game.html", icon: "ğŸ˜¤", img: "" },
  { name: "World Box", href: "World Box.html", icon: "ğŸŒ", img: "" },
  { name: "Crazy Cattle 3D", href: "Crazy Cattle 3D.html", icon: "ğŸ„", img: "" },
  { name: "Crazy Chicken 3D", href: "Crazy Chicken 3D.html", icon: "ğŸ”", img: "" },
  { name: "Crazy Kitty 3D", href: "Crazy Kitty 3D.html", icon: "ğŸ±", img: "" },
  { name: "Fortzone Battle Royale", href: "Fortzone Battle Royale.html", icon: "ğŸ®", img: "" },
  { name: "Getting Over It with Bennett Foddy", href: "Getting Over It with Bennett Foddy.html", icon: "â›ï¸", img: "" },
  { name: "Google Baseball", href: "Google Baseball.html", icon: "âš¾", img: "" },
  { name: "Going Balls", href: "Going Balls.html", icon: "âš½", img: "" },
  { name: "Gorilla Tag", href: "Gorilla Tag.html", icon: "ğŸ¦", img: "" },
  { name: "Harvest.io", href: "Harvestio.html", icon: "ğŸŒ¾", img: "" },
  { name: "Madalin Stunt Cars 2", href: "Madalin Stunt Cars 2.html", icon: "ğŸš—", img: "" },
  { name: "Madalin Stunt Cars 3", href: "Madalin Stunt Cars 3.html", icon: "ğŸš—", img: "" },
  { name: "Maze Speedrun", href: "Maze Speedrun.html", icon: "ğŸŒ€", img: "" },
  { name: "Moto X3M 2", href: "Moto X3M 2.html", icon: "ğŸï¸", img: "" },
  { name: "Moto X3M 3", href: "Moto X3M 3.html", icon: "ğŸï¸", img: "" },
  { name: "Moto X3M Pool Party", href: "Moto X3M Pool Party.html", icon: "ğŸŠ", img: "" },
  { name: "Moto X3M Spooky", href: "Moto X3M Spooky.html", icon: "ğŸƒ", img: "" },
  { name: "Moto X3M Winter", href: "Moto X3M Winter.html", icon: "â„ï¸", img: "" },
  { name: "OvO 2", href: "OvO 2.html", icon: "ğŸƒ", img: "" },
  { name: "OvO 3 Dimensions", href: "OvO 3 Dimensions.html", icon: "ğŸŒ", img: "" },
  { name: "Ping Pong", href: "pingpong.html", icon: "ğŸ“", img: "" },
  { name: "HTML About:Blank Launcher", href: "aboutblank.html", icon: "ğŸ–¥ï¸", img: "" },
  { name: "Neon Rush 3D", href: "neonrush.html", icon: "ğŸ’œ", img: "" },
  { name: "Gravity Shift", href: "gravityshift.html", icon: "ğŸŒ€", img: "" },
  { name: "Ethereal Barrage", href: "etherealbarrage.html", icon: "âœ¨", img: "" },
  { name: "Realm of Echoes", href: "realmofechoes.html", icon: "ğŸŒŸ", img: "" }
];

const WEBSITES = [
  { name: "Helios Browser #1", href: "https://helios-browser.vercel.app/?sca_esv=91bd149827a5c7e1&ie=ISO-8859-1&q=duck+the+dick+layer&oq=&aqs=", cls: "" },
  { name: "Helios Browser #2", href: "https://helios-main-4-16277712.codehs.me/", cls: "" },
  { name: "Helios Browser #3", href: "https://secret-14830781.codehs.me/", cls: "" },
  { name: "Helios Browser #4", href: "https://helios-main-1-16003298.codehs.me/", cls: "" },
  { name: "Helios Browser #5", href: "https://helios-main-8-16277735.codehs.me/", cls: "" },
  { name: "Helios Browser #6", href: "https://helios-main-1-17218349.codehs.me/index.html", cls: "" },
  { name: "Helios Browser #7", href: "https://helios-main-2-17218409.codehs.me/index.html", cls: "" },
  { name: "Helios Browser #8", href: "https://helios-main-3-17218419.codehs.me/index.html", cls: "" },
  { name: "Helios Browser #9", href: "https://helios-main-4-17218430.codehs.me/index.html", cls: "" },
  { name: "Helios Browser #10", href: "https://helios-main-5-17218433.codehs.me/index.html", cls: "" },
  { name: "Math Help", href: "https://math-help-10477068.codehs.me/proxies.html", cls: "pageb" },
  { name: "Falcon Hub", href: "https://falcon-hub-2-14106850.codehs.me/", cls: "blocked" },
  { name: "Cool Web Browser", href: "https://web-13738023.codehs.me/", cls: "pageb" },
  { name: "gn-whoknows", href: "https://new-sandbox-program-8-16195494.codehs.me/", cls: "" },
  { name: "Gamers Corner", href: "https://gamerscorner.codehs.me/", cls: "pageb" },
  { name: "Sigma Drift", href: "https://sigma-drift2-14009523.codehs.me/", cls: "pageb" },
  { name: "Max D Games", href: "https://html-6835466.codehs.me/games.html", cls: "pageb" },
  { name: "Wise Educational tools", href: "https://wise-educational-tools-10184503.codehs.me/games.html", cls: "pageb" },
  { name: "Epic math games", href: "https://epicmathgames-11368087.codehs.me/", cls: "" },
  { name: "Blox Games", href: "https://html-2-11096731.codehs.me/", cls: "pageb" },
  { name: "Fern #1", href: "https://s3.amazonaws.com/fernisbest/index.html", cls: "" },
  { name: "Fun Games", href: "https://useful-websites-11384316.codehs.me/fun-games-page.html", cls: "pageb" },
  { name: "Unblocked Web #1", href: "https://unlocked-14104483.codehs.me/links.html#", cls: "pageb" },
  { name: "Greeni's Unblocked Games", href: "https://looker-drive-15229361.codehs.me/index.html", cls: "pageb" },
  { name: "Talon Games", href: "https://talongames-15869241.codehs.me/projects", cls: "" },
  { name: "Otto's Site", href: "https://superdupercool.codehs.me/", cls: "pageb" },
  { name: "Untitled 2.0", href: "https://untitledsite2point02.codehs.me/", cls: "" },
  { name: "Private Server", href: "https://private-server-v6-maybe-16143815.codehs.me/", cls: "pageb" },
  { name: "Hyper Unblocker", href: "https://hype-13705391.codehs.me/", cls: "" },
  { name: "Gaming Zone", href: "https://gamesite-2-9809323.codehs.me/game.html", cls: "" },
  { name: "Galactic", href: "https://superhardalgebra.codehs.me/", cls: "blocked" },
  { name: "Nexus #1", href: "https://nexus2-15144648.codehs.me/", cls: "blocked" },
  { name: "Nexus #2", href: "https://nexus-1-16525472.codehs.me/", cls: "blocked" },
  { name: "Nexus #3", href: "https://html-2-16716466.codehs.me/", cls: "blocked" },
  { name: "TalonOS", href: "https://nexusos-15319152.codehs.me/", cls: "" },
  { name: "Elite Games", href: "https://eliteforever-15439918.codehs.me/index.html", cls: "" },
  { name: "Green Juce", href: "https://green-juce-15899531.codehs.me/", cls: "blocked" },
  { name: "toaster", href: "https://funny-cheese-toaster-16543182.codehs.me/", cls: "pageb" },
  { name: "Story Network", href: "https://story-network-math-16177875.codehs.me/", cls: "pageb" },
  { name: "Classlink", href: "https://76776-16256340.codehs.me/", cls: "" },
  { name: "YN-dayton", href: "https://yn-dayton-16219146.codehs.me/", cls: "" },
  { name: "Unknown", href: "https://html-14358861.codehs.me/Games/gameindex.html", cls: "" },
  { name: "Unknown #2", href: "https://html-14358861.codehs.me/index.html", cls: "" },
  { name: "Jacobpedia Games unblocker", href: "https://jacobpediacodehsme-11898672.codehs.me/Jacobpedia-games-unblocker.html", cls: "pageb" },
  { name: "Login", href: "https://new-sandbox-program-6-6497977.codehs.me/", cls: "pageb" },
  { name: "Google Classroom", href: "https://valuabletime-8462876.codehs.me/edutool.html", cls: "pageb" },
  { name: "Quiz Math 10", href: "https://quiz-math-10.us/", cls: "" },
  { name: "Web #1", href: "https://www.toplocaltours.com/", cls: "" },
  { name: "Web #2", href: "https://www.candofinance.com/", cls: "" },
  { name: "Smash karts", href: "https://smslearning.codehs.me/", cls: "" },
  { name: "Oregon Trail Game", href: "https://oregontrail.ws/games/the-oregon-trail-deluxe/play/", cls: "" },
  { name: "Subway Surfers", href: "https://warehouse.galaxydve.com/content/5078462/bin/index.html", cls: "" },
  { name: "Zebawl", href: "https://s3-eu-west-1.amazonaws.com/apps.playcanvas.com/xMpnwMbu/index.html", cls: "" },
  { name: "Orbital Survival", href: "https://s3-eu-west-1.amazonaws.com/apps.playcanvas.com/aOZ5lcoo/index.html", cls: "" },
  { name: "Squishy Earth", href: "https://www.byronknoll.com/earth.html", cls: "" },
  { name: "Fire 3D Shooter", href: "https://3d-shooter-15153456.com", cls: "pageb" },
  { name: "Error", href: "https://mhsdevildogs-12321908.codehs.me/", cls: "" },
  { name: "Xer Unblocked Hub", href: "https://star-13979722.codehs.me/", cls: "" },
  { name: "Tiny Fishing", href: "https://new-sandbox-program-11-14372996.codehs.me/index.html", cls: "" },
  { name: "Play Spent", href: "https://playspent.org/", cls: "" },
  { name: "Srihan Forehead Massive", href: "https://eshaanis-16824004.codehs.me/", cls: "" },
  { name: "Bored Of Class", href: "https://bored-of-class-16692634.codehs.me/", cls: "" },
  { name: "Phani's Cool House", href: "https://phanis-cool-house-16638329.codehs.me/", cls: "" },
  { name: "Skadoosh's Hub", href: "https://rizzabh-games-16509919.codehs.me/", cls: "" },
  { name: "eChalk", href: "https://www.echalk.co.uk/amusements/Games/games.html", cls: "" },
  { name: "Unblocked Websites", href: "https://unblocked-websites-main-17218379.codehs.me/index.html", cls: "" },
  { name: "gn-math #1", href: "https://eclipzeunbgs.codehs.me", cls: "" },
  { name: "gn-math #2", href: "https://cool-2-15870625.codehs.me/", cls: "" },
  { name: "gn-math #3", href: "https://gn-mathgithubio-main-17215986.codehs.me/index.html", cls: "" },
  { name: "gn-math #4", href: "https://gn-mathgithubio-main-1-17216084.codehs.me/index.html", cls: "" },
  { name: "gn-math #5", href: "https://gn-mathgithubio-main-2-17218440.codehs.me/index.html", cls: "" },
  { name: "gn-math #6", href: "https://gn-mathgithubio-main-3-17236945.codehs.me/index.html", cls: "" },
  { name: "gn-math #7", href: "https://gn-mathgithubio-main-4-17236964.codehs.me/index.html", cls: "" },
  { name: "gn-math #8", href: "https://gn-mathgithubio-main-5-17236997.codehs.me/index.html", cls: "" },
  { name: "gn-math #9", href: "https://gn-mathgithubio-main-6-17237020.codehs.me/index.html", cls: "" },
  { name: "gn-math #10", href: "https://gn-mathgithubio-main-7-17237044.codehs.me/index.html", cls: "" },
  { name: "Encoder/Decoder", href: "https://new-sandbox-program-82-17205112.codehs.me/index.html", cls: "" },
  { name: "Data URL Converter", href: "https://new-sandbox-program-83-17227451.codehs.me/index.html", cls: "" },
  { name: "Doge", href: "https://dogeub-sooty.vercel.app/", cls: "" },
  { name: "Utopia #1", href: "https://course.how.laurengillett.com/", cls: "" },
  { name: "Utopia #2", href: "https://study.info.scallex.net/", cls: "" },
  { name: "DayDream X", href: "https://yuru.haifu.ipv64.net/", cls: "" },
  { name: "Jordan's Math Work", href: "https://stateexams.statetestingstudies.com/", cls: "" },
  { name: "Hideout", href: "https://hideout-now.lovable.app/", cls: "" },
  { name: "Lunar", href: "https://tnx.0x0a.ru/", cls: "" },
  { name: "galaxy", href: "https://galaxyv6.freetls.fastly.net/", cls: "" },
  { name: "Horizon Hub", href: "https://horizon-wearesoback.my.canva.site/hub", cls: "" },
  { name: "Endis #1", href: "https://instructure.com.bizzbooks.co.za/", cls: "" },
  { name: "Vapor #1", href: "https://lesson-plans2.vapor.my.cdn.cloudflare.net", cls: "" },
  { name: "Vapor #2", href: "https://lesson-plans3.vapor.my.cdn.cloudflare.net", cls: "" },
  { name: "TR OS", href: "https://learns-the-ways-of-aryan.netlify.app/", cls: "" },
  { name: "NettleWeb #1", href: "https://nike.global.ssl.fastly.net/", cls: "" },
  { name: "NettleWeb #2", href: "https://nettleweb.freetls.fastly.net/", cls: "" },
  { name: "NettleWeb #3", href: "https://nike.freetls.fastly.net", cls: "" },
  { name: "Duck #1", href: "https://edu.freetls.fastly.net/", cls: "" },
  { name: "Duck #2", href: "https://duck-math.global.ssl.fastly.net", cls: "" },
  { name: "Void #1", href: "https://classslink.comsjfjdj.taskavonad.com/", cls: "" },
  { name: "Void #2", href: "https://voidnetwork.seminaire-school.v6.rocks/", cls: "" },
  { name: "Vault", href: "https://vault.global.ssl.fastly.net/home/", cls: "" },
  { name: "Endis #2", href: "https://aj.freetls.fastly.net/", cls: "" },
  { name: "Vortex #1", href: "https://vortexos.net.cdn.cloudflare.net/login", cls: "" },
  { name: "Vortex #2", href: "https://vtx.chat.cdn.cloudflare.net/", cls: "" },
  { name: "Vortex #3", href: "https://vtx-cdn.edu-cdn.workers.dev/", cls: "" },
  { name: "Fern #2", href: "https://fern.global.ssl.fastly.net/", cls: "" },
  { name: "Fern #3", href: "https://fern.freetls.fastly.net/", cls: "" },
  { name: "Endis #3", href: "https://2i4b3tzs.webauth.win.cdn.cloudflare.net/", cls: "" },
  { name: "Endis #4", href: "https://2cool.ajh.academy.cdn.cloudflare.net/", cls: "" },
  { name: "Endis #5", href: "https://045wwgoi.webauth.win.cdn.cloudflare.net/", cls: "" },
  { name: "Selenite", href: "https://apstats.eminescusm.ro/", cls: "" },
  { name: "Minecraft 1.8", href: "https://media.kpcompass.com/embeds/c56b1f1e15fe667c724ca6c9c21bdd904b8ccc478395e126f140c4f1e2eedb63.html", cls: "" },
  { name: "Retro Bowl", href: "https://objectstorage.us-ashburn-1.oraclecloud.com/n/idzgyfi7awwr/b/bucket-20231001-1518-rb1.0/o/index.html", cls: "" },
  { name: "Super Mario Bros", href: "https://games.newstargeted.com/FullScreenMario/", cls: "" },
  { name: "Mars Unblocked Games", href: "https://new.express.adobe.com/webpage/7pKXYnkZbfSaO", cls: "" },
  { name: "Math Games", href: "https://teks.mathgames.com/arcade", cls: "" },
  { name: "Air Mash", href: "https://altar.azureedge.net/", cls: "" },
  { name: "Hextris", href: "https://www.nddb.coop/ccnddb/games/Hexagon%20Twist/", cls: "" },
  { name: "Semantris", href: "https://research.google.com/semantris/", cls: "" },
  { name: "Lander", href: "https://ehmorris.com/lander/", cls: "" },
  { name: "Stickman Fighting Game", href: "https://script.google.com/macros/s/AKfycbwAoTmRTzE6ydvLBsbUcwDvlzS36xbr263_ttMmz8pBgmf0ih3RHJNeYFe3-evGMeMF/exec", cls: "" },
  { name: "Games from creators of Photopea", href: "https://www.photopea.com/games/", cls: "" },
  { name: "Swooop", href: "https://s3-eu-west-1.amazonaws.com/apps.playcanvas.com/R2axJfsc/index.html", cls: "" },
  { name: "Dungeon Fury", href: "https://s3-eu-west-1.amazonaws.com/apps.playcanvas.com/LDm4dGNm/index.html", cls: "" },
  { name: "multiplayer golf", href: "https://multiplayer.golf/", cls: "" },
  { name: "Marbleous", href: "https://s3-eu-west-1.amazonaws.com/apps.playcanvas.com/HEoGi1Mb/index.html", cls: "" },
  { name: "Flappy Bird", href: "https://s3-eu-west-1.amazonaws.com/apps.playcanvas.com/TAhlQLDa/index.html", cls: "" },
  { name: "Montblanc Explorer Platinum", href: "https://therace.montblancexplorer.com/en-nl", cls: "" },
  { name: "geography-test-20.live", href: "https://geography-test-20.live/#google_vignette", cls: "" },
  { name: "Temu Smashkarts", href: "https://script.google.com/macros/s/AKfycbxQuqMuGYqOJSyYwUL5vYn1E3xCTjM7DAQZnhnKyYVmhH_2mNQS7INnwJkwr7l7T9GC/exec", cls: "" },
  { name: "Cookie Click", href: "https://a6936-19424025.cluster7.canvas-user-content.com/courses/6936~1014013/files/6936~19424025/course%20files/cookie%20clicker/index.html?context_id=6936~1014013&context_type=CourseDownload=1&id=69360000019424025&inline=1", cls: "" },
  { name: "Tiletopia", href: "https://6nilllqpgkm6o.h5games.usercontent.goog/v/7d3689i7s5gfo/", cls: "" },
  { name: "Atom Clicker", href: "https://atom-clicker.ayfri.com/", cls: "" },
  { name: "3D Tuning", href: "https://www.3dtuning.com/en-US/", cls: "" },
  { name: "Euphoria #1", href: "http://ez-ub.anjumanallana.in/", cls: "" },
  { name: "Euphoria #2", href: "http://gov.eminescusm.ro/", cls: "" },
  { name: "Study.com (Roblox)", href: "https://securly.com.mtomtech.co.kr/", cls: "pageb" },
  { name: "Roblox", href: "https://rblx-7918337.codehs.me/", cls: "pageb" }
];

const PARTNERSHIPS = [
  { name: "Squall Proxy Link #1", href: "https://asdfgrefddgv.chickenkiller.com" },
  { name: "Squall Proxy Link #2", href: "https://squall.cc" },
  { name: "Squall Proxy Link #3", href: "https://ixl.learnmath.cfd" },
  { name: "Squall Proxy Link #4", href: "https://best.learnmath.cfd" },
  { name: "Squall Proxy Link #5", href: "https://iready.learnmath.cfd" },
  { name: "Squall Proxy Link #6", href: "https://learn.learnmath.cfd/" },
  { name: "KamZone Arcade (Google Site)", href: "https://sites.google.com/view/itsbig/home" },
  { name: "KamZone Arcade link #1", href: "https://new-sandbox-program-20-18034129.codehs.me/index.html" },
  { name: "KamZone Arcade link #2", href: "https://new-sandbox-program-19-18034111.codehs.me/index.html" },
  { name: "KamZone Arcade link #3", href: "https://pub-ac397c96ae2647d4a45221e91f4ce5dd.r2.dev/kzWLsjRZDQ.html" },
  { name: "KamZone Arcade link #4", href: "https://18035447-s.codehs.io/index.html" },
  { name: "Galaxydevs's Hangout", href: "https://sites.google.com/view/gdevs-hangout" }
];

const EAGLERCRAFT = [
  { name: "Eaglercraft Indev", href: "https://new-sandbox-program-43-16834996.codehs.me/index.html", cls: "" },
  { name: "Eaglercraft Beta 1.2.6", href: "https://new-sandbox-program-42-16834902.codehs.me/index.html", cls: "" },
  { name: "Eaglercraft Beta 1.3", href: "https://new-sandbox-program-41-16834838.codehs.me/index.html", cls: "" },
  { name: "Eaglercraft Beta 1.7.3", href: "https://new-sandbox-program-40-16834750.codehs.me/index.html", cls: "" },
  { name: "Eaglercraft 1.5.2", href: "https://new-sandbox-program-38-16834232.codehs.me/index.html", cls: "" },
  { name: "EaglercraftX 1.8", href: "https://codehs.com/uploads/d88866b9c3eb083b43dac1a94e54d179", cls: "" },
  { name: "EaglercraftL 1.9.4", href: "https://codehs.com/uploads/1134b7177ae8e97986729eb34a6ce245", cls: "" },
  { name: "EaglercraftX 1.11.2", href: "https://codehs.com/uploads/37053412754d02c9f1a17740fc92a7c8", cls: "" },
  { name: "EaglercraftX 1.12.2", href: "https://new-sandbox-program-37-16834106.codehs.me/index.html", cls: "" },
  { name: "EaglercraftL 1.21.4", href: "https://new-sandbox-program-39-16834383.codehs.me/index.html", cls: "blocked" }
];

const OURLINKS = [
  { name: "Official Portal #1", href: "https://www.nolangraysongames.com/" },
  { name: "Official Portal #2", href: "https://nolansandgraysonsgames.w3spaces.com/index.html" },
  { name: "Official Portal #3", href: "https://nolanbetter.github.io/" },
  { name: "Official Portal #4", href: "https://nolanbetter-github-io.vercel.app/" },
  { name: "Official Portal #5", href: "https://mathisfun-lilac.vercel.app/" },
  { name: "Official Portal #6", href: "https://clevercom-iota.vercel.app/" },
  { name: "Official Proxy #1", href: "https://www.nolansproxy.com/" },
  { name: "Official Proxy #2", href: "https://nolansproxygithubio.vercel.app/" },
  { name: "Official Proxy #3", href: "https://toolsforlearning.vercel.app/" }
];

const MEDIEVAL = [
  { name: "Medieval Chronicles' Discord", href: "https://discord.gg/sfkPgsE2Fb", cls: "discord" },
  { name: "Medieval Chronicles' Google Doc", href: "https://docs.google.com/document/d/1jl3FJtYW4jrLHuhoh9lRbpVeY2Vsd07pyh-JqNcgIAg/edit?tab=t.0", cls: "" },
  { name: "Medieval Chronicles' Tiktok", href: "https://www.tiktok.com/@historicalbutler", cls: "" },
  ...Array.from({length:5},(_,i)=>({ name:"Imp Games", href:`https://hi${i?i:''}.raisingpro.com`, cls:"" })),
  ...Array.from({length:5},(_,i)=>({ name:"Imp Games", href:`https://sir${i?i:''}.raisingpro.com`, cls:"" })),
  ...Array.from({length:5},(_,i)=>({ name:"Imp Games", href:`https://mouse${i?i:''}.shitteacher.com`, cls:"" })),
  ...Array.from({length:5},(_,i)=>({ name:"Imp Games", href:`https://worldy${i?i:''}.shitteacher.com`, cls:"" })),
  ...Array.from({length:5},(_,i)=>({ name:"Imp Games", href:`https://water${i?i:''}.hjshop.net`, cls:"" })),
  { name: "Infamous", href: "http://d4kiiihr.Ploteando.com", cls: "" },
  { name: "Infamous", href: "http://aq6ndb89.Ploteando.com", cls: "" },
  { name: "Infamous", href: "http://5ztbtxdd.Ploteando.com", cls: "" },
  { name: "Infamous", href: "http://stsx78b6.Ploteando.com", cls: "" },
  { name: "Infamous", href: "http://ngjk9xti.Ploteando.com", cls: "" },
  { name: "Truffled", href: "https://edu.waterloomath.com/", cls: "" },
  { name: "Truffled", href: "http://info.stoke-park.co.uk/", cls: "" },
  { name: "Quasar", href: "https://newcovumc.org/", cls: "" },
  { name: "ROSIN", href: "https://education.4e4a.org/", cls: "" },
  { name: "Fern", href: "https://canvasbackpackstore.com/", cls: "" },
  ...["mrge.global.ssl.fastly.net","mr-ge.global.ssl.fastly.net","mr-ge-laoshi.global.ssl.fastly.net","mrge-laoshi.global.ssl.fastly.net","mister-ge.global.ssl.fastly.net","Misterge.global.ssl.fastly.net","Mister-ge-Lao-shi.global.ssl.fastly.net","Mister-gelao-shi.global.ssl.fastly.net","Mister-gelaoshi.global.ssl.fastly.net","MisterGe-laoshi.global.ssl.fastly.net","Mistergelao-shi.global.ssl.fastly.net","Mr-gelaoshi.global.ssl.fastly.net","mrgelaoshi.global.ssl.fastly.net","mrgelao-shi.global.ssl.fastly.net","mr-gelao-shi.global.ssl.fastly.net","Mr-Ge-Is-So-COOL.global.ssl.fastly.net","MrGeIsSoCool.global.ssl.fastly.net","We-Love-Mr-Ge.global.ssl.fastly.net","WeLoveMrGe.global.ssl.fastly.net","Mr-Ge-Tuff.global.ssl.fastly.net"].map(d=>({ name:"Medieval Chronicles Link", href:`https://${d}`, cls:"" })),
  { name: "Medieval Chronicles Link", href: "https://play1.coolmathgames.eu.org.cdn.cloudflare.net/", cls: "" },
  { name: "Medieval Chronicles Link", href: "https://info.videnom.com/", cls: "" },
  { name: "Medieval Chronicles Link", href: "https://moneynow.cc/", cls: "" },
  { name: "Medieval Chronicles Link", href: "https://info.quiz-me.org/", cls: "" },
  { name: "Medieval Chronicles Link", href: "https://homeworkhelp.cc/", cls: "" },
  { name: "Medieval Chronicles Link", href: "https://businessschool.cc/", cls: "" },
  { name: "Medieval Chronicles Link", href: "https://bigmoney.cc/", cls: "" },
  { name: "Medieval Chronicles Link", href: "https://velara.turbo-education.com/", cls: "" },
  { name: "Medieval Chronicles Link", href: "https://contentkeeperplzspeed.turbo-education.com/", cls: "" },
  { name: "Medieval Chronicles Link", href: "https://veryhardenglishproblems.weebly.com/", cls: "" },
  { name: "Medieval Chronicles Link", href: "https://overcloaked.okay.lat/", cls: "" },
  { name: "Medieval Chronicles Link", href: "https://clever.com.hal.se/", cls: "" },
  { name: "Medieval Chronicles Link", href: "https://authors.odoobooks.com/", cls: "" },
  { name: "Medieval Chronicles Link", href: "https://key-98476.firebaseapp.com/", cls: "" },
  { name: "Medieval Chronicles Link", href: "https://unpkg.com/valoq-math-work@1.0.17/index.html", cls: "" },
  { name: "Medieval Chronicles Link", href: "https://infamous-scram-test.firebaseapp.com/", cls: "" },
  { name: "Medieval Chronicles Link", href: "https://sciencehistoryovertime.firebaseapp.com/", cls: "" },
  { name: "Medieval Chronicles Link", href: "https://jimlovesyou.cencopro.cl/", cls: "" },
  { name: "Medieval Chronicles Link", href: "https://jimhatesyou.cencopro.cl/", cls: "" },
  { name: "Medieval Chronicles Link", href: "https://jimscat.firebaseapp.com/", cls: "" },
  { name: "Medieval Chronicles Link", href: "https://node.ubg.lat", cls: "" },
  { name: "Medieval Chronicles Link", href: "https://panel.ubg.lat", cls: "" },
  { name: "Medieval Chronicles Link", href: "https://duck.classroomcommunity.com", cls: "" },
  { name: "Medieval Chronicles Link", href: "https://duck.classroom-community.com", cls: "" },
  { name: "Medieval Chronicles Link", href: "https://classroom.community", cls: "" },
  { name: "Medieval Chronicles Link", href: "https://gamesforpi.com", cls: "" },
  { name: "Medieval Chronicles Link", href: "https://duck.gameacademy.ro", cls: "" },
  { name: "Medieval Chronicles Link", href: "https://edysgames.com", cls: "" },
  { name: "Medieval Chronicles Link", href: "https://friv-2023.com", cls: "" },
  { name: "Medieval Chronicles Link", href: "https://duck.freezenova.ai", cls: "" },
  { name: "Medieval Chronicles Link", href: "https://gametube.io", cls: "" },
  { name: "Medieval Chronicles Link", href: "https://freegames.onl", cls: "" },
  { name: "Medieval Chronicles Link", href: "https://duck.freezenova.chat", cls: "" },
  { name: "Medieval Chronicles Link", href: "https://duck.forcez.io", cls: "" },
  { name: "Medieval Chronicles Link", href: "https://duckmath.games", cls: "" },
  { name: "Medieval Chronicles Link", href: "https://duckmathgames.com", cls: "" },
  { name: "Medieval Chronicles Link", href: "https://mathlessons.b-cdn.net", cls: "" },
  { name: "Medieval Chronicles Link", href: "https://math.study.cadou.ro.cdn.cloudflare.net", cls: "" },
  { name: "Medieval Chronicles Link", href: "https://math.classroom.onl.cdn.cloudflare.net", cls: "" },
  { name: "Medieval Chronicles Link", href: "https://94.16.31.161.nip.io/", cls: "" },
  { name: "Medieval Chronicles Link", href: "https://splash.rhw.one/", cls: "" },
  { name: "Medieval Chronicles Link", href: "https://splash.best/", cls: "" },
  { name: "Medieval Chronicles Link", href: "https://calm-nougat-8de690.netlify.app", cls: "" }
];

const OTHER = [
  { name: "Rules", href: "https://drive.google.com/file/d/1nidsUc8iekU_k7Myid8rveo9-cUK0g0h/view?usp=drive_open", cls: "" },
  { name: "Report Form", href: "https://forms.gle/cJcDpLaSAm1NNVsR8", cls: "" },
  { name: "Summary Of The Rules", href: "https://drive.google.com/file/d/1tYhAuR_AHav3PDdVl0CYvyrqd-3iEM1j/view", cls: "" },
  { name: "Beta Page", href: "test.html", cls: "" },
  { name: "Fork On Github", href: "https://github.com/NolanBetter/nolanbetter.github.io", cls: "" },
  { name: "Official Link", href: "https://www.nolangraysongames.com/", cls: "" },
  { name: "Discord", href: "https://discord.gg/nNCWgRJZ7v", cls: "discord" }
];

// ============================================================
// STATE
// ============================================================
let favorites = JSON.parse(localStorage.getItem('ngg_favs') || '[]');
let currentPage = localStorage.getItem('ngg_page') || 'home';
let currentTheme = localStorage.getItem('ngg_theme') || 'theme-default';
let currentBg = localStorage.getItem('ngg_bg') || 'stars';
let isPerfMode = localStorage.getItem('ngg_perf') === 'true';
let isInteractive = localStorage.getItem('ngg_interactive') === 'true';
let inactivityTimer = null;
let inactivityLimit = parseInt(localStorage.getItem('ngg_inactivity') || '120000');
let inactivityEnabled = localStorage.getItem('ngg_inactivity') !== 'off';

// ============================================================
// INIT
// ============================================================
document.addEventListener('DOMContentLoaded', () => {
  applyTheme(currentTheme, false);
  if (isPerfMode) applyPerfMode(true);
  buildAllPages();          // build content first
  navigate(currentPage, false);  // then show the right page
  initBg(currentBg);
  if (isInteractive) enableInteractive();
  updateVisitorCount();
  loadSettings();
  startInactivity();
  checkOfficialSite();
});

// ============================================================
// NAVIGATION
// ============================================================
const PAGE_DISPLAYS = {
  'home': 'grid',
  'proxy': 'flex',
  'games': 'block',
  'websites': 'block',
  'eaglercraft': 'block',
  'partnerships': 'block',
  'medieval': 'block',
  'ourlinks': 'block',
  'other': 'block',
  'favorites': 'block',
  'settings': 'block'
};

function navigate(page, save = true) {
  // Hide all pages
  document.querySelectorAll('.page').forEach(p => {
    p.classList.remove('active');
    p.style.display = 'none';
  });
  // Deactivate all tabs
  document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
  // Show target page
  const pageEl = document.getElementById('page-' + page);
  if (pageEl) {
    pageEl.classList.add('active');
    pageEl.style.display = PAGE_DISPLAYS[page] || 'block';
  }
  // Activate tab
  const tabEl = document.querySelector(`[data-page="${page}"]`);
  if (tabEl) tabEl.classList.add('active');
  currentPage = page;
  if (save) localStorage.setItem('ngg_page', page);
  window.scrollTo(0, 0);
  clearSearch();
}

// ============================================================
// BUILD PAGES
// ============================================================
function buildAllPages() {
  buildGames();
  buildWebsites();
  buildLinkList('eaglercraft-list', EAGLERCRAFT, true);
  buildLinkList('partnerships-list', PARTNERSHIPS, false);
  buildLinkList('medieval-list', MEDIEVAL, true);
  buildLinkList('ourlinks-list', OURLINKS, false);
  buildLinkList('other-list', OTHER, true);
  renderFavorites();
  document.getElementById('games-count').innerHTML = `<span>${GAMES.length}</span>`;
  document.getElementById('websites-count').innerHTML = `<span>${WEBSITES.length}</span>`;
}

function buildGames() {
  const grid = document.getElementById('games-grid');
  grid.innerHTML = '';
  GAMES.forEach((g, i) => {
    const isFav = favorites.includes('game:' + g.href);
    const card = document.createElement('a');
    card.className = 'game-card';
    card.href = g.href;
    card.target = '_blank';
    card.dataset.id = 'game:' + g.href;
    card.dataset.name = g.name;
    card.dataset.category = 'Games';
    card.style.setProperty('--i', i);
    card.innerHTML = `
      <div class="card-thumb">
        ${g.img ? `<img src="${g.img}" alt="${g.name}" onerror="this.parentElement.innerHTML='<div class=card-thumb-placeholder>${g.icon}</div>'">` : `<div class="card-thumb-placeholder">${g.icon}</div>`}
        <div class="card-thumb-overlay"></div>
        <span class="card-fav ${isFav?'active':''}" onclick="toggleFav(event,'game:${g.href}',this)">â˜…</span>
      </div>
      <div class="card-info">
        <div class="card-name">${g.name}</div>
        <span class="card-tag">Game</span>
      </div>`;
    grid.appendChild(card);
  });
}

function buildWebsites() {
  const grid = document.getElementById('websites-grid');
  grid.innerHTML = '';
  WEBSITES.forEach((w, i) => {
    const isFav = favorites.includes('site:' + w.href);
    let domain = '';
    try { domain = new URL(w.href).hostname; } catch(e) {}
    const faviconUrl = `https://www.google.com/s2/favicons?domain=${domain}&sz=32`;
    const card = document.createElement('a');
    card.className = 'site-card';
    card.href = w.href;
    card.target = '_blank';
    card.dataset.id = 'site:' + w.href;
    card.dataset.name = w.name;
    card.dataset.category = 'Websites';
    card.style.setProperty('--i', i);
    card.innerHTML = `
      <div class="site-preview">
        <div class="site-preview-bg"></div>
        <img class="site-favicon" src="${faviconUrl}" alt="${domain}" onerror="this.style.display='none'">
        <div class="site-domain">${domain}</div>
        <span class="site-fav ${isFav?'active':''}" onclick="toggleFav(event,'site:${w.href}',this)">â˜…</span>
      </div>
      <div class="site-info">
        <div class="site-name ${w.cls||''}">${w.name}</div>
      </div>`;
    grid.appendChild(card);
  });
}

function buildLinkList(containerId, data, hasCls) {
  const list = document.getElementById(containerId);
  list.innerHTML = '';
  data.forEach((item, i) => {
    const id = 'link:' + item.href;
    const isFav = favorites.includes(id);
    const row = document.createElement('div');
    row.className = 'link-row';
    row.dataset.name = item.name;
    row.dataset.href = item.href;
    const cls = hasCls && item.cls ? item.cls : '';
    row.innerHTML = `
      <a href="${item.href}" target="_blank" class="${cls}">${item.name}</a>
      <span class="link-row-fav ${isFav?'active':''}" onclick="toggleFav(event,'${id}',this)">â˜…</span>`;
    list.appendChild(row);
  });
}

// ============================================================
// FAVORITES
// ============================================================
function toggleFav(e, id, starEl) {
  e.preventDefault();
  e.stopPropagation();
  if (favorites.includes(id)) {
    favorites = favorites.filter(f => f !== id);
    starEl.classList.remove('active');
  } else {
    favorites.push(id);
    starEl.classList.add('active', 'animate');
    setTimeout(() => starEl.classList.remove('animate'), 350);
    showToast('â­ Added to favorites!', 'success');
  }
  saveFavorites();
  renderFavorites();
}

function saveFavorites() {
  localStorage.setItem('ngg_favs', JSON.stringify(favorites));
}

function renderFavorites() {
  const container = document.getElementById('favorites-content');
  if (!container) return;
  if (favorites.length === 0) {
    container.innerHTML = `<div class="empty-state"><div class="es-icon">â­</div><h3>No Favorites Yet</h3><p>Click the â˜… on any game or website to add it here.</p></div>`;
    return;
  }
  // Build combined list from all sources
  container.innerHTML = '';
  const list = document.createElement('div');
  list.className = 'link-list';
  favorites.forEach(id => {
    let item = null;
    if (id.startsWith('game:')) {
      const href = id.slice(5);
      const g = GAMES.find(x => x.href === href);
      if (g) item = { name: g.name, href: g.href, cls: '' };
    } else if (id.startsWith('site:')) {
      const href = id.slice(5);
      const s = WEBSITES.find(x => x.href === href);
      if (s) item = { name: s.name, href: s.href, cls: s.cls || '' };
    } else if (id.startsWith('link:')) {
      const href = id.slice(5);
      const allLinks = [...PARTNERSHIPS, ...EAGLERCRAFT, ...OURLINKS, ...MEDIEVAL, ...OTHER];
      const l = allLinks.find(x => x.href === href);
      if (l) item = { name: l.name, href: l.href, cls: l.cls || '' };
    }
    if (item) {
      const row = document.createElement('div');
      row.className = 'link-row';
      row.innerHTML = `
        <a href="${item.href}" target="_blank" class="${item.cls}">${item.name}</a>
        <span class="link-row-fav active" onclick="removeFav(event,'${id}',this)">â˜…</span>`;
      list.appendChild(row);
    }
  });
  container.appendChild(list);
}

function removeFav(e, id, el) {
  e.preventDefault();
  e.stopPropagation();
  favorites = favorites.filter(f => f !== id);
  saveFavorites();
  // Update star in the actual page if visible
  document.querySelectorAll(`[data-id="${id}"] .card-fav, [data-id="${id}"] .site-fav`).forEach(s => s.classList.remove('active'));
  renderFavorites();
  showToast('Removed from favorites', '');
}

function clearFavorites() {
  if (!confirm('Clear all favorites?')) return;
  favorites = [];
  saveFavorites();
  // Clear all stars
  document.querySelectorAll('.card-fav.active, .site-fav.active, .link-row-fav.active').forEach(s => s.classList.remove('active'));
  renderFavorites();
  showToast('Favorites cleared', '');
}

// ============================================================
// SEARCH
// ============================================================
function handleSearch(val) {
  const q = val.trim().toLowerCase();
  const sr = document.getElementById('search-results');
  if (!q) { sr.classList.remove('visible'); return; }
  sr.classList.add('visible');
  const allItems = [
    ...GAMES.map(g => ({ name: g.name, href: g.href, icon: g.icon, cat: 'Games', id: 'game:'+g.href })),
    ...WEBSITES.map(w => ({ name: w.name, href: w.href, icon: 'ğŸŒ', cat: 'Websites', id: 'site:'+w.href })),
    ...EAGLERCRAFT.map(e => ({ name: e.name, href: e.href, icon: 'â›', cat: 'Eaglercraft', id: 'link:'+e.href })),
    ...PARTNERSHIPS.map(p => ({ name: p.name, href: p.href, icon: 'ğŸ‘¥', cat: 'Partnerships', id: 'link:'+p.href })),
    ...OURLINKS.map(l => ({ name: l.name, href: l.href, icon: 'ğŸ•¹ï¸', cat: 'Our Links', id: 'link:'+l.href })),
    ...OTHER.map(o => ({ name: o.name, href: o.href, icon: 'ğŸ“¦', cat: 'Other', id: 'link:'+o.href }))
  ];
  const results = allItems.filter(x => x.name.toLowerCase().includes(q)).slice(0, 15);
  sr.innerHTML = `<h4>ğŸ” Results for "${val}"</h4>`;
  if (results.length === 0) {
    sr.innerHTML += `<div style="color:var(--text-muted);font-size:14px;padding:10px 0">No results found</div>`;
  } else {
    results.forEach(r => {
      const div = document.createElement('a');
      div.className = 'sr-item'; div.href = r.href; div.target = '_blank';
      div.innerHTML = `<span class="sr-icon">${r.icon}</span><div class="sr-text"><div class="sr-name">${r.name}</div><div class="sr-cat">${r.cat}</div></div>`;
      sr.appendChild(div);
    });
  }
}

function clearSearch() {
  document.getElementById('search').value = '';
  document.getElementById('search-results').classList.remove('visible');
}

// Close search results on outside click
document.addEventListener('click', (e) => {
  if (!e.target.closest('#navbar-search') && !e.target.closest('#search-results')) {
    clearSearch();
  }
});

// ============================================================
// THEME
// ============================================================
function setTheme(theme) {
  applyTheme(theme, true);
}

function applyTheme(theme, save) {
  const themes = ['theme-default','theme-neon','theme-midnight','theme-sunset','theme-ocean','theme-forest'];
  document.body.classList.remove(...themes);
  document.body.classList.add(theme);
  currentTheme = theme;
  if (save) localStorage.setItem('ngg_theme', theme);
  // Update theme chips
  document.querySelectorAll('.theme-chip').forEach(c => {
    c.classList.toggle('active', c.dataset.theme === theme);
  });
  // Restart bg with new theme colors
  if (!isPerfMode) { stopBg(); initBg(currentBg); }
}

// ============================================================
// BACKGROUND EFFECTS
// ============================================================
const canvas = document.getElementById('bgCanvas');
const ctx = canvas.getContext('2d');
let bgAnim = null;
let bgParticles = [];
let clickParticles = [];
let matrixColumns = [];

function getAccentColor() {
  return getComputedStyle(document.body).getPropertyValue('--accent').trim() || '#7c5cfc';
}
function getAccent2Color() {
  return getComputedStyle(document.body).getPropertyValue('--accent2').trim() || '#5eead4';
}

function resizeCanvas() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
window.addEventListener('resize', () => { resizeCanvas(); if(currentBg === 'matrix') initMatrix(); });
resizeCanvas();

function stopBg() {
  if (bgAnim) { cancelAnimationFrame(bgAnim); bgAnim = null; }
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  bgParticles = [];
  matrixColumns = [];
}

function initBg(type) {
  stopBg();
  currentBg = type;
  if (isPerfMode || type === 'none') return;
  document.querySelectorAll('.bg-chip').forEach(c => c.classList.toggle('active', c.dataset.bg === type));

  if (type === 'stars') initStars();
  else if (type === 'matrix') initMatrix();
  else if (type === 'geometric') initGeometric();
  else if (type === 'particles') initParticles();
  else if (type === 'nebula') initNebula();
}

// ---- STARS ----
function initStars() {
  bgParticles = Array.from({length:150}, () => ({
    x: Math.random() * canvas.width, y: Math.random() * canvas.height,
    r: Math.random() * 1.5 + 0.3, s: Math.random() * 0.4 + 0.05,
    opacity: Math.random() * 0.7 + 0.3, twinkle: Math.random() * Math.PI * 2
  }));
  function drawStars() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    const accent = getAccentColor();
    bgParticles.forEach(s => {
      s.y += s.s;
      s.twinkle += 0.05;
      if (s.y > canvas.height) { s.y = 0; s.x = Math.random() * canvas.width; }
      const op = s.opacity * (0.6 + 0.4 * Math.sin(s.twinkle));
      ctx.globalAlpha = op;
      ctx.fillStyle = '#ffffff';
      ctx.beginPath(); ctx.arc(s.x, s.y, s.r, 0, Math.PI*2); ctx.fill();
    });
    // Click bursts
    drawClickParticles();
    ctx.globalAlpha = 1;
    bgAnim = requestAnimationFrame(drawStars);
  }
  drawStars();
}

// ---- MATRIX ----
function initMatrix() {
  // Wider columns = fewer, less cluttered
  const colWidth = 22;
  const colCount = Math.floor(canvas.width / colWidth);
  // Stagger start positions so they don't all cascade at once
  matrixColumns = Array.from({length: colCount}, (_, i) => ({
    y: Math.random() * canvas.height * 2 - canvas.height,
    speed: Math.random() * 1.0 + 0.4,   // much slower (was 1-4)
    opacity: Math.random() * 0.4 + 0.2, // randomise column brightness
    trailLen: Math.floor(Math.random() * 8 + 5) // how many chars in trail
  }));
  // Smaller, calmer character set
  const chars = 'ã‚¢ã‚¦ã‚¨ã‚ªã‚«ã‚³ã‚µã‚·ã‚¹ã‚¿ãƒãƒ„ãƒ†ãƒŠãƒ‹ãƒŒ01ã‚¢ã‚¦ã‚¨ã‚ªã‚«ã‚³';
  let frame = 0;
  function drawMatrix() {
    frame++;
    // Very slow fade = long persistent trails but low presence
    ctx.fillStyle = 'rgba(0,0,0,0.06)';
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    const accent = getAccentColor();
    // Only update every 2 frames so chars don't flicker wildly
    const doUpdate = frame % 2 === 0;
    matrixColumns.forEach((col, i) => {
      const x = i * colWidth + 4;
      ctx.font = '14px monospace';
      if (doUpdate) {
        // Leading character â€” soft white glow, low alpha
        const leadChar = chars[Math.floor(Math.random() * chars.length)];
        ctx.globalAlpha = col.opacity * 0.7;
        ctx.fillStyle = '#c8ffc8';
        ctx.fillText(leadChar, x, col.y);
        // Dimmer trail characters
        for (let t = 1; t < col.trailLen; t++) {
          const trailAlpha = col.opacity * (1 - t / col.trailLen) * 0.3;
          if (trailAlpha < 0.02) break;
          ctx.globalAlpha = trailAlpha;
          ctx.fillStyle = accent;
          ctx.fillText(chars[Math.floor(Math.random() * chars.length)], x, col.y - t * 14);
        }
        col.y += col.speed;
        if (col.y > canvas.height + 60) {
          col.y = -Math.random() * canvas.height * 0.5;
          col.speed = Math.random() * 1.0 + 0.4;
          col.opacity = Math.random() * 0.4 + 0.2;
        }
      }
    });
    drawClickParticles();
    ctx.globalAlpha = 1;
    bgAnim = requestAnimationFrame(drawMatrix);
  }
  drawMatrix();
}

// ---- GEOMETRIC ----
function initGeometric() {
  bgParticles = Array.from({length:20}, () => ({
    x: Math.random() * canvas.width, y: Math.random() * canvas.height,
    size: Math.random() * 60 + 20, rotation: Math.random() * Math.PI*2,
    rotSpeed: (Math.random() - 0.5) * 0.01,
    vx: (Math.random()-0.5)*0.3, vy: (Math.random()-0.5)*0.3,
    sides: Math.floor(Math.random()*4)+3, opacity: Math.random()*0.1+0.03
  }));
  function drawPoly(x, y, r, sides, rot) {
    ctx.beginPath();
    for (let i = 0; i <= sides; i++) {
      const a = (i/sides) * Math.PI*2 + rot;
      i===0 ? ctx.moveTo(x+r*Math.cos(a), y+r*Math.sin(a)) : ctx.lineTo(x+r*Math.cos(a), y+r*Math.sin(a));
    }
    ctx.closePath();
  }
  function drawGeo() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    const accent = getAccentColor();
    const accent2 = getAccent2Color();
    bgParticles.forEach((p, i) => {
      p.x += p.vx; p.y += p.vy; p.rotation += p.rotSpeed;
      if (p.x < -100) p.x = canvas.width+100;
      if (p.x > canvas.width+100) p.x = -100;
      if (p.y < -100) p.y = canvas.height+100;
      if (p.y > canvas.height+100) p.y = -100;
      ctx.globalAlpha = p.opacity;
      ctx.strokeStyle = i % 2 ? accent : accent2;
      ctx.lineWidth = 1;
      drawPoly(p.x, p.y, p.size, p.sides, p.rotation);
      ctx.stroke();
    });
    drawClickParticles();
    ctx.globalAlpha = 1;
    bgAnim = requestAnimationFrame(drawGeo);
  }
  drawGeo();
}

// ---- PARTICLES (interactive) ----
function initParticles() {
  bgParticles = Array.from({length:80}, () => ({
    x: Math.random()*canvas.width, y: Math.random()*canvas.height,
    r: Math.random()*2+0.5, vx:(Math.random()-.5)*0.5, vy:(Math.random()-.5)*0.5,
    life: 1, maxLife: 1
  }));
  let mouseX = canvas.width/2, mouseY = canvas.height/2;
  canvas.addEventListener('mousemove', e => { mouseX = e.clientX; mouseY = e.clientY; });
  function drawParticles() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    const accent = getAccentColor();
    // Draw connections
    bgParticles.forEach((p, i) => {
      p.x += p.vx; p.y += p.vy;
      if(p.x<0||p.x>canvas.width) p.vx*=-1;
      if(p.y<0||p.y>canvas.height) p.vy*=-1;
      // Mouse interaction
      const dx = mouseX-p.x, dy = mouseY-p.y, dist = Math.sqrt(dx*dx+dy*dy);
      if (dist < 100) { p.vx += dx*0.0003; p.vy += dy*0.0003; }
      bgParticles.slice(i+1).forEach(q => {
        const d = Math.sqrt((p.x-q.x)**2+(p.y-q.y)**2);
        if (d < 80) {
          ctx.globalAlpha = (1-d/80)*0.15;
          ctx.strokeStyle = accent; ctx.lineWidth = 0.5;
          ctx.beginPath(); ctx.moveTo(p.x,p.y); ctx.lineTo(q.x,q.y); ctx.stroke();
        }
      });
      ctx.globalAlpha = 0.5;
      ctx.fillStyle = accent;
      ctx.beginPath(); ctx.arc(p.x,p.y,p.r,0,Math.PI*2); ctx.fill();
    });
    drawClickParticles();
    ctx.globalAlpha = 1;
    bgAnim = requestAnimationFrame(drawParticles);
  }
  drawParticles();
}

// ---- NEBULA ----
function initNebula() {
  bgParticles = Array.from({length:200}, () => ({
    x: Math.random()*canvas.width, y: Math.random()*canvas.height,
    r: Math.random()*100+20, opacity: Math.random()*0.06+0.01,
    hue: Math.random()*60, phase: Math.random()*Math.PI*2
  }));
  function drawNebula() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    const accent = getAccentColor();
    bgParticles.forEach(p => {
      p.phase += 0.003;
      const op = p.opacity * (0.7 + 0.3*Math.sin(p.phase));
      const grad = ctx.createRadialGradient(p.x,p.y,0,p.x,p.y,p.r);
      grad.addColorStop(0, accent.replace('#','rgba(') + `,${op})`);
      grad.addColorStop(1, 'transparent');
      try {
        const r = parseInt(accent.slice(1,3),16), g2 = parseInt(accent.slice(3,5),16), b = parseInt(accent.slice(5,7),16);
        const grad2 = ctx.createRadialGradient(p.x,p.y,0,p.x,p.y,p.r);
        grad2.addColorStop(0, `rgba(${r},${g2},${b},${op})`);
        grad2.addColorStop(1, 'rgba(0,0,0,0)');
        ctx.fillStyle = grad2;
      } catch(e) { ctx.fillStyle = 'rgba(124,92,252,0.02)'; }
      ctx.beginPath(); ctx.arc(p.x,p.y,p.r,0,Math.PI*2); ctx.fill();
    });
    // Add small twinkling stars
    ctx.fillStyle = '#ffffff';
    for (let i = 0; i < 5; i++) {
      ctx.globalAlpha = Math.random()*0.5;
      const sx = Math.random()*canvas.width, sy = Math.random()*canvas.height;
      ctx.beginPath(); ctx.arc(sx,sy,0.5,0,Math.PI*2); ctx.fill();
    }
    drawClickParticles();
    ctx.globalAlpha = 1;
    bgAnim = requestAnimationFrame(drawNebula);
  }
  drawNebula();
}

// ---- CLICK PARTICLES ----
function spawnClickParticles(x, y) {
  const accent = getAccentColor();
  const accent2 = getAccent2Color();
  for (let i = 0; i < 20; i++) {
    const angle = (i/20)*Math.PI*2 + Math.random()*0.5;
    const speed = Math.random()*5+2;
    clickParticles.push({
      x, y, vx: Math.cos(angle)*speed, vy: Math.sin(angle)*speed,
      r: Math.random()*3+1, life: 1,
      color: Math.random()>0.5 ? accent : accent2
    });
  }
}

function drawClickParticles() {
  clickParticles = clickParticles.filter(p => p.life > 0);
  clickParticles.forEach(p => {
    p.x += p.vx; p.y += p.vy;
    p.vx *= 0.95; p.vy *= 0.95;
    p.life -= 0.035;
    ctx.globalAlpha = p.life * 0.8;
    ctx.fillStyle = p.color;
    ctx.beginPath(); ctx.arc(p.x, p.y, p.r*p.life, 0, Math.PI*2); ctx.fill();
  });
}

// ---- INTERACTIVE ----
function enableInteractive() {
  canvas.classList.add('interactive');
  canvas.removeEventListener('click', handleCanvasClick);
  canvas.addEventListener('click', handleCanvasClick);
}
function disableInteractive() {
  canvas.classList.remove('interactive');
  canvas.removeEventListener('click', handleCanvasClick);
}
function handleCanvasClick(e) {
  spawnClickParticles(e.clientX, e.clientY);
}

function toggleInteractive(val) {
  isInteractive = val;
  localStorage.setItem('ngg_interactive', val);
  val ? enableInteractive() : disableInteractive();
}

function setBgEffect(type) {
  currentBg = type;
  localStorage.setItem('ngg_bg', type);
  initBg(type);
}

// ============================================================
// PERFORMANCE MODE
// ============================================================
function togglePerfMode(val) {
  if (val === undefined) {
    isPerfMode = !isPerfMode;
  } else {
    isPerfMode = val;
  }
  applyPerfMode(isPerfMode);
}

function applyPerfMode(val) {
  isPerfMode = val;
  localStorage.setItem('ngg_perf', val);
  document.body.classList.toggle('perf-mode', val);
  const btn = document.getElementById('perf-btn');
  if (btn) btn.classList.toggle('active', val);
  const toggle = document.getElementById('perf-toggle');
  if (toggle) toggle.checked = val;
  if (val) stopBg();
  else initBg(currentBg);
}

// ============================================================
// SETTINGS LOAD
// ============================================================
function loadSettings() {
  // Inactivity
  const inactSel = document.getElementById('inactivity-select');
  const saved = localStorage.getItem('ngg_inactivity');
  if (saved && inactSel) inactSel.value = saved;
  // Interactive toggle
  const intTog = document.getElementById('interactive-toggle');
  if (intTog) intTog.checked = isInteractive;
  // Perf toggle
  const perfTog = document.getElementById('perf-toggle');
  if (perfTog) perfTog.checked = isPerfMode;
  // BG chips
  document.querySelectorAll('.bg-chip').forEach(c => c.classList.toggle('active', c.dataset.bg === currentBg));
  // Theme chips
  document.querySelectorAll('.theme-chip').forEach(c => c.classList.toggle('active', c.dataset.theme === currentTheme));
}

function saveInactivity(val) {
  localStorage.setItem('ngg_inactivity', val);
  inactivityEnabled = val !== 'off';
  inactivityLimit = val === 'off' ? 0 : parseInt(val);
  resetInactivity();
}

// ============================================================
// INACTIVITY
// ============================================================
function startInactivity() {
  const saved = localStorage.getItem('ngg_inactivity');
  if (saved === 'off') { inactivityEnabled = false; return; }
  if (saved) inactivityLimit = parseInt(saved);
  resetInactivity();
  ['mousemove','keydown','scroll','click','touchstart'].forEach(ev => {
    document.addEventListener(ev, resetInactivity, {passive:true});
  });
}

function resetInactivity() {
  if (!inactivityEnabled) return;
  clearTimeout(inactivityTimer);
  inactivityTimer = setTimeout(() => window.location.replace(window.location.href), inactivityLimit);
}

// ============================================================
// VISITOR COUNT
// ============================================================
function updateVisitorCount() {
  let count = parseInt(localStorage.getItem('ngg_views') || '0');
  if (!sessionStorage.getItem('ngg_session')) {
    count++;
    localStorage.setItem('ngg_views', count);
    sessionStorage.setItem('ngg_session', '1');
  }
  const el = document.getElementById('stat-views');
  if (el) el.textContent = count.toLocaleString();
}

// ============================================================
// DATA IMPORT / EXPORT
// ============================================================
function exportData() {
  const data = {
    version: '1.6.0',
    exported: new Date().toISOString(),
    favorites: favorites,
    theme: currentTheme,
    bg: currentBg,
    inactivity: localStorage.getItem('ngg_inactivity'),
    interactive: isInteractive,
    perf: isPerfMode
  };
  const blob = new Blob([JSON.stringify(data, null, 2)], {type:'application/json'});
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = 'ngg-data.json';
  a.click();
  showToast('ğŸ“¤ Data exported!', 'success');
}

function importData(input) {
  const file = input.files[0];
  if (!file) return;
  const reader = new FileReader();
  reader.onload = (e) => {
    try {
      const data = JSON.parse(e.target.result);
      if (data.favorites) { favorites = data.favorites; saveFavorites(); }
      if (data.theme) { applyTheme(data.theme, true); }
      if (data.bg) { setBgEffect(data.bg); }
      if (data.inactivity) { localStorage.setItem('ngg_inactivity', data.inactivity); }
      if (data.interactive !== undefined) { toggleInteractive(data.interactive); }
      loadSettings();
      renderFavorites();
      showToast('ğŸ“¥ Data imported!', 'success');
    } catch(err) {
      showToast('âŒ Invalid file', 'error');
    }
  };
  reader.readAsText(file);
  input.value = '';
}

// ============================================================
// CLEAR ALL DATA
// ============================================================
function clearAllData() {
  if (!confirm('Reset ALL data? This cannot be undone.')) return;
  localStorage.clear(); sessionStorage.clear();
  showToast('All data cleared. Reloading...', '');
  setTimeout(() => location.reload(), 1000);
}

// ============================================================
// BLOB / ABOUT BLANK
// ============================================================
function openBlob() {
  const blob = new Blob([document.documentElement.outerHTML], {type:'text/html'});
  window.open(URL.createObjectURL(blob), '_blank');
}
function openAboutBlank() {
  const w = window.open('about:blank', '_blank');
  if (w) { w.document.open(); w.document.write(document.documentElement.outerHTML); w.document.close(); }
}

// ============================================================
// TOAST
// ============================================================
function showToast(msg, type) {
  const container = document.getElementById('toast-container');
  const t = document.createElement('div');
  t.className = `toast ${type}`;
  t.textContent = msg;
  container.appendChild(t);
  setTimeout(() => { t.style.opacity='0'; t.style.transform='translateX(20px)'; t.style.transition='all 0.3s'; setTimeout(()=>t.remove(),300); }, 2500);
}

// ============================================================
// UNOFFICIAL WARNING
// ============================================================
function checkOfficialSite() {
  const official = ['https://www.nolangraysongames.com','https://nolansandgraysonsgames.w3spaces.com','https://nolanbetter.github.io','https://nolanbetter-github-io.vercel.app','https://mathisfun-lilac.vercel.app','https://clevercom-iota.vercel.app','about:blank'];
  if (!official.includes(window.location.origin)) {
    showToast('âš ï¸ Unofficial copy â€“ visit nolangraysongames.com for the official site', 'error');
  }
}

// ============================================================
// NAVBAR EDGE SCROLL
// ============================================================
(function initNavEdgeScroll() {
  const tabs = document.getElementById('navbar-tabs');
  if (!tabs) return;

  let scrollRAF = null;
  let scrollSpeed = 0;

  // Edge zone = 80px from either side of the tab bar
  const EDGE = 80;
  const MAX_SPEED = 12;

  function onMouseMove(e) {
    const rect = tabs.getBoundingClientRect();
    const x = e.clientX - rect.left;   // position inside the bar
    const w = rect.width;

    if (x < 0 || x > w) {
      // Mouse left the bar â€” stop
      scrollSpeed = 0;
      return;
    }

    if (x < EDGE) {
      // Left edge: scroll left, faster the closer to edge
      scrollSpeed = -MAX_SPEED * (1 - x / EDGE);
    } else if (x > w - EDGE) {
      // Right edge: scroll right
      scrollSpeed = MAX_SPEED * (1 - (w - x) / EDGE);
    } else {
      scrollSpeed = 0;
    }
  }

  function onMouseLeave() {
    scrollSpeed = 0;
  }

  function loop() {
    if (scrollSpeed !== 0) {
      tabs.scrollLeft += scrollSpeed;
    }
    scrollRAF = requestAnimationFrame(loop);
  }

  tabs.addEventListener('mousemove', onMouseMove);
  tabs.addEventListener('mouseleave', onMouseLeave);
  scrollRAF = requestAnimationFrame(loop);
})();

// ============================================================
// KEYBOARD SHORTCUTS
// ============================================================
document.addEventListener('keydown', e => {
  if (e.key === 'Escape') clearSearch();
  if ((e.ctrlKey || e.metaKey) && e.key === 'k') { e.preventDefault(); document.getElementById('search').focus(); }
});
</script>
</body>
</html>
